"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4474],{8297:(e,n,l)=>{l.d(n,{A:()=>d});var t=l(9950),i=l(55902),a=l(41397),o=l(60767),s=l(44414);function d(e){let{handleChange:n,defaultValue:l,resetSearch:d,...r}=e;const[c,u]=(0,t.useState)(l),v=(0,t.useMemo)((()=>(0,a.debounce)((e=>{n(e)}),800)),[n]);return(0,t.useEffect)((()=>{u(l)}),[d,l]),(0,s.jsx)(i.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,s.jsx)(o.A,{}),...r})}},47992:(e,n,l)=>{l.d(n,{G:()=>r});var t=l(9950),i=l(95491),a=l.n(i),o=l(99674),s=l(90650),d=l(44414);const r=e=>{let{fetchOptions:n,debounceTimeout:l=400,onClear:i,...r}=e;const[c,u]=(0,t.useState)(!1),[v,h]=(0,t.useState)([]),m=(0,t.useMemo)((()=>a()((e=>{h([]),u(!0),n(e).then((e=>{h(e),u(!1)}))}),l)),[n,l]);return(0,d.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),i&&i()},notFoundContent:c?(0,d.jsx)(s.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{m("")}})}},80415:(e,n,l)=>{l.d(n,{Av:()=>c,HF:()=>i,HV:()=>d,LH:()=>t,No:()=>s,Qt:()=>o,fz:()=>r,g$:()=>a});const t={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},i=["progress","paid","canceled","rejected","refund"],a=["before","after"],o=["blue","red","gold","volcano","cyan","lime"],s=["new","accepted","cooking","ready","ended"],d=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],r=["dine_in","delivery","pickup"],c=["male","female"]},29597:(e,n,l)=>{l.d(n,{A:()=>t});l(63620);function t(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},53774:(e,n,l)=>{l.d(n,{A:()=>i});var t=l(83291);function i(){var e,n;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;const o=null===(e=t.M.getState())||void 0===e||null===(n=e.currency)||void 0===n?void 0:n.defaultCurrency,s=Number(l).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),d=i||(null===o||void 0===o?void 0:o.symbol)||"$";return"after"===(a||(null===o||void 0===o?void 0:o.position)||"before")?"".concat(s," ").concat(d):"".concat(d," ").concat(s)}},48946:(e,n,l)=>{l.d(n,{A:()=>i});var t=l(82371);const i={orderExport:(e,n)=>t.A.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:n,responseType:"blob"})}},26714:(e,n,l)=>{l.d(n,{A:()=>A});var t=l(9950),i=l(48946),a=l(39362),o=l.n(a),s=l(81446),d=l(23263),r=l(20380),c=l(48538),u=l(87094),v=l(41988),h=l(70030),m=l(50384),p=l(68873),x=l(28429),j=l(44414);const g=d.A.Meta,A=e=>{let{id:n,handleCancel:l}=e;const[a,A]=(0,t.useState)(null),{t:y}=(0,h.B)(),f=(0,x.Zp)();return(0,j.jsx)(j.Fragment,{children:a?(0,j.jsx)(s.A,{}):(0,j.jsx)(r.A,{visible:!!n,title:y("selected.download"),closable:!1,handleCancel:l,footer:[(0,j.jsx)(c.A,{type:"default",onClick:l,children:y("cancel")},"cancelBtn")],children:(0,j.jsxs)(u.A,{children:[(0,j.jsx)(v.A,{span:12,children:(0,j.jsx)(d.A,{title:y("download.pdf"),onClick:()=>function(e){A(!0),i.A.orderExport(e).then((n=>{o()(n,"invoice_".concat(e,".pdf"),"application/pdf"),l()})).finally((()=>A(!1)))}(n),className:"text-center cursor-pointer",children:(0,j.jsx)(g,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(m.yos,{size:80})})})}),(0,j.jsx)(v.A,{span:12,children:(0,j.jsx)(d.A,{title:y("download.check"),onClick:()=>(e=>{f("/orders/generate-invoice/".concat(e))})(n),className:"text-center cursor-pointer",children:(0,j.jsx)(g,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(p.TBA,{size:85})})})})]})})})}},23283:(e,n,l)=>{l.d(n,{A:()=>g});var t=l(9950),i=l(59233),a=l(20380),o=l(48538),s=l(87094),d=l(41988),r=l(99674),c=l(91854),u=l(23758),v=l(74623),h=l(70030),m=l(53271),p=l(47992),x=l(80415),j=l(44414);function g(e){var n,l,g,A;let{orderDetails:y,handleCancel:f}=e;const{t:b}=(0,h.B)(),{activeMenu:_}=(0,c.d4)((e=>e.menu),c.bN),[C]=i.A.useForm(),w=(0,c.wA)(),[k,S]=(0,t.useState)(!1),N=x.HF.map((e=>({label:b(e),value:e,key:e})));return(0,j.jsx)(a.A,{visible:!!y,onCancel:f,footer:[(0,j.jsx)(o.A,{type:"primary",onClick:()=>C.submit(),loading:k,children:b("save")},"saveBtn"),(0,j.jsx)(o.A,{type:"default",onClick:f,children:b("cancel")},"cancelBtn")],children:(0,j.jsx)(i.A,{form:C,layout:"vertical",onFinish:e=>{var n,l;const t={deliveryman:null===e||void 0===e||null===(n=e.deliveryman)||void 0===n?void 0:n.value,transaction_status:(null===e||void 0===e||null===(l=e.transaction_status)||void 0===l?void 0:l.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};S(!0),u.A.updateDelivery(y.id,t).then((()=>{f(),w((0,v.Ms)(_))})).finally((()=>S(!1)))},initialValues:{deliveryman:null!==y&&void 0!==y&&y.deliveryman?{label:"".concat((null===y||void 0===y||null===(n=y.deliveryman)||void 0===n?void 0:n.firstname)||""," ").concat((null===y||void 0===y||null===(l=y.deliveryman)||void 0===l?void 0:l.lastname)||""),value:null===y||void 0===y||null===(g=y.deliveryman)||void 0===g?void 0:g.id}:void 0,transaction_status:null===y||void 0===y||null===(A=y.transaction)||void 0===A?void 0:A.status},children:(0,j.jsxs)(s.A,{gutter:12,children:[(0,j.jsx)(d.A,{span:24,children:(0,j.jsx)(i.A.Item,{label:b("deliveryman"),name:"deliveryman",rules:[{required:!0,message:b("required")}],children:(0,j.jsx)(p.G,{className:"w-100",debounceTimeout:500,placeholder:b("select.deliveryman"),fetchOptions:async e=>{var n,l;const t={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",shop_id:y.shop.id,exist_token:1,"address[latitude]":(null===y||void 0===y||null===(n=y.location)||void 0===n?void 0:n.latitude)||void 0,"address[longitude]":(null===y||void 0===y||null===(l=y.location)||void 0===l?void 0:l.longitude)||void 0};return m.A.getAll(t).then((e=>{let{data:n}=e;return n.map((e=>({label:e.firstname+" "+e.lastname||"no name",value:e.id})))}))},allowClear:!0})})}),(null===y||void 0===y?void 0:y.transaction)&&(0,j.jsx)(d.A,{span:24,children:(0,j.jsx)(i.A.Item,{label:b("transaction.status"),name:"transaction_status",children:(0,j.jsx)(r.A,{options:N,labelInValue:!0})})})]})})})}},56592:(e,n,l)=>{l.d(n,{A:()=>j});var t=l(9950),i=l(59233),a=l(20380),o=l(48538),s=l(87094),d=l(41988),r=l(99674),c=l(91854),u=l(70030),v=l(23758),h=l(74623),m=l(80415),p=l(28429),x=l(44414);function j(e){var n;let{orderDetails:l,handleCancel:j,status:g}=e;const{t:A}=(0,u.B)(),y=(0,c.wA)(),f=(0,p.Zp)(),[b]=i.A.useForm(),{activeMenu:_}=(0,c.d4)((e=>e.menu),c.bN),C=(0,c.d4)((e=>e.globalSettings.settings),c.bN),[w,k]=(0,t.useState)(!1),[S,N]=(0,t.useState)(g),B=m.HF.map((e=>({label:A(e),value:e,key:e})));(0,t.useEffect)((()=>{const e=g.findIndex((e=>e.name===l.status));let n=[g[e],g[e+1],{name:"canceled",id:null===g||void 0===g?void 0:g.length,active:!0}];e<0&&(n=[g[e+1],"canceled"]),N(n)}),[l]);return(0,x.jsx)(a.A,{visible:!!l,title:l.title,onCancel:j,footer:[(0,x.jsx)(o.A,{type:"primary",onClick:()=>b.submit(),loading:w,children:A("save")},"save-form"),(0,x.jsx)(o.A,{type:"default",onClick:j,children:A("cancel")},"cansel-modal")],children:(0,x.jsx)(i.A,{form:b,layout:"vertical",onFinish:e=>{var n,t;const i={status:(null===e||void 0===e||null===(n=e.status)||void 0===n?void 0:n.value)||(null===e||void 0===e?void 0:e.status),transaction_status:(null===e||void 0===e||null===(t=e.transaction_status)||void 0===t?void 0:t.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};k(!0),v.A.updateStatus(l.id,i).then((e=>{var n,l;"accepted"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status)&&"1"===(null===C||void 0===C?void 0:C.auto_print_order)?(e=>{const n="orders/generate-invoice/".concat(e);y((0,h.X4)({url:n,id:"generate-invoice ",name:A("generate.invoice")})),f("/".concat(n,"?print=true"))})(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.id):(j(),y((0,h.Ms)(_)))})).finally((()=>k(!1)))},initialValues:{status:null===l||void 0===l?void 0:l.status,transaction_status:null===l||void 0===l||null===(n=l.transaction)||void 0===n?void 0:n.status},children:(0,x.jsxs)(s.A,{gutter:12,children:[(0,x.jsx)(d.A,{span:24,children:(0,x.jsx)(i.A.Item,{label:A("status"),name:"status",rules:[{required:!0,message:A("required")}],children:(0,x.jsx)(r.A,{labelInValue:!0,children:null===S||void 0===S?void 0:S.map((e=>(0,x.jsx)(r.A.Option,{value:null===e||void 0===e?void 0:e.name,children:A(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)))})})}),(null===l||void 0===l?void 0:l.transaction)&&(0,x.jsx)(d.A,{span:24,children:(0,x.jsx)(i.A.Item,{label:A("transaction.status"),name:"transaction_status",children:(0,x.jsx)(r.A,{options:B})})})]})})})}},38635:(e,n,l)=>{l.d(n,{A:()=>M});var t=l(69286),i=l(86366),a=l(20380),o=l(48538),s=l(23263),d=l(87094),r=l(41988),c=l(12916),u=l(9950),v=l(70030),h=l(23758),m=l(81446),p=l(50384),x=l(91854),j=l(63620),g=l(41478),A=l(73631),y=l(29597),f=l(47965),b=l(31222),_=l(6604),C=l(68873),w=l(59051),k=l.n(w),S=l(44414);const{Step:N}=i.A,B=()=>(0,S.jsx)("img",{src:g,width:"50",alt:"Pin"}),F=()=>(0,S.jsx)("img",{src:A,width:"50",alt:"Pin"}),I=["blue","red","gold","volcano","cyan","lime"],M=e=>{var n,l,g,A,w,M;let{id:H,handleCancel:V}=e;const{t:D}=(0,v.B)(),[L,E]=(0,u.useState)(null),[T,q]=(0,u.useState)(null),[z,G]=(0,u.useState)(null),{settings:O}=(0,x.d4)((e=>e.globalSettings),x.bN),P=(0,y.A)(O),[Y,Z]=(0,u.useState)(0),[W,$]=(0,u.useState)((0,y.A)(O)),[U,X]=(0,u.useState)((0,y.A)(O)),[J,K]=(0,u.useState)([{id:0,name:"new",icon:(0,S.jsx)(f.A,{})},{id:1,name:"accepted",icon:(0,S.jsx)(p.LW,{})},{id:2,name:"ready",icon:(0,S.jsx)(b.NtI,{})},{id:3,name:"on_a_way",icon:(0,S.jsx)(_.o2P,{})},{id:4,name:"delivered",icon:(0,S.jsx)(_.eDZ,{})}]);const{google_map_key:Q}=(0,x.d4)((e=>e.globalSettings.settings),x.bN);(0,u.useEffect)((()=>{E(!0),h.A.getById(H).then((e=>{var n;let{data:l}=e;K("canceled"===l.status?[{id:1,name:"new",icon:(0,S.jsx)(f.A,{})},{id:5,name:"canceled",icon:(0,S.jsx)(C.XfH,{})}]:J),Z("canceled"===l.status?1:null===(n=J.find((e=>e.name===l.status)))||void 0===n?void 0:n.id),G("canceled"===l.status?"error":"success"),q(l),X({lat:l.location.latitude,lng:l.location.longitude}),$({lat:l.shop.location.latitude,lng:l.shop.location.longitude})})).finally((()=>{E(!1)}))}),[]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(a.A,{visible:!!H,title:D("show.locations"),onCancel:()=>V(),style:{minWidth:"80vw"},footer:[(0,S.jsx)(o.A,{type:"default",onClick:V,children:D("cancel")},"cancelBtn")],children:L?(0,S.jsx)(m.A,{}):(0,S.jsxs)(s.A,{children:[(0,S.jsx)(i.A,{current:Y,status:z,className:"mb-5",children:null===J||void 0===J?void 0:J.map(((e,n)=>(0,S.jsx)(N,{title:D(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+n)))}),(0,S.jsxs)(d.A,{gutter:12,children:[(0,S.jsxs)(r.A,{span:12,children:[(0,S.jsxs)("h3",{children:[D("order.id")," #",null===T||void 0===T?void 0:T.id]}),(0,S.jsxs)("p",{children:[(0,S.jsx)(p.A5h,{})," ",k()(null===T||void 0===T?void 0:T.created_at).format("YYYY-MM-DD HH:mm")]}),(0,S.jsxs)("p",{children:[D("schedulet.at")," ",null===T||void 0===T?void 0:T.delivery_date]}),(0,S.jsxs)("span",{children:[(0,S.jsx)("strong",{children:null===T||void 0===T||null===(n=T.shop)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title})," ",null===T||void 0===T||null===(g=T.details)||void 0===g?void 0:g.map(((e,n)=>{var l,t,i;return(0,S.jsx)(c.A,{color:I[n],children:null===e||void 0===e||null===(l=e.stock)||void 0===l||null===(t=l.product)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title})}))]})]}),(0,S.jsxs)(r.A,{span:12,children:[(0,S.jsxs)("p",{children:[D("status")," ","new"===(null===T||void 0===T?void 0:T.status)?(0,S.jsx)(c.A,{color:"blue",children:D(null===T||void 0===T?void 0:T.status)}):"canceled"===(null===T||void 0===T?void 0:T.status)?(0,S.jsx)(c.A,{color:"error",children:D(null===T||void 0===T?void 0:T.status)}):(0,S.jsx)(c.A,{color:"cyan",children:D(null===T||void 0===T?void 0:T.status)})]}),(0,S.jsxs)("p",{children:[D("payment.method")," ",(0,S.jsx)("strong",{children:null===T||void 0===T||null===(A=T.transaction)||void 0===A||null===(w=A.payment_system)||void 0===w?void 0:w.tag})]}),(0,S.jsxs)("p",{children:[D("order.type")," ",(0,S.jsx)("strong",{children:null===T||void 0===T?void 0:T.delivery_type})]}),(0,S.jsxs)("p",{children:[D("payment.type")," ",(0,S.jsx)("strong",{children:null===T||void 0===T||null===(M=T.transaction)||void 0===M?void 0:M.status})]})]}),(0,S.jsxs)(r.A,{span:24,className:"mt-5",children:[(0,S.jsx)("h4",{children:D("map")}),(0,S.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,S.jsxs)(t.Ay,{bootstrapURLKeys:{key:j.CJ||Q},defaultZoom:15,center:P,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:n,maps:l}=e;const t=[W,U].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let i=new l.LatLngBounds;for(var a=0;a<t.length;a++)i.extend(t[a]);n.fitBounds(i)},children:[(0,S.jsx)(F,{lat:null===W||void 0===W?void 0:W.lat,lng:null===W||void 0===W?void 0:W.lng}),(0,S.jsx)(B,{lat:null===U||void 0===U?void 0:U.lat,lng:null===U||void 0===U?void 0:U.lng})]})})]})]})]})})})}},73631:(e,n,l)=>{e.exports=l.p+"static/media/shop.46d7a94ca800c711764a.png"},41478:(e,n,l)=>{e.exports=l.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);