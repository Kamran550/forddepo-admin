"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9025],{12970:(e,d,t)=>{function l(e){var d,t;let l=null===e||void 0===e?void 0:e.slice(0,1),i=null===e||void 0===e?void 0:e.lastIndexOf("@"),o=null===e||void 0===e?void 0:e.slice(1,i-1);o=null===(d=o)||void 0===d?void 0:d.replace(/./g,"*");let n=null===e||void 0===e?void 0:e.slice(i-1,e.length);return null===l||void 0===l||null===(t=l.concat(o))||void 0===t?void 0:t.concat(n)}t.d(d,{A:()=>l})},8168:(e,d,t)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(d,{A:()=>l})},53774:(e,d,t)=>{t.d(d,{A:()=>i});var l=t(83291);function i(){var e,d;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;const n=null===(e=l.M.getState())||void 0===e||null===(d=e.currency)||void 0===d?void 0:d.defaultCurrency,a=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=i||(null===n||void 0===n?void 0:n.symbol)||"$";return"after"===(o||(null===n||void 0===n?void 0:n.position)||"before")?"".concat(a," ").concat(r):"".concat(r," ").concat(a)}},99025:(e,d,t)=>{t.r(d),t.d(d,{default:()=>R});var l=t(80737),i=t(12916),o=t(66362),n=t(12203),a=t(90650),r=t(25496),c=t(48538),s=t(87094),u=t(41988),v=t(23263),p=t(72243),h=t(91524),x=t(74947),m=t(59051),g=t.n(m),A=t(9950),y=t(70030),j=t(91854),b=t(28429),f=t(53774),k=t(74623),I=t(53271),_=t(69554),w=t(53177),C=t(8168),S=t(13311),N=t(88986),D=t(23758),M=t(44414);const P=e=>{let{id:d}=e;const{t:t}=(0,y.B)(),o=(0,j.wA)(),a=(0,b.Zp)(),[r,c]=(0,A.useState)([]),[s,u]=(0,A.useState)(!1),{defaultCurrency:h}=(0,j.d4)((e=>e.currency),j.bN),x=e=>{u(!0),D.A.getUserTopProducts(d,e).then((e=>c(e.data))).finally((()=>u(!1)))};return(0,A.useEffect)((()=>{x()}),[]),(0,M.jsx)(v.A,{title:t("top.products"),children:(0,M.jsx)(n.A,{loading:s,dataSource:null===r||void 0===r?void 0:r.data,pagination:{total:null===r||void 0===r?void 0:r.total,current:null===r||void 0===r?void 0:r.current_page,pageSize:null===r||void 0===r?void 0:r.per_page},columns:[{title:t("product"),dataIndex:"stock",key:"stock",render:e=>{var d,i,n;return(0,M.jsxs)(l.A,{children:[(0,M.jsx)(p.A,{width:100,src:null===e||void 0===e||null===(d=e.countable)||void 0===d?void 0:d.img,placeholder:!0,style:{borderRadius:4}}),(0,M.jsx)("div",{onClick:()=>(e=>{o((0,k.X4)({id:"product-edit",url:"product/".concat(e.uuid),name:t("edit.product")})),a("/product/".concat(e.uuid))})(null===e||void 0===e?void 0:e.countable),className:"text-hover",children:null===e||void 0===e||null===(i=e.countable)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title})]})}},{title:t("count"),dataIndex:"count",key:"count"},{title:t("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,f.A)(e,null===h||void 0===h?void 0:h.symbol)},{title:t("status"),dataIndex:"status",key:"status",render:(e,d)=>{var l,o;return(0,M.jsx)(i.A,{children:null!==(l=d.stock)&&void 0!==l&&null!==(o=l.countable)&&void 0!==o&&o.active?t("active"):t("inactive")})}}],onChange:e=>x({page:null===e||void 0===e?void 0:e.current,perPage:null===e||void 0===e?void 0:e.pageSize})})})};var Y=t(99674),X=t(41242);const z=e=>{var d,t,l;let{id:o}=e;const{t:a}=(0,y.B)(),[r,c]=(0,A.useState)({}),[s,u]=(0,A.useState)(!1),{defaultCurrency:p}=(0,j.d4)((e=>e.currency),j.bN),h=e=>{u(!0),X.A.getAll({user_uuid:o,...e}).then((e=>{c(e)})).finally((()=>{u(!1)}))};return(0,A.useEffect)((()=>{h()}),[]),(0,M.jsx)(v.A,{title:a("order.refunds"),extra:(0,M.jsx)(Y.A,{options:[{label:a("pending"),value:"pending"},{label:a("accepted"),value:"accepted"},{label:a("canceled"),value:"canceled"}],onChange:e=>h({status:e}),placeholder:a("status"),allowClear:!0}),children:(0,M.jsx)(n.A,{loading:s,dataSource:null===r||void 0===r?void 0:r.data,pagination:{total:null===r||void 0===r||null===(d=r.meta)||void 0===d?void 0:d.total,current:null===r||void 0===r||null===(t=r.meta)||void 0===t?void 0:t.current_page,pageSize:null===r||void 0===r||null===(l=r.meta)||void 0===l?void 0:l.per_page},columns:[{title:a("cause"),dataIndex:"cause",key:"cause"},{title:a("answer"),dataIndex:"answer",key:"answer"},{title:a("total.price"),dataIndex:"total_price",key:"total_price",render:(e,d)=>{var t;return(0,f.A)(null===(t=d.order)||void 0===t?void 0:t.total_price,null===p||void 0===p?void 0:p.symbol)}},{title:a("status"),dataIndex:"status",key:"status",render:e=>(0,M.jsx)(i.A,{children:e})},{title:a("created.date.&.time"),dataIndex:"created_at",key:"created_at"}],onChange:e=>h({page:e.current,perPage:e.pageSize})})})};var E=t(12970);const R=()=>{var e;const{id:d}=(0,b.g)(),t=(0,b.Zp)(),[m,D]=(0,A.useState)({}),Y=(0,j.wA)(),[X,R]=(0,A.useState)(!1),{t:q}=(0,y.B)(),{activeMenu:B}=(0,j.d4)((e=>e.menu),j.bN),{defaultCurrency:Z}=(0,j.d4)((e=>e.currency),j.bN),{orders:F,meta:H,loading:K,params:O,statistic:T}=(0,j.d4)((e=>e.orders),j.bN),{isDemo:$,demoDeliveryman:U,demoSeller:G,demoAdmin:J,demoModerator:L,demoMeneger:Q}=(0,S.A)();const V=e=>{Y((0,k.X4)({id:"product-edit",url:"product/".concat(e),name:q("edit.product")})),t("/product/".concat(e))};return(0,A.useEffect)((()=>{var e;e=d,R(!0),I.A.getById(e).then((e=>D(e.data))).finally((()=>R(!1)))}),[d]),(0,A.useEffect)((()=>{const e={user_id:d,page:1,perPage:10};Y((0,w.DX)(e))}),[]),(0,N.A)((()=>{var e,t;const l={user_id:d,page:(null===B||void 0===B||null===(e=B.data)||void 0===e?void 0:e.page)||1,perPage:(null===B||void 0===B||null===(t=B.data)||void 0===t?void 0:t.perPage)||10};Y((0,w.DX)(l))}),[B.data]),X?(0,M.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:(0,M.jsx)(a.A,{})}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r.A,{title:q("user.info"),extra:(0,M.jsx)(c.A,{type:"primary",disabled:$&&(null===m||void 0===m?void 0:m.id)==U||$&&(null===m||void 0===m?void 0:m.id)==L||$&&(null===m||void 0===m?void 0:m.id)==Q||$&&(null===m||void 0===m?void 0:m.id)==G||$&&(null===m||void 0===m?void 0:m.id)===J,onClick:()=>{Y((0,k.X4)({url:"user/".concat(d),id:"user_edit",name:q("edit.user")})),t("/user/".concat(d),{state:"user"})},children:q("edit")})}),(0,M.jsxs)(s.A,{gutter:24,children:[(0,M.jsx)(u.A,{span:16,children:(0,M.jsxs)(v.A,{title:"".concat(null===m||void 0===m?void 0:m.firstname," ").concat((null===m||void 0===m?void 0:m.lastname)||""," #").concat(null===m||void 0===m?void 0:m.id),children:[(0,M.jsx)(p.A,{src:(0,_.A)(null===m||void 0===m?void 0:m.img),alt:null===m||void 0===m?void 0:m.firstname,width:100,height:100,style:{borderRadius:"10px",objectFit:"cover"}}),(0,M.jsxs)(h.A,{column:2,children:[(0,M.jsx)(h.A.Item,{label:q("registration.date"),children:g()(null===m||void 0===m?void 0:m.registered_at).format("YYYY-MM-DD HH:mm")}),(0,M.jsx)(h.A.Item,{label:q("status"),children:(0,M.jsx)(i.A,{color:null!==m&&void 0!==m&&m.active?"cyan":"red",children:null!==m&&void 0!==m&&m.active?q("active"):q("inactive")})}),(0,M.jsx)(h.A.Item,{label:q("birthday"),children:g()(null===m||void 0===m?void 0:m.birthday).format("YYYY-MM-DD")}),(0,M.jsx)(h.A.Item,{label:q("email"),children:$?(0,E.A)(null===m||void 0===m?void 0:m.email):null===m||void 0===m?void 0:m.email}),(0,M.jsx)(h.A.Item,{label:q("gender"),children:null===m||void 0===m?void 0:m.gender}),(0,M.jsx)(h.A.Item,{label:q("role"),children:null===m||void 0===m?void 0:m.role}),(0,M.jsx)(h.A.Item,{label:q("wallet"),children:(0,f.A)(null===m||void 0===m||null===(e=m.wallet)||void 0===e?void 0:e.price,null===Z||void 0===Z?void 0:Z.symbol,null===Z||void 0===Z?void 0:Z.position)}),(0,M.jsx)(h.A.Item,{label:q("phone"),children:null===m||void 0===m?void 0:m.phone})]})]})}),(0,M.jsxs)(u.A,{span:8,children:[(0,M.jsx)(v.A,{title:q("successfull.orders"),children:(0,M.jsxs)(h.A,{column:1,children:[(0,M.jsx)(h.A.Item,{label:q("delivered.orders.count"),children:(0,M.jsx)(x.A,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===T||void 0===T?void 0:T.delivered_orders_count)||0})}),(0,M.jsx)(h.A.Item,{label:q("spent.since.registration"),children:(0,M.jsx)(x.A,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,f.A)(null===T||void 0===T?void 0:T.total_delivered_price,null===Z||void 0===Z?void 0:Z.symbol,null===Z||void 0===Z?void 0:Z.position)})})]})}),(null===m||void 0===m?void 0:m.shop)&&(0,M.jsx)(v.A,{title:"".concat(q("shop.info")," #").concat(null===m||void 0===m?void 0:m.shop.id),children:(0,M.jsxs)(h.A,{column:2,children:[(0,M.jsx)(h.A.Item,{label:q("name"),children:null===m||void 0===m?void 0:m.shop.translation.title}),(0,M.jsx)(h.A.Item,{label:q("phone"),children:null===m||void 0===m?void 0:m.shop.phone}),(0,M.jsx)(h.A.Item,{label:q("shop.type"),children:null===m||void 0===m?void 0:m.shop.type})]})})]}),(0,M.jsxs)(u.A,{span:24,children:[(0,M.jsx)(v.A,{title:q("orders"),children:(0,M.jsx)(n.A,{expandable:{expandedRowRender:e=>{const d=[{title:q("product"),dataIndex:"product",render:(e,d)=>{var t,o,n,a;return(0,M.jsx)("div",{className:"text-hover",onClick:()=>{var e,t;return V(null===(e=d.stock)||void 0===e||null===(t=e.product)||void 0===t?void 0:t.uuid)},children:(0,M.jsxs)(l.A,{wrap:!0,children:[null===(t=d.stock)||void 0===t||null===(o=t.product)||void 0===o||null===(n=o.translation)||void 0===n?void 0:n.title,null===(a=d.addons)||void 0===a?void 0:a.map((e=>{var d,t,l;return(0,M.jsxs)(i.A,{children:[null===e||void 0===e||null===(d=e.stock)||void 0===d||null===(t=d.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title," x ",e.quantity]},e.id)}))]})})},key:"product"},{title:q("quantity"),dataIndex:"quantity",key:"quantity"},{title:q("total.price"),dataIndex:"total_price",render:e=>(0,f.A)(e,null===Z||void 0===Z?void 0:Z.symbol,null===Z||void 0===Z?void 0:Z.position),key:"total_price"},{title:q("discount"),dataIndex:"discount",key:"discount"}];return(0,M.jsxs)(l.A,{direction:"vertical",className:"w-100",children:[(0,M.jsx)(o.A.Text,{children:q("ordered.products")}),(0,M.jsx)(n.A,{scroll:{x:!0},columns:d,dataSource:e.details,pagination:!1})]})},defaultExpandedRowKeys:["0"]},dataSource:F,columns:[{title:"ID",dataIndex:"id",key:"id",render:e=>(0,M.jsxs)("div",{onClick:()=>(e=>{Y((0,k.X4)({url:"/order/details/".concat(e),id:"order.details",name:q("order.details")})),t("/order/details/".concat(e))})(e),className:"text-hover",children:["#",e]})},{title:q("shop"),dataIndex:"shop",key:"shop",render:e=>{var d;return(0,M.jsx)("div",{className:"text-hover",onClick:()=>{return d=e.uuid,Y((0,k.X4)({url:"/shop/".concat(d),id:"edit.shop",name:q("edit.shop")})),void t("/shop/".concat(d));var d},children:null===e||void 0===e||null===(d=e.translation)||void 0===d?void 0:d.title})}},{title:q("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",render:e=>"".concat(e||0," ").concat(q(e&&e<2?"products":"product"))},{title:q("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,f.A)(e,null===Z||void 0===Z?void 0:Z.symbol,null===Z||void 0===Z?void 0:Z.position)},{title:q("delivery.date.&.time"),dataIndex:"delivery_date",key:"delivery_date",render:(e,d)=>"".concat(d.delivery_date," ").concat((null===d||void 0===d?void 0:d.delivery_time)||"")},{title:q("status"),dataIndex:"status",key:"status",render:e=>(0,M.jsx)(i.A,{children:e})},{title:q("delivery.address"),dataIndex:"address",key:"address",render:e=>null===e||void 0===e?void 0:e.address}],loading:K,pagination:{pageSize:O.perPage,page:O.page,total:H.last_page*H.per_page,defaultCurrent:O.page},rowKey:e=>e.id,onChange:function(e,d,t){const{pageSize:l,current:i}=e,{field:o,order:n}=t,a=(0,C.A)(n);Y((0,k.Ok)({activeMenu:B,data:{...B.data,perPage:l,page:i,column:o,sort:a}}))}})}),(0,M.jsx)(z,{id:d}),(0,M.jsx)(P,{id:d})]})]})]})}}}]);