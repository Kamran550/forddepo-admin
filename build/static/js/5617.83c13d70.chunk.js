"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5617],{15617:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var a=l(9950),i=l(28429),n=l(49348),s=l(59233),o=l(23263),c=l(90650),d=l(91854),u=l(74623),r=l(5386),v=l(5302),p=l(70030),h=l(71999),b=l(31281),m=l(82035),f=l(44414);const g=()=>{const{t:e}=(0,p.B)(),{activeMenu:t}=(0,d.d4)((e=>e.menu),d.bN),l=(0,d.wA)(),[g]=s.A.useForm(),x=(0,i.Zp)(),{id:A}=(0,i.g)(),[k,j]=(0,a.useState)(!1),{languages:_}=(0,d.d4)((e=>e.formLang),d.bN);function y(e){if(!e)return{};const{translations:t}=e,l=_.map((e=>{var l,a,i;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,["description[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description,["button_text[".concat(e.locale,"]")]:null===(i=t.find((t=>t.locale===e.locale)))||void 0===i?void 0:i.button_text}}));return Object.assign({},...l)}return(0,a.useEffect)((()=>{var e;null!==t&&void 0!==t&&t.refetch&&(e=A,j(!0),v.A.getById(e).then((e=>{var a;let i=e.data;const n={...i,img:(s=i.galleries,s.map((e=>({uid:e.id,name:e.path,url:e.path})))),shops:null===i||void 0===i||null===(a=i.shops)||void 0===a?void 0:a.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}})),...y(i)};var s;g.setFieldsValue(n),l((0,u.Ok)({activeMenu:t,data:n}))})).finally((()=>{l((0,u.km)(t)),j(!1)})))}),[null===t||void 0===t?void 0:t.refetch]),(0,f.jsx)(o.A,{title:e("edit.banner"),className:"h-100",extra:(0,f.jsx)(h.A,{}),children:k?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(c.A,{size:"large",className:"py-5"})}):(0,f.jsx)(m.A,{form:g,handleSubmit:(a,i)=>{var s;const o="banners",c={status:"published"},p={url:a.url,shops:null===a||void 0===a||null===(s=a.shops)||void 0===s?void 0:s.map((e=>e.value)),images:null===i||void 0===i?void 0:i.map((e=>e.name)),clickable:a.clickable,title:(0,b.A)(_,a,"title"),description:(0,b.A)(_,a,"description"),button_text:(0,b.A)(_,a,"button_text")};return v.A.update(A,p).then((()=>{n.oR.success(e("successfully.updated")),(0,d.vA)((()=>{l((0,u.EK)({...t,nextUrl:o})),l((0,r.s)(c))})),x("/".concat(o))}))}})})}}}]);