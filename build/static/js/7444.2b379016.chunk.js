"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7444],{17456:(e,l,i)=>{i.d(l,{A:()=>o});i(9950);const o=i.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},47992:(e,l,i)=>{i.d(l,{G:()=>r});var o=i(9950),t=i(95491),n=i.n(t),s=i(99674),a=i(90650),d=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:t,...r}=e;const[c,u]=(0,o.useState)(!1),[v,p]=(0,o.useState)([]),h=(0,o.useMemo)((()=>n()((e=>{p([]),u(!0),l(e).then((e=>{p(e),u(!1)}))}),i)),[l,i]);return(0,d.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),t&&t()},notFoundContent:c?(0,d.jsx)(a.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{h("")}})}},8168:(e,l,i)=>{function o(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}i.d(l,{A:()=>o})},53774:(e,l,i)=>{i.d(l,{A:()=>t});var o=i(83291);function t(){var e,l;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const s=null===(e=o.M.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,a=Number(i).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),d=t||(null===s||void 0===s?void 0:s.symbol)||"$";return"after"===(n||(null===s||void 0===s?void 0:s.position)||"before")?"".concat(a," ").concat(d):"".concat(d," ").concat(a)}},74704:(e,l,i)=>{i.d(l,{A:()=>n});i(9950);var o=i(23263),t=i(44414);function n(e){let{title:l="Orders",value:i=0,color:n="grey",onClick:s}=e;return(0,t.jsx)(o.A,{className:"statistics-card",hoverable:!!s,onClick:s,children:(0,t.jsxs)("div",{className:"card-wrapper",children:[(0,t.jsx)("div",{className:"space"}),(0,t.jsx)("div",{className:"content",children:(0,t.jsx)("h1",{className:"number",children:i})}),(0,t.jsx)("span",{className:"highlighter ".concat(n)}),l&&(0,t.jsx)("h4",{className:"title",children:l})]})})}},57444:(e,l,i)=>{i.r(l),i.d(l,{default:()=>R});var o=i(9950),t=i(5713),n=i(23263),s=i(80737),a=i(48538),d=i(87094),r=i(41988),c=i(12203),u=i(28429),v=i(91854),p=i(74623),h=i(70030),m=i(88986),x=i(8168),y=i(53774),f=i(47992),A=i(53271),_=i(49348),j=i(59051),g=i.n(j),b=i(58547),w=i(43430),k=i(98987),C=i(20380),Y=i(90650),N=i(17456),S=i(54826),M=i(70283),D=i(68873),I=i(17491),z=i(50384),O=i(44414);function P(e){let{open:l,onCancel:i,onConfirm:t,isPaying:s}=e;const{t:c}=(0,h.B)(),[u,v]=(0,o.useState)({}),[p,m]=(0,o.useState)(null),[x,y]=(0,o.useState)(!1);(0,o.useEffect)((()=>{!async function(){y(!0),I.A.getAll().then((e=>{let{data:l}=e;return m(l.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))})).finally((()=>{y(!1)}))}()}),[]);const f=e=>{switch(e){case"wallet":return(0,O.jsx)(D.c8K,{size:80});case"paypal":return(0,O.jsx)(S.SnG,{size:80});case"stripe":return(0,O.jsx)(M.kDV,{size:80});case"razorpay":return(0,O.jsx)(M.NVb,{size:80});case"paystack":return(0,O.jsx)("img",{src:N.A,alt:"img",width:"80",height:"80"});default:return(0,O.jsx)(z.Nxq,{size:80})}};return(0,O.jsx)(C.A,{visible:l,title:c("pay.to.partner"),onCancel:i,footer:[(0,O.jsx)(a.A,{type:"primary",disabled:x||!u.value,loading:s,onClick:()=>{u.value?t(u.value):_.oR.warning(c("please.select.payment.type"))},children:c("confirm")},"save-btn"),(0,O.jsx)(a.A,{type:"default",onClick:i,children:c("cancel")},"cancel-btn")],children:(0,O.jsx)(Y.A,{spinning:x,children:(0,O.jsx)(d.A,{gutter:12,children:null===p||void 0===p?void 0:p.map(((e,l)=>"cash"===e.label||"wallet"===e.label?(0,O.jsx)(r.A,{span:12,children:(0,O.jsxs)(n.A,{style:{display:"flex",justifyContent:"center"},className:"payment-card ".concat((null===u||void 0===u?void 0:u.label)===e.label?"active":""),onClick:()=>{v(e)},children:[(0,O.jsx)("div",{className:"payment-icon",children:f(null===e||void 0===e?void 0:e.label)}),(0,O.jsx)("div",{className:"font-weight-bold mt-2 text-center",children:c(null===e||void 0===e?void 0:e.label)})]})},l):null))})})})}var F=i(74704);const{RangePicker:G}=t.A;function R(){var e,l,i,t,j,C,Y;const{type:N}=(0,u.g)(),S=(0,v.wA)(),M=(0,u.Zp)(),{t:D}=(0,h.B)(),{defaultCurrency:I}=(0,v.d4)((e=>e.currency),v.bN),[z,R]=(0,o.useState)(!1),E=[{title:D("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0,render:e=>(0,O.jsxs)("span",{className:"text-hover",onClick:()=>(e=>{S((0,p.X4)({url:"order/details/".concat(e),id:"order_details",name:D("order.details")})),M("/order/details/".concat(e))})(e),children:["#",e]})},{title:D(N),is_show:!0,dataIndex:"user",key:"user",render:(e,l)=>{var i;const o="seller"===N?null===l||void 0===l||null===(i=l.shop)||void 0===i?void 0:i.seller:l.deliveryman;return(0,O.jsxs)("div",{children:[null===o||void 0===o?void 0:o.firstname," ",(null===o||void 0===o?void 0:o.lastname)||""]})}},{title:D("order.total_price"),is_show:!0,dataIndex:"total_price",key:"total_price",render:(e,l)=>{var i,o;const t=null===(i=l.transaction)||void 0===i?void 0:i.status;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("span",{children:(0,y.A)(e,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{className:"progress"===t?"text-primary":"paid"===t?"text-success":"rejected"===t?"text-danger":"text-info",children:null===(o=l.transaction)||void 0===o?void 0:o.status})]})}},..."seller"===N?[{title:D("coupon.price"),is_show:!0,dataIndex:"coupon_sum_price",key:"coupon_sum_price",render:e=>(0,y.A)(e,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)}]:[],..."seller"===N?[{title:D("total.cashback"),is_show:!0,dataIndex:"point_history_sum_price",key:"point_history_sum_price",render:e=>(0,y.A)(e,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)}]:[],{title:D("delivery.fee"),is_show:!0,dataIndex:"delivery_fee",key:"delivery_fee",render:e=>(0,y.A)(e,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)},..."seller"===N?[{title:D("service.fee"),is_show:!0,dataIndex:"service_fee",key:"service_fee",render:(e,l)=>(0,y.A)((l.service_fee||0)+(l.commission_fee||0),null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)}]:[],..."seller"===N?[{title:D("seller.fee"),is_show:!0,dataIndex:"seller_fee",key:"seller_fee",render:e=>(0,y.A)(e,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)}]:[],{title:D("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return D(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}}],{activeMenu:K}=(0,v.d4)((e=>e.menu),v.bN),[V,B]=(0,o.useState)(null),[T,$]=(0,o.useState)(!1),[q,X]=(0,o.useState)(g()().subtract(1,"month"),g()()),{list:Z,loading:H,params:J,meta:L}=(0,v.d4)((e=>e.paymentToPartners),v.bN),Q=K.data,U={search:null===Q||void 0===Q?void 0:Q.search,sort:null===Q||void 0===Q?void 0:Q.sort,column:null===Q||void 0===Q?void 0:Q.column,perPage:null===Q||void 0===Q?void 0:Q.perPage,page:null===Q||void 0===Q?void 0:Q.page,user_id:null===Q||void 0===Q?void 0:Q.user_id,shop_id:null!==(null===(e=K.data)||void 0===e?void 0:e.shop_id)?null===(l=K.data)||void 0===l?void 0:l.shop_id:null,date_from:Array.isArray(q)?null===(i=q[0])||void 0===i?void 0:i.format("YYYY-MM-DD"):g()().subtract(1,"month").format("YYYY-MM-DD"),date_to:Array.isArray(q)?null===(t=q[1])||void 0===t?void 0:t.format("YYYY-MM-DD"):g()().format("YYYY-MM-DD"),type:N};(0,m.A)((()=>{S((0,w.FA)(U))}),[Q,q,N]);const W=(e,l)=>{S((0,p.Ok)({activeMenu:K,data:{...Q,[l]:e}}))};(0,o.useEffect)((()=>{null!==K&&void 0!==K&&K.refetch&&(S((0,w.FA)(U)),S((0,p.km)(K)))}),[null===K||void 0===K?void 0:K.refetch]);const ee={selectedRowKeys:V,onChange:e=>{B(e)}};return(0,o.useEffect)((()=>()=>{S((0,p.Ok)({activeMenu:K,data:{}}))}),[]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(n.A,{children:(0,O.jsxs)("div",{className:"flex justify-content-space-between",children:[(0,O.jsxs)(s.A,{wrap:!0,className:"order-filter",style:{flex:1,width:"100%"},children:[(0,O.jsx)(f.G,{placeholder:D("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return b.A.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}}))}))},style:{width:"100%"},onSelect:e=>W(e.value,"shop_id"),onDeselect:()=>W(null,"shop_id"),allowClear:!0,value:null===Q||void 0===Q?void 0:Q.shop_id}),(0,O.jsx)(f.G,{placeholder:D("select.user"),fetchOptions:async function(e){const l={search:e,perPage:10,role:N};return A.A.search(l).then((e=>{let{data:l}=e;return l.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:e.id})))}))},onSelect:e=>W(e.value,"user_id"),onDeselect:()=>W(null,"user_id"),style:{width:"100%"},value:null===Q||void 0===Q?void 0:Q.user_id}),(0,O.jsx)(G,{value:q,onChange:e=>{W((l=>{var i,o;return{...l,date_from:null===e||void 0===e||null===(i=e[0])||void 0===i?void 0:i.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(o=e[1])||void 0===o?void 0:o.format("YYYY-MM-DD")}})),X(e)},disabledDate:e=>e&&e>g()().endOf("day"),style:{width:"100%"}})]}),(0,O.jsx)(a.A,{type:"primary",disabled:!V||0===V.length,onClick:()=>R(!0),children:D("pay")})]})}),(0,O.jsx)(n.A,{children:(0,O.jsxs)(d.A,{gutter:16,className:"mt-3",children:[(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("commission.fee"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_commission_fee,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"purple"})}),(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("coupon"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_coupon,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"red"})}),(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("delivery.fee"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_delivery_fee,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"green"})}),(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("point.history"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_point_history,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"purple"})}),(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("price"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_price,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"red"})}),(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("seller.fee"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_seller_fee,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"purple"})}),(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("service.fee"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_service_fee,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"red"})}),(0,O.jsx)(r.A,{flex:"0 0 25%",children:(0,O.jsx)(F.A,{title:D("tax"),value:(0,y.A)(null===Z||void 0===Z?void 0:Z.total_tax,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position),color:"green"})})]})}),(0,O.jsx)(n.A,{children:(0,O.jsx)(c.A,{scroll:{x:!0},rowSelection:ee,columns:null===E||void 0===E?void 0:E.filter((e=>e.is_show)),dataSource:null===Z||void 0===Z?void 0:Z.data,loading:H,pagination:{pageSize:J.perPage,page:(null===(j=K.data)||void 0===j?void 0:j.page)||1,total:null===L||void 0===L?void 0:L.total,defaultCurrent:null===(C=K.data)||void 0===C?void 0:C.page,current:null===(Y=K.data)||void 0===Y?void 0:Y.page},rowKey:e=>e.id,onChange:function(e,l,i){const{pageSize:o,current:t}=e,{field:n,order:s}=i,a=(0,x.A)(s);S((0,p.Ok)({activeMenu:K,data:{...Q,perPage:o,page:t,column:n,sort:a}}))}})}),z&&(0,O.jsx)(P,{open:z,onCancel:()=>{R(!1),B(null)},onConfirm:e=>(e=>{$(!0);const l={data:V,type:N,payment_id:e};k.A.pay(l).then((()=>{_.oR.success(D("successfully.payed")),S((0,w.FA)(U))})).finally((()=>{B(null),$(!1),R(!1)}))})(e),isPaying:T})]})}}}]);