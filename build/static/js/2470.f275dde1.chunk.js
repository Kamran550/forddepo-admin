"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2470],{92470:(t,e,a)=>{a.r(e),a.d(e,{default:()=>k});var i=a(9950),l=a(28429),n=a(49348),s=a(86366),d=a(59233),c=a(23263),o=a(91854),u=a(74623),r=a(70030),v=a(71999),g=a(96210),p=a(5742),h=a(63620),m=a(44414);const{Step:_}=s.A,k=()=>{var t,e,a,k,x,S,b,f,A;const{t:j}=(0,r.B)(),{activeMenu:y}=(0,o.d4)((t=>t.menu),o.bN),w=(0,o.wA)(),[C]=d.A.useForm(),F=(0,l.Zp)(),E=t=>({name:t,url:h.sE+t}),[q,B]=(0,i.useState)(null!==(t=y.data)&&void 0!==t&&null!==(e=t.galleries)&&void 0!==e&&e[0]?[E(null===(a=y.data)||void 0===a||null===(k=a.galleries)||void 0===k?void 0:k[0].path)]:[]),[M,N]=(0,i.useState)(null!==(x=y.data)&&void 0!==x&&null!==(S=x.galleries)&&void 0!==S&&S[1]?[E(null===(b=y.data)||void 0===b||null===(f=b.galleries)||void 0===f?void 0:f[1].path)]:[]),V=[...q,...M],[I,K]=(0,i.useState)((null===(A=y.data)||void 0===A?void 0:A.step)||0),O=()=>{K(I+1)},R=()=>{K(I-1)},[U,Z]=(0,i.useState)(!1);(0,i.useEffect)((()=>()=>{const t=C.getFieldsValue(!0);w((0,u.Ok)({activeMenu:y,data:t}))}),[]);return(0,m.jsx)(c.A,{title:j("add.recepe"),extra:(0,m.jsx)(v.A,{}),children:(0,m.jsxs)(d.A,{layout:"vertical",onFinish:t=>{var e;C.validateFields();const a={...t,images:V.map((t=>t.name)),category_id:t.category_id.value,shop_id:t.shop_id.value,active_time:t.active_time.toString(),total_time:t.total_time.toString(),nutrition:t.nutrition.map((t=>({...t,percentage:String(t.percentage),weight:String(t.weight)}))),stocks:null===(e=t.stocks)||void 0===e?void 0:e.map((t=>({min_quantity:t.min_quantity,stock_id:t.stock_id.value})))};Z(!0);const i="catalog/recept";p.A.create(a).then((()=>{n.oR.success(j("successfully.created")),F("/".concat(i)),w((0,u.EK)({...y,nextUrl:i}))})).finally((()=>Z(!1)))},form:C,initialValues:{active:!0,...y.data},children:[(0,m.jsx)(s.A,{current:I,children:g.C.map((t=>(0,m.jsx)(_,{title:j(t.title)},t.title)))}),g.C.map((t=>{const e=t.content;return(0,m.jsx)("div",{className:"steps-content ".concat(t.step!==I+1&&"hidden"),children:(0,m.jsx)(e,{next:O,prev:R,loading:U,image:q,setImage:B,back:M,setBack:N})},t.title)}))]})})}}}]);