"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4213],{8297:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(9950),n=a(55902),l=a(41397),s=a(60767),i=a(44414);function o(e){let{handleChange:t,defaultValue:a,resetSearch:o,...c}=e;const[d,u]=(0,r.useState)(a),m=(0,r.useMemo)((()=>(0,l.debounce)((e=>{t(e)}),800)),[t]);return(0,r.useEffect)((()=>{u(a)}),[o,a]),(0,i.jsx)(n.A,{value:d,onChange:e=>{u(e.target.value),m(e.target.value)},prefix:(0,i.jsx)(s.A,{}),...c})}},81061:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(82371),n=a(7272);const l={getAll:e=>r.A.get("dashboard/admin/translations/paginate",{params:e}),delete:e=>r.A.delete("dashboard/admin/translations/".concat(e)),getById:(e,t)=>r.A.get("dashboard/admin/translations/".concat(e),{params:t}),create:e=>r.A.post("dashboard/admin/translations",{},{params:e}),update:(e,t)=>r.A.put("dashboard/admin/translations/".concat(e),{},{params:t}),export:e=>r.A.get("dashboard/admin/translations/export",{params:e}),import:e=>n.A.post("dashboard/admin/translations/import",e)}},44213:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var r=a(9950),n=a(59233),l=a(55902),s=a(23263),i=a(80737),o=a(99674),c=a(48538),d=a(12203),u=a(81061),m=a(49348),h=a(24513),p=a(53387),x=a(20380),v=a(87094),g=a(41988),A=a(70030),j=a(44414);function f(e){let{visible:t,setVisible:a,languages:s,refetch:i}=e;const{t:d}=(0,A.B)(),[h,p]=(0,r.useState)(!1),[f]=n.A.useForm(),b=()=>{a(!1)};return(0,j.jsx)(x.A,{visible:t,title:d("add.translation"),onCancel:b,footer:[(0,j.jsx)(c.A,{type:"primary",form:"translation-form",htmlType:"submit",loading:h,children:d("create")},"create-translation"),(0,j.jsx)(c.A,{type:"default",onClick:b,children:d("cancel")},"create-translation-cancel")],children:(0,j.jsx)(n.A,{id:"translation-form",name:"translation",layout:"vertical",onFinish:e=>{p(!0),u.A.create(e).then((()=>{m.oR.success(d("successfully.created")),a(!1),i()})).finally((()=>p(!1)))},form:f,initialValues:{group:"web"},children:(0,j.jsxs)(v.A,{gutter:12,children:[(0,j.jsx)(g.A,{span:24,children:(0,j.jsx)(n.A.Item,{label:d("name"),name:"key",rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(d("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(d("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(d("required")))}],children:(0,j.jsx)(l.A,{})})}),(0,j.jsx)(g.A,{span:24,children:(0,j.jsx)(n.A.Item,{label:d("group"),name:"group",rules:[{required:!0,message:""}],children:(0,j.jsxs)(o.A,{children:[(0,j.jsx)(o.A.Option,{value:"web",children:d("web")}),(0,j.jsx)(o.A.Option,{value:"mobile",children:d("mobile")}),(0,j.jsx)(o.A.Option,{value:"errors",children:d("errors")})]})})}),s.map(((e,t)=>(0,j.jsx)(g.A,{span:24,children:(0,j.jsx)(n.A.Item,{label:"".concat(d("translation")," (").concat(e.locale,")"),name:"value[".concat(e.locale,"]"),rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(d("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(d("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(d("required")))}],children:(0,j.jsx)(l.A,{})})},t)))]})})})}var b=a(91854),w=a(8297),y=a(38525),S=a(74623),k=a(28429),C=a(63620);const I=r.createContext(null),P=e=>{let{index:t,...a}=e;const[r]=n.A.useForm();return(0,j.jsx)(n.A,{form:r,component:!1,children:(0,j.jsx)(I.Provider,{value:r,children:(0,j.jsx)("tr",{...a})})})},E=e=>{let{title:t,editable:a,children:s,dataIndex:i,record:o,handleSave:c,...d}=e;const{t:u}=(0,A.B)(),[m,p]=(0,r.useState)(!1),x=(0,r.useRef)(null),v=(0,r.useContext)(I);(0,r.useEffect)((()=>{m&&x.current.focus()}),[m]);const g=()=>{p(!m),v.setFieldsValue({[i]:o[i]})},f=async()=>{try{const e=await v.validateFields();g(),c({...o,...e,dataIndex:i})}catch(e){console.log("Save failed:",e)}};let b=s;return a&&(b=m?(0,j.jsx)(n.A.Item,{style:{margin:0},name:i,rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(u("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(u("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,j.jsx)(l.A,{ref:x,onPressEnter:f,onBlur:f})}):(0,j.jsxs)("div",{className:"editable-cell-value-wrap cursor-pointer d-flex justify-content-between align-items-center",style:{paddingRight:24},onClick:g,children:[(0,j.jsx)("div",{className:"w-100",children:s}),(0,j.jsx)(h.A,{})]})),(0,j.jsx)("td",{...d,children:b})};function O(){const{t:e}=(0,A.B)(),t=(0,b.wA)(),a=(0,k.Zp)(),[n,l]=(0,r.useState)([]),[h,x]=(0,r.useState)(10),[v,g]=(0,r.useState)(1),[I,O]=(0,r.useState)(0),[R,V]=(0,r.useState)(!1),[B,z]=(0,r.useState)(null),[F,N]=(0,r.useState)(null),[q,M]=(0,r.useState)(null),[_,H]=(0,r.useState)(!1),[W,K]=(0,r.useState)(0),{languages:L}=(0,b.d4)((e=>e.formLang),b.bN),[T,X]=(0,r.useState)(""),[Z,D]=(0,r.useState)(""),[G,J]=(0,r.useState)(!1),Q=(0,r.useMemo)((()=>[{title:e("name"),dataIndex:"key",sorter:(e,t,a)=>U(a,"key"),width:250,fixed:"left"},{title:e("group"),dataIndex:"group",sorter:(e,t,a)=>U(a,"group"),width:150,fixed:"left"},...L.filter((e=>!T||e.locale===T)).map((e=>({title:e.title,dataIndex:"value[".concat(e.locale,"]"),editable:!0,width:300})))]),[L,T]);function U(e,t){let a;switch(e){case"ascend":a="asc";break;case"descend":a="desc"}N(a),M(t)}function Y(){V(!0);const e={perPage:h,skip:W,group:B,sort:F,column:q,search:Z};u.A.getAll(e).then((e=>{let{data:t}=e;const a=Object.entries(t.translations).map((e=>({key:e[0],group:e[1][0].group,...Object.assign({},...L.map((t=>{var a;return{["value[".concat(t.locale,"]")]:null===(a=e[1].find((e=>e.locale===t.locale)))||void 0===a?void 0:a.value}})))})));l(a),O(t.total)})).finally((()=>V(!1)))}(0,r.useEffect)((()=>{Y()}),[h,B,F,q,W,Z]);const $=e=>{const{dataIndex:t,key:a}=e,r=[...n],s=r.findIndex((t=>e.key===t.key)),i=r[s];if(i[t]===e[t])return;r.splice(s,1,{...i,...e}),l(r);!function(e,t){u.A.update(e,t).then((e=>m.oR.success(e.message)))}(a,{...e,value:void 0,dataIndex:void 0,key:void 0})};const ee={body:{row:P,cell:E}},te=Q.map((e=>e.editable?{...e,onCell:t=>({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,fixed:e.fixed,handleSave:$})}:e));return(0,j.jsxs)(s.A,{extra:(0,j.jsxs)(i.A,{wrap:!0,children:[(0,j.jsx)(w.A,{placeholder:e("search"),handleChange:e=>D(e)}),(0,j.jsxs)(o.A,{style:{minWidth:150},value:T,onChange:e=>X(e),placeholder:e("select.language"),children:[(0,j.jsx)(o.A.Option,{value:"",children:e("all")}),L.map((e=>(0,j.jsx)(o.A.Option,{value:e.locale,children:e.title},e.locale)))]}),(0,j.jsxs)(o.A,{style:{minWidth:150},value:B,onChange:e=>z(e),placeholder:e("select.group"),children:[(0,j.jsx)(o.A.Option,{value:"",children:e("all")}),(0,j.jsx)(o.A.Option,{value:"web",children:e("web")}),(0,j.jsx)(o.A.Option,{value:"mobile",children:e("mobile")}),(0,j.jsx)(o.A.Option,{value:"errors",children:e("errors")})]}),(0,j.jsxs)(c.A,{onClick:()=>{J(!0),u.A.export().then((e=>{window.location.href=C.bb+e.data.file_name})).finally((()=>J(!1)))},loading:G,children:[(0,j.jsx)(y.I8R,{className:"mr-2"}),e("export")]}),(0,j.jsxs)(c.A,{onClick:()=>{t((0,S.X4)({id:"translation-import",url:"settings/translations/import",name:e("translation.import")})),a("import")},children:[(0,j.jsx)(y.I8R,{className:"mr-2"}),e("import")]}),(0,j.jsx)(c.A,{icon:(0,j.jsx)(p.A,{}),type:"primary",onClick:()=>H(!0),children:e("add.translation")})]}),children:[(0,j.jsx)(d.A,{components:ee,columns:te,dataSource:n,pagination:{pageSize:h,page:v,total:I},rowKey:e=>e.id,onChange:e=>{const{pageSize:t,current:a}=e,r=(a-1)*t;x(t),g(a),K(r)},loading:R,scroll:{x:1500}}),_&&(0,j.jsx)(f,{visible:_,setVisible:H,languages:L,refetch:Y})]})}},53387:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(89379),n=a(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=a(25085),i=function(e,t){return n.createElement(s.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:l}))};const o=n.forwardRef(i)}}]);