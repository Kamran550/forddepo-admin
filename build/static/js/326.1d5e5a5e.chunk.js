"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[326],{71999:(e,t,l)=>{l.d(t,{A:()=>c});var n=l(9950),o=l(17811),a=l(91854),i=l(82406),s=l(12437),d=l(44414);const c=()=>{const e=(0,a.wA)(),{languages:t,defaultLang:l}=(0,a.d4)((e=>e.formLang),a.bN);(0,n.useEffect)((()=>{s.A.getAllActive().then((t=>{let{data:l}=t;e((0,i.Nn)(l)),e((0,i.Qq)(l.find((e=>!(null===e||void 0===e||!e.default))).locale))}))}),[]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(o.Ay.Group,{value:l,onChange:t=>{let{target:{value:l}}=t;e((0,i.Qq)(l))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,d.jsx)(o.Ay.Button,{value:e.locale,children:e.title},e.id)))})})}},78498:(e,t,l)=>{l.d(t,{A:()=>h});var n=l(9950),o=l(97239);const a=l.p+"static/media/pin.0e41858db80c699cd8a2.png";var i=l(96011),s=l.n(i),d=l(63620);async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.CJ,l={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:t};return s().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{var t;let{data:l}=e;return null===(t=l.results[0])||void 0===t?void 0:t.formatted_address})).catch((e=>"not found"))}var r=l(39174),u=l(49348),g=l(70030),v=l(6566),m=l(44414);const f=(0,v.A)();const h=(0,o.GoogleApiWrapper)({apiKey:f,libraries:["places","geometry"]})((function(e){var t,l;const[i,s]=(0,n.useState)(),{t:d}=(0,g.B)(),v=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};s(t)}),(function(e){u.oR.warning(d("turn.on.gps"))}))};(0,n.useEffect)((()=>{v()}),[]);const h=[{lat:Number(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.lat)||0,lng:Number(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.lng)||0}];for(var p=new e.google.maps.LatLngBounds,b=0;b<h.length;b++)p.extend(h[b]);return(0,m.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,m.jsx)("button",{className:"map-button",type:"button",onClick:()=>{v(),i&&(async t=>{const l={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng};e.setLocation(l);const n=await c(l,f);e.setAddress(n)})(i)},children:(0,m.jsx)(r.uFi,{})}),(0,m.jsx)(o.Map,{cursor:"pointer",onClick:async(t,l,n)=>{const{latLng:o}=n,a={lat:o.lat(),lng:o.lng()};e.setLocation(a);const i=await c(a,f);e.setAddress(i)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,m.jsx)(o.Marker,{position:e.location,icon:{url:a,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},29597:(e,t,l)=>{l.d(t,{A:()=>n});l(63620);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},6566:(e,t,l)=>{l.d(t,{A:()=>a});var n=l(83291),o=l(63620);const a=()=>{var e,t;const{google_map_key:l}=null===(e=n.M.getState())||void 0===e||null===(t=e.globalSettings)||void 0===t?void 0:t.settings;return l||o.CJ}},31281:(e,t,l)=>{function n(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const n=null===e||void 0===e?void 0:e.map((e=>({[null===e||void 0===e?void 0:e.locale]:t["".concat(l,"[").concat(null===e||void 0===e?void 0:e.locale,"]")]?t["".concat(l,"[").concat(null===e||void 0===e?void 0:e.locale,"]")]:void 0})));return Object.assign({},...n)}l.d(t,{A:()=>n})},14713:(e,t,l)=>{l.r(t),l.d(t,{default:()=>p});var n=l(9950),o=l(28429),a=l(49348),i=l(59233),s=l(23263),d=l(91854),c=l(74623),r=l(70030),u=l(71999),g=l(31281),v=l(58962),m=l(37332),f=l(91675),h=l(44414);const p=()=>{const{t:e}=(0,r.B)(),{activeMenu:t}=(0,d.d4)((e=>e.menu),d.bN),l=(0,d.wA)(),[p]=i.A.useForm(),b=(0,o.Zp)(),{id:A}=(0,o.g)(),[x,j]=(0,n.useState)(!1),{languages:y}=(0,d.d4)((e=>e.formLang),d.bN);function N(e){if(!e)return{};const{translations:t}=e,l=y.map((e=>{var l;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title}}));return Object.assign({},...l)}(0,n.useEffect)((()=>()=>{const e=p.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),l((0,c.Ok)({activeMenu:t,data:e}))}),[]);return(0,n.useEffect)((()=>{t.refetch&&(e=>{j(!0),v.A.getById(e).then((e=>{var n;let o=e.data;const a={...o,mapCoordinates:{lat:Number(null===o||void 0===o?void 0:o.location.latitude),lng:Number(null===o||void 0===o?void 0:o.location.longitude)},...N(o),address:null===(n=o.address)||void 0===n?void 0:n.address};l((0,c.Ok)({activeMenu:t,data:a})),p.setFieldsValue({...a})})).finally((()=>{l((0,c.km)(t)),j(!1)}))})(A)}),[t.refetch]),(0,h.jsx)(s.A,{loading:x,title:e("edit.branch"),className:"h-100",extra:(0,h.jsx)(u.A,{}),children:(0,h.jsx)(f.A,{form:p,handleSubmit:n=>{const o={title:(0,g.A)(y,n,"title"),address:{address:n.address,office:null,house:null,floor:null},location:{longitude:n.location.lng,latitude:n.location.lat}},i="seller/branch";return v.A.update(A,o).then((()=>{a.oR.success(e("successfully.updated")),(0,d.vA)((()=>{l((0,c.EK)({...t,nextUrl:i})),l((0,m.D)({}))})),b("/".concat(i))}))}})})}},91675:(e,t,l)=>{l.d(t,{A:()=>h});var n=l(9950),o=l(59233),a=l(87094),i=l(41988),s=l(55902),d=l(48538),c=l(78498),r=l(70030),u=l(91854),g=l(29597),v=l(56713),m=l(63620),f=l(44414);function h(e){var t,l;let{form:h,handleSubmit:p}=e;const{t:b}=(0,r.B)(),{activeMenu:A}=(0,u.d4)((e=>e.menu),u.bN),{languages:x,defaultLang:j}=(0,u.d4)((e=>e.formLang),u.bN),{settings:y}=(0,u.d4)((e=>e.globalSettings),u.bN),{google_map_key:N}=(0,u.d4)((e=>e.globalSettings.settings),u.bN),{ref:S}=(0,v.usePlacesWidget)({apiKey:N||m.CJ,onPlaceSelected:e=>{const t={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};_(t),h.setFieldsValue({["address[".concat(j,"]")]:null===e||void 0===e?void 0:e.formatted_address})}}),[k,w]=(0,n.useState)(!1),[C,_]=(0,n.useState)(null!==(t=null===A||void 0===A||null===(l=A.data)||void 0===l?void 0:l.mapCoordinates)&&void 0!==t?t:(0,g.A)(y));return(0,f.jsxs)(o.A,{name:"branch-form",layout:"vertical",onFinish:e=>{w(!0);const t={...e,location:C};p(t).finally((()=>w(!1)))},form:h,initialValues:{...A.data},className:"d-flex flex-column h-100",children:[(0,f.jsxs)(a.A,{gutter:12,children:[(0,f.jsx)(i.A,{span:12,children:x.map(((e,t)=>(0,f.jsx)(o.A.Item,{label:b("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===j,message:b("required")}],hidden:e.locale!==j,children:(0,f.jsx)(s.A,{})},"title"+t)))}),(0,f.jsx)(i.A,{span:12,children:(0,f.jsx)(o.A.Item,{label:b("address"),name:"address",rules:[{required:!0,message:b("required")}],children:(0,f.jsx)("input",{className:"address-input",ref:S,placeholder:""})})}),(0,f.jsx)(i.A,{span:24,children:(0,f.jsx)(c.A,{location:C,setLocation:_,setAddress:e=>h.setFieldsValue({address:e})})})]}),(0,f.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,f.jsx)("div",{className:"pb-5",children:(0,f.jsx)(d.A,{type:"primary",htmlType:"submit",loading:k,children:b("submit")})})})]})}}}]);