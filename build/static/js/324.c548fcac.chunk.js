"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[324],{80905:(e,l,t)=>{t.d(l,{j:()=>r});var n=t(9950),a=t(95491),o=t.n(a),s=t(99674),u=t(90650),i=t(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,hasMore:a,refetchOnFocus:r=!1,...d}=e;const[c,v]=(0,n.useState)(!1),[h,p]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[b,j]=(0,n.useState)(null),[g,A]=(0,n.useState)(1),f=(0,n.useMemo)((()=>o()((e=>{p([]),j(e),v(!0),l({search:e}).then((e=>{p(e),A(2),v(!1)})).finally((()=>x(!1)))}),t)),[l,t,g]);return(0,i.jsxs)(s.A,{showSearch:!0,allowClear:!0,onPopupScroll:async e=>{const t=e.target;m||t.scrollTop+t.offsetHeight!==t.scrollHeight||a&&(x(!0),l({search:b,page:g}).then((e=>{A((e=>e+1)),p([...h,...e])})).finally((()=>x(!1))))},labelInValue:!0,filterOption:!1,onSearch:f,notFoundContent:c?(0,i.jsx)(u.A,{size:"small"}):"no results",onFocus:()=>{r?f(""):null!==h&&void 0!==h&&h.length||f("")},...d,children:[h.map(((e,l)=>(0,i.jsx)(s.A.Option,{value:e.value,children:e.label},l))),m&&(0,i.jsx)(s.A.Option,{children:(0,i.jsx)(u.A,{size:"small"})})]})}},20324:(e,l,t)=>{t.r(l),t.d(l,{default:()=>b});var n=t(9950),a=t(28429),o=t(49348),s=t(59233),u=t(23263),i=t(91854),r=t(74623),d=t(70030),c=t(59051),v=t.n(c),h=t(96591),p=t(39095),m=t(10557),x=t(44414);const b=()=>{const{t:e}=(0,d.B)(),{activeMenu:l}=(0,i.d4)((e=>e.menu),i.bN),t=(0,i.wA)(),[c]=s.A.useForm(),b=(0,a.Zp)();(0,n.useEffect)((()=>()=>{const e=c.getFieldsValue(!0),n={...e,expired_at:JSON.stringify(null===e||void 0===e?void 0:e.expired_at)};t((0,r.Ok)({activeMenu:l,data:n}))}),[]);return(0,x.jsx)(u.A,{title:e("add.bonus"),className:"h-100",children:(0,x.jsx)(m.A,{form:c,handleSubmit:n=>{const a={expired_at:v()(n.expired_at).format("YYYY-MM-DD"),status:n.status,type:"count",bonusable_id:n.bonusable_id.value,value:n.value,bonus_stock_id:n.bonus_stock_id.value,bonus_quantity:n.bonus_quantity},s="seller/bonus/product";return p.A.create(a).then((()=>{o.oR.success(e("successfully.created")),(0,i.vA)((()=>{t((0,r.EK)({...l,nextUrl:s})),t((0,h.q)({}))})),b("/".concat(s))}))}})})}},10557:(e,l,t)=>{t.d(l,{A:()=>j});var n=t(9950),a=t(59233),o=t(87094),s=t(41988),u=t(56952),i=t(5713),r=t(25933),d=t(48538),c=t(59051),v=t.n(c),h=t(70030),p=t(91854),m=t(67231),x=t(80905),b=t(44414);function j(e){let{form:l,handleSubmit:t}=e;const{t:c}=(0,h.B)(),{activeMenu:j}=(0,p.d4)((e=>e.menu),p.bN),[g,A]=(0,n.useState)(!1),[f,_]=(0,n.useState)({product:!1,bonusProduct:!1});return(0,b.jsxs)(a.A,{name:"product-bonus-form",layout:"vertical",onFinish:e=>{A(!0),t(e).finally((()=>A(!1)))},form:l,initialValues:{status:!0,...j.data,...(()=>{var e,l;if(null===(e=j.data)||void 0===e||!e.expired_at)return{};const t=JSON.parse(null===(l=j.data)||void 0===l?void 0:l.expired_at);return{expired_at:v()(t,"HH:mm:ss")}})()},className:"d-flex flex-column h-100",children:[(0,b.jsxs)(o.A,{gutter:12,children:[(0,b.jsx)(s.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("products.stock"),name:"bonusable_id",rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(x.j,{fetchOptions:function(e){let{page:l=1,search:t}=e;const n={page:l,search:null!==t&&void 0!==t&&t.length?t:void 0};return m.A.getStock(n).then((e=>{var l,t;return _({...f,product:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.last_page)}),e.data.map((e=>{var l,t,n,a,o;return{label:"".concat(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title," ").concat(null!==e&&void 0!==e&&null!==(n=e.extras)&&void 0!==n&&n.length?"=> ".concat(null===e||void 0===e||null===(a=e.extras)||void 0===a||null===(o=a.map((e=>{var l,t;return"".concat(null===e||void 0===e||null===(l=e.group)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title,": ").concat(null===e||void 0===e?void 0:e.value)})))||void 0===o?void 0:o.join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:f.product,allowClear:!1})})}),(0,b.jsx)(s.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("product.quantity"),name:"value",rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(u.A,{className:"w-100"})})}),(0,b.jsx)(s.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(x.j,{fetchOptions:function(e){let{page:l=1,search:t}=e;const n={page:l,search:null!==t&&void 0!==t&&t.length?t:void 0};return m.A.getStock(n).then((e=>{var l,t;return _({...f,bonusProduct:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.last_page)}),e.data.map((e=>{var l,t,n,a,o;return{label:"".concat(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title," ").concat(null!==e&&void 0!==e&&null!==(n=e.extras)&&void 0!==n&&n.length?"=> ".concat(null===e||void 0===e||null===(a=e.extras)||void 0===a||null===(o=a.map((e=>{var l,t;return"".concat(null===e||void 0===e||null===(l=e.group)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title,": ").concat(null===e||void 0===e?void 0:e.value)})))||void 0===o?void 0:o.join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:f.bonusProduct,allowClear:!1})})}),(0,b.jsx)(s.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(u.A,{className:"w-100"})})}),(0,b.jsx)(s.A,{span:12,children:(0,b.jsx)(a.A.Item,{name:"expired_at",label:c("expired.at"),rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(i.A,{className:"w-100",placeholder:"",disabledDate:e=>v()().add(-1,"days")>=e})})}),(0,b.jsx)(s.A,{span:8,children:(0,b.jsx)(a.A.Item,{label:c("active"),name:"status",valuePropName:"checked",children:(0,b.jsx)(r.A,{})})})]}),(0,b.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,b.jsx)("div",{className:"pb-5",children:(0,b.jsx)(d.A,{type:"primary",htmlType:"submit",loading:g,children:c("submit")})})})]})}}}]);