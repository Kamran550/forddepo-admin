(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9683],{68387:(e,t,l)=>{"use strict";l.d(t,{P:()=>a});const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let l="";for(let a=0;a<e;a++){l+=t[Math.floor(62*Math.random())]}return l}},65820:(e,t,l)=>{"use strict";l.d(t,{s:()=>s});var a=l(28429),i=l(21215),d=l.n(i);const s=()=>{const e=(0,a.Zp)(),t=(0,a.zy)(),l=d().parse(t.search,{ignoreQueryPrefix:!0});return{values:l,set:(t,a)=>e({search:d().stringify({...l,[t]:a})}),reset:t=>{const a={...l};a[t]&&delete a[t],e({search:d().stringify({...a})})},clear:()=>e({search:d().stringify({})}),merge:t=>e({search:d().stringify({...l,...t})}),get:e=>l[e],setMultiple:t=>{const a={...l,...t};e({search:d().stringify(a)})},resetMultiple:t=>{const a={...l};t.forEach((e=>{a[e]&&delete a[e]})),e({search:d().stringify(a)})}}}},81824:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>E});var a=l(9950),i=l(86366),d=l(23263),s=l(90650),n=l(71999),o=l(28429),u=l(91854),c=l(74623),r=l(70030),v=l(65820),m=l(98890),x=l(49326),p=l(44832),h=l(93567),k=l(57844),A=l(59233),j=l(40895),y=l(87094),g=l(41988),b=l(55902),f=l(48538),q=l(56952),_=l(99674),w=l(80737),C=l(62545),N=l(44070),F=l(47933),I=l(47992),V=l(45321),M=l(34537),S=l(44414);const O=e=>{var t;let{prev:l,next:i,isRequest:s}=e;const{t:n}=(0,r.B)(),[v]=A.A.useForm(),{uuid:m}=(0,o.g)(),{activeMenu:x}=(0,u.d4)((e=>e.menu),u.bN),[p,h]=(0,a.useState)(null),[k,O]=(0,a.useState)(null),[W,z]=(0,a.useState)([]),E=(0,u.wA)(),R=(0,o.zy)(),{defaultLang:B}=(0,u.d4)((e=>e.formLang),u.bN),{defaultCurrency:L}=(0,u.d4)((e=>e.currency),u.bN);const G=async e=>{var t;const l={search:e,addon:1,shop_id:null===x||void 0===x||null===(t=x.data)||void 0===t?void 0:t.shop_id,"statuses[0]":"published","statuses[1]":"pending",active:1},a=await F.A.getAll(l).then((e=>e.data.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id}}))))||[];return[{label:n("all.addons"),value:"all",key:"all"},...a]};(0,a.useEffect)((()=>{var e;if(s)if(null!==(e=R.state)&&void 0!==e&&e.generate){var t,l,a,i,d;const e=(0,V.A)(null===x||void 0===x||null===(t=x.data.extras)||void 0===t?void 0:t.map((e=>e.values||[]))),s=e.map((e=>{var t,l;if(e.every((e=>"undefined"!==typeof e.stock_id))){var a,i,d;const t=null===(a=x.data)||void 0===a||null===(i=a.actualStocks)||void 0===i?void 0:i.find((t=>t.extras.every((t=>e.some((e=>e.value===t.id)))))),l=[];return null===t||void 0===t||null===(d=t.addons)||void 0===d||d.forEach((e=>{var t,a,i;e.product&&l.push({label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),{price:(null===t||void 0===t?void 0:t.price)||0,quantity:(null===t||void 0===t?void 0:t.quantity)||0,stock_id:null===t||void 0===t?void 0:t.id,tax:(null===x||void 0===x?void 0:x.data.tax)||0,addons:l,...Object.assign({},...e.map(((e,t)=>({["extras[".concat(t,"]")]:{label:e.label,value:e.value,group:x.data.extras[t].label}}))))}}return{price:0,quantity:0,tax:(null===(t=x.data)||void 0===t?void 0:t.tax)||0,sku:null===x||void 0===x||null===(l=x.data)||void 0===l?void 0:l.sku,addons:[],...Object.assign({},...e.map(((e,t)=>({["extras[".concat(t,"]")]:{label:e.label,value:e.value}}))))}}));let r=[];if(0===e.length&&0!==(null===(l=x.data)||void 0===l||null===(a=l.actualStocks)||void 0===a?void 0:a.length)){var n,o,u;const e=null===(n=x.data.actualStocks)||void 0===n?void 0:n.at(0),t=[];null===e||void 0===e||null===(o=e.addons)||void 0===o||o.forEach((e=>{var l,a,i;e.product&&t.push({label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),r=[{price:(null===e||void 0===e?void 0:e.price)||0,quantity:(null===e||void 0===e?void 0:e.quantity)||0,sku:null===e||void 0===e?void 0:e.sku,tax:(null===(u=x.data)||void 0===u?void 0:u.tax)||0,addons:e?t:[]}]}var c;if(0===e.length&&0===(null===x||void 0===x||null===(i=x.data)||void 0===i||null===(d=i.actualStocks)||void 0===d?void 0:d.length))r=[{price:void 0,quantity:0,sku:null===x||void 0===x?void 0:x.data.sku,tax:(null===(c=x.data)||void 0===c?void 0:c.tax)||0,addons:[]}];const m=r.concat(s);z(x.data.actualStocks.map((e=>e.id))),v.setFieldsValue({stocks:m})}else{var r,p;const e=null===(r=x.data.stocks)||void 0===r?void 0:r.map((e=>{var t;return{price:e.price,quantity:e.quantity,tax:x.data.tax,stock_id:e.stock_id,sku:e.sku,...Object.assign({},...null===(t=e.ids)||void 0===t?void 0:t.map(((e,t)=>({["extras[".concat(t,"]")]:{label:e.label,value:e.value,group:e.group}})))),addons:e.addons}}));z((null===(p=x.data)||void 0===p?void 0:p.delete_ids)||[]),v.setFieldsValue({stocks:e})}else!function(e){O(!0),F.A.getById(e).then((e=>{var t,l,a;const i=(0,V.A)(null===x||void 0===x||null===(t=x.data.extras)||void 0===t?void 0:t.map((e=>e.values||[]))),d=i.map(((t,l)=>{var a,i;if(t.every((e=>"undefined"!==typeof e.stock_id))){var d;const l=e.data.stocks.find((e=>e.extras.every((e=>t.some((t=>t.value===e.id)))))),a=[];return null===l||void 0===l||null===(d=l.addons)||void 0===d||d.forEach((e=>{var t,l,i;e.product&&a.push({label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),{price:(null===l||void 0===l?void 0:l.price)||0,quantity:(null===l||void 0===l?void 0:l.quantity)||0,sku:null===l||void 0===l?void 0:l.sku,stock_id:null===l||void 0===l?void 0:l.id,tax:(null===x||void 0===x?void 0:x.data.tax)||0,addons:a,...Object.assign({},...t.map(((e,t)=>({["extras[".concat(t,"]")]:{label:e.label,value:e.value}}))))}}return{price:0,quantity:0,sku:null===x||void 0===x||null===(a=x.data)||void 0===a?void 0:a.sku,tax:(null===(i=x.data)||void 0===i?void 0:i.tax)||0,addons:[],...Object.assign({},...t.map(((e,t)=>({["extras[".concat(t,"]")]:{label:e.label,value:e.value}}))))}}));let s=[];if(0===i.length&&0!==(null===(l=e.data.stocks)||void 0===l?void 0:l.length)){var n,o,u;const t=null===(n=e.data.stocks)||void 0===n?void 0:n.at(0),l=[];null===t||void 0===t||null===(o=t.addons)||void 0===o||o.forEach((e=>{var t,a,i;e.product&&l.push({label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),s=[{price:(null===t||void 0===t?void 0:t.price)||0,quantity:(null===t||void 0===t?void 0:t.quantity)||0,sku:null===t||void 0===t?void 0:t.sku,tax:(null===(u=x.data)||void 0===u?void 0:u.tax)||0,addons:t?l:[]}]}var c,r;0===i.length&&0===(null===(a=e.data.stocks)||void 0===a?void 0:a.length)&&(s=[{price:void 0,quantity:0,sku:null===x||void 0===x||null===(c=x.data)||void 0===c?void 0:c.sku,tax:(null===(r=x.data)||void 0===r?void 0:r.tax)||0,addons:[]}]);const m=s.concat(d);z(e.data.stocks.map((e=>e.id))),v.setFieldsValue({stocks:m})})).finally((()=>{O(!1)}))}(m)}),[s,null===(t=R.state)||void 0===t?void 0:t.generate]);const P=(e,t,l)=>e.map((e=>Object.assign(e,{[t]:l}))),T=(e,t)=>{const l=e?(0,M.A)(6):t,{stocks:a}=v.getFieldsValue();v.setFieldsValue({"set.all.sku":l,stock:P(a,"sku",l)})};return(0,S.jsx)(d.A,{title:"".concat(n("product.name"),": ").concat(x.data["title[".concat(B,"]")]?'"'.concat(x.data["title[".concat(B,"]")],'"'):""),loading:!!k,children:(0,S.jsxs)(A.A,{layout:"vertical",form:v,onFinish:e=>{var t,l;const{stocks:a}=e,d=W.filter(((e,t)=>{var l;return!(null===(l=a[t])||void 0===l||!l.stock_id)&&!a.some((t=>(null===t||void 0===t?void 0:t.stock_id)===e))}));let n;const o=!(null===(t=x.data)||void 0===t||null===(l=t.extras)||void 0===l||!l.length);if(n=o?a.map(((e,t)=>{var l,a,i,d;return{price:e.price,quantity:e.quantity,sku:e.sku,ids:s?null===(l=x.data)||void 0===l?void 0:l.extras.map(((t,l)=>e["extras[".concat(l,"]")])):null===(a=x.data)||void 0===a?void 0:a.extras.map(((t,l)=>e["extras[".concat(l,"]")].value)),addons:e.addons?s?null===(i=e.addons)||void 0===i?void 0:i.map((e=>e)):null===(d=e.addons)||void 0===d?void 0:d.map((e=>e.value)):[],stock_id:e.stock_id}})):[{price:a[0].price,quantity:a[0].quantity,addons:a[0].addons?s?a[0].addons.map((e=>e)):a[0].addons.map((e=>e.value)):[],stock_id:a[0].stock_id,sku:a[0].sku,ids:[]}],s)return E((0,c.Ok)({activeMenu:x,data:{...x.data,stocks:n,delete_ids:d}})),void i();h(!0),F.A.stocks(m,{extras:n,delete_ids:d}).then((()=>{E((0,c.Ok)({activeMenu:x,data:{...x.data,stocks:n,delete_ids:d}})),i()})).finally((()=>h(!1)))},children:[(0,S.jsx)(j.A,{}),(0,S.jsx)("h2",{children:n("set.all.values")}),(0,S.jsxs)(y.A,{gutter:12,align:"middle",children:[(0,S.jsx)(g.A,{span:5,style:{marginRight:"10px"},children:(0,S.jsx)(A.A.Item,{label:n("sku"),name:"set.all.sku",children:(0,S.jsx)(b.A,{className:"w-100",onChange:e=>T(!1,e.target.value)})})}),(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{label:" ",name:"sku",children:(0,S.jsx)(f.A,{icon:(0,S.jsx)(C.A,{}),onClick:()=>T(!0)})})}),(0,S.jsx)(g.A,{span:4,children:(0,S.jsx)(A.A.Item,{label:n("price"),name:"set.all.price",rules:[{type:"number",min:0,message:n("must.be.positive.number")}],children:(0,S.jsx)(q.A,{className:"w-100",onChange:function(e){const{stocks:t}=v.getFieldsValue();v.setFieldsValue({stocks:P(t,"price",e)})}})})}),(0,S.jsx)(g.A,{span:4,children:(0,S.jsx)(A.A.Item,{label:n("quantity"),name:"set.all.quantity",rules:[{type:"number",min:0,message:n("must.be.positive.number")}],children:(0,S.jsx)(q.A,{className:"w-100",onChange:function(e){const{stocks:t}=v.getFieldsValue();v.setFieldsValue({stocks:P(t,"quantity",e)})}})})}),(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{label:n("addons"),name:"addons",children:(0,S.jsx)(I.G,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:G,allowClear:!0,onChange:function(e){const{stocks:t}=v.getFieldsValue();v.setFieldsValue({stocks:P(t,"addons",e)})}})})})]}),(0,S.jsx)(j.A,{}),(0,S.jsx)("h2",{children:n("values")}),(0,S.jsx)(A.A.List,{name:"stocks",children:(e,t)=>{let{add:l,remove:a}=t;return(0,S.jsx)("div",{children:e.map(((e,t)=>{var l,i,d,s;return(0,S.jsxs)(y.A,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(l=x.data)&&void 0!==l&&null!==(i=l.extras)&&void 0!==i&&i.length)&&e.key,children:[null===(d=x.data)||void 0===d||null===(s=d.extras)||void 0===s?void 0:s.map(((e,l)=>(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{label:null===e||void 0===e?void 0:e.label,name:[t,"extras[".concat(l,"]")],rules:[{required:!0,message:n("required")}],children:(0,S.jsx)(_.A,{disabled:!0,className:"w-100",style:{minWidth:200}})})},"extra"+e.value))),(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{label:n("addons"),name:[t,"addons"],rules:[{required:!1,message:n("required")}],children:(0,S.jsx)(I.G,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:G,allowClear:!0})})}),(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{label:n("sku"),name:[t,"sku"],children:(0,S.jsx)(b.A,{className:"w-100",style:{minWidth:200}})})}),(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{label:n("quantity"),name:[t,"quantity"],rules:[{required:!0,message:n("required")}],children:(0,S.jsx)(q.A,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,S.jsxs)(g.A,{children:[(0,S.jsx)(A.A.Item,{label:"".concat(n("price")," (").concat(null===L||void 0===L?void 0:L.symbol,")"),name:[t,"price"],rules:[{required:!0,message:n("requried")}],children:(0,S.jsx)(q.A,{min:0,className:"w-100",style:{minWidth:200}})}),(0,S.jsx)(A.A.Item,{hidden:!0,label:n("id"),name:[t,"stock_id"],children:(0,S.jsx)(q.A,{min:1,className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]}),(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{label:n("tax"),name:[t,"tax"],children:(0,S.jsx)(q.A,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})}),(0,S.jsx)(g.A,{children:(0,S.jsx)(A.A.Item,{noStyle:!0,shouldUpdate:(t,l)=>{var a,i;return(null===(a=t.stocks[e.name])||void 0===a?void 0:a.price)!==(null===(i=l.stocks[e.name])||void 0===i?void 0:i.price)},children:t=>{let{getFieldValue:l}=t;const a=l(["stocks",e.name,"tax"])||0,i=l(["stocks",e.name,"price"]),d=0===a?i:i*a/100+i;return(0,S.jsx)(A.A.Item,{label:"".concat(n("total.price")," (").concat(null===L||void 0===L?void 0:L.symbol,")"),children:(0,S.jsx)(q.A,{min:1,disabled:!0,value:d,className:"w-100",style:{minWidth:200}})})}})}),(0,S.jsx)(g.A,{children:e.key?(0,S.jsx)(f.A,{type:"primary",className:"mt-2",danger:!0,icon:(0,S.jsx)(N.A,{}),onClick:()=>{a(e.name)}}):""})]},e.key)}))})}}),(0,S.jsxs)(w.A,{className:"mt-4",children:[(0,S.jsx)(f.A,{onClick:l,children:n("prev")}),(0,S.jsx)(f.A,{type:"primary",htmlType:"submit",loading:!!p,children:n("next")})]})]})})};var W=l(59585);const{Step:z}=i.A,E=()=>{var e;const{t:t}=(0,r.B)(),{id:l}=(0,o.g)(),A=(0,v.s)(),{activeMenu:j}=(0,u.d4)((e=>e.menu),u.bN),y=(0,u.wA)(),g=Number((null===(e=A.values)||void 0===e?void 0:e.step)||0),[b,f]=(0,a.useState)(j.refetch),q=()=>{const e=g+1;A.set("step",e)},_=()=>{const e=g-1;A.set("step",e)};(0,a.useEffect)((()=>{var e;j.refetch&&(e=l,f(!0),m.A.getById(e).then((e=>{var t;let l=e.data.data;y((0,c.Ok)({activeMenu:j,data:{...l,request_id:e.data.id,actualStocks:null===(t=e.data.model)||void 0===t?void 0:t.stocks,model_id:e.data.model_id,model:e.data.model}}))})).finally((()=>{f(!1),y((0,c.km)(j))})))}),[j.refetch,l]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d.A,{title:t("edit.food"),extra:(0,S.jsx)(n.A,{}),children:(0,S.jsx)(i.A,{current:g,onChange:e=>{y((0,c.Ok)({activeMenu:j,data:{...j.data,step:e}})),A.set("step",e)},children:x.C.map((e=>(0,S.jsx)(z,{title:t(e.title)},e.title)))})}),b?(0,S.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,S.jsx)(s.A,{size:"large",className:"py-5"})}):(0,S.jsxs)("div",{children:["First-content"===x.C[g].content&&(0,S.jsx)(p.A,{isRequest:!0,next:q,action_type:"edit"}),"Second-content"===x.C[g].content&&(0,S.jsx)(W.A,{isRequest:!0,next:q,prev:_}),"Third-content"===x.C[g].content&&(0,S.jsx)(O,{isRequest:!0,next:q,prev:_}),"Fourth-content"===x.C[g].content&&(0,S.jsx)(h.A,{isRequest:!0,next:q,prev:_}),"Finish-content"===x.C[g].content&&(0,S.jsx)(k.A,{isRequest:!0,prev:_})]})]})}},62545:(e,t,l)=>{"use strict";l.d(t,{A:()=>o});var a=l(89379),i=l(9950);const d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"};var s=l(25085),n=function(e,t){return i.createElement(s.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:d}))};const o=i.forwardRef(n)},42634:()=>{}}]);