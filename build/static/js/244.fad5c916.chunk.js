"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[244],{17456:(e,t,s)=>{s.d(t,{A:()=>l});s(9950);const l=s.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},40244:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var l=s(9950),a=s(23263),n=s(87094),i=s(41988),c=s(74947),r=s(48538),d=s(90650),o=s(82371);const h={getAll:e=>o.A.get("dashboard/seller/subscriptions",{params:e}),attach:(e,t)=>o.A.post("dashboard/seller/subscriptions/".concat(e,"/attach"),t),transactionCreate:(e,t)=>o.A.post("payments/subscription/".concat(e,"/transactions"),t)};var u=s(91854),p=s(70030),m=s(74623),v=s(20380),x=s(53496),b=s(81446),j=s(49348),y=s(73242),f=s(17456),g=s(54826),N=s(70283),A=s(68873),w=s(17491),k=s(44414);function S(e){var t,s;let{modal:c,handleCancel:d}=e;const{t:o}=(0,p.B)(),m=(0,u.wA)(),{payments:S,loading:C}=(0,u.d4)((e=>e.payment),u.bN),{myShop:z}=(0,u.d4)((e=>e.myShop),u.bN),{seller:_}=(0,u.d4)((e=>e.myShop.myShop),u.bN),[B,R]=(0,l.useState)(!1),[E,I]=(0,l.useState)({}),[K,V]=(0,l.useState)(null),[D,F]=(0,l.useState)(null),{payment_type:G}=(0,u.d4)((e=>e.globalSettings.settings),u.bN);(0,l.useEffect)((()=>{S.length||m((0,x.kK)({})),async function(){await w.A.getById(z.id).then((e=>{let{data:t}=e;return V(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){w.A.getAll().then((e=>{let{data:t}=e;return F(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const M=e=>{switch(e){case"wallet":return(0,k.jsx)(A.c8K,{size:80});case"paypal":return(0,k.jsx)(g.SnG,{size:80});case"stripe":return(0,k.jsx)(N.kDV,{size:80});case"razorpay":return(0,k.jsx)(N.NVb,{size:80});case"paystack":return(0,k.jsx)("img",{src:f.A,alt:"img",width:"80",height:"80"})}};return(0,k.jsx)(v.A,{visible:!!c,title:o("purchase.subscription"),onCancel:d,footer:[(0,k.jsx)(r.A,{type:"primary",onClick:()=>{var e;E.value?"wallet"===E.label&&(null===_||void 0===_||null===(e=_.wallet)||void 0===e?void 0:e.price)<c.price?j.oR.warning(o("insufficient.balance")):(R(!0),h.attach(c.id).then((e=>{let{data:t}=e;return function(e){const t={payment_sys_id:E.value};h.transactionCreate(e,t).then((()=>{d(),j.oR.success(o("successfully.purchased")),m((0,y.v)({}))})).finally((()=>R(!1)))}(t.id)})).error((()=>R(!1)))):j.oR.warning(o("please.select.payment.type"))},loading:B,children:o("save")},"save-btn"),(0,k.jsx)(r.A,{type:"default",onClick:d,children:o("cancel")},"cancel-btn")],children:C?(0,k.jsx)(b.A,{}):(0,k.jsx)(n.A,{gutter:12,children:null===(t="admin"===G?D:K)||void 0===t||null===(s=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===s?void 0:s.map(((e,t)=>(0,k.jsx)(i.A,{span:8,children:(0,k.jsxs)(a.A,{className:"payment-card ".concat((null===E||void 0===E?void 0:E.label)===e.label?"active":""),onClick:()=>{I(e)},children:[(0,k.jsx)("div",{className:"payment-icon",children:M(null===e||void 0===e?void 0:e.label)}),(0,k.jsx)("div",{className:"font-weight-bold mt-2",children:o(null===e||void 0===e?void 0:e.label)})]})},t)))})})}const C=[];function z(){const{t:e}=(0,p.B)(),{defaultCurrency:t}=(0,u.d4)((e=>e.currency),u.bN),{myShop:s}=(0,u.d4)((e=>e.myShop),u.bN),[o,v]=(0,l.useState)(null),[x,b]=(0,l.useState)(!1),[j,y]=(0,l.useState)([]),f=j.length,{activeMenu:g}=(0,u.d4)((e=>e.menu),u.bN),N=(0,u.wA)(),A=()=>{b(!0),h.getAll().then((e=>{y(e.data)})).finally((()=>{b(!1),N((0,m.km)(g))}))};return(0,l.useEffect)((()=>{g.refetch&&A()}),[g.refetch]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(a.A,{className:"h-100",children:x?(0,k.jsx)(i.A,{className:"ant-col-spin d-flex justify-content-center",children:(0,k.jsx)(d.A,{size:"large"})}):(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"text-center mb-4",children:[(0,k.jsx)("h2",{className:"font-weight-semibold",children:"Pick a base plan"}),(0,k.jsx)(n.A,{type:"flex",justify:"center",children:(0,k.jsx)(i.A,{sm:24,md:12,lg:8,children:(0,k.jsx)("p",{children:"Space, the final frontier. These are the voyages of the Starship Enterprise. Its five-year mission."})})})]}),(0,k.jsx)(n.A,{children:j.map(((l,a)=>{var n,d;return(0,k.jsx)(i.A,{span:6,className:f===a+1?"":"border-right",children:(0,k.jsx)(c.A.Ribbon,{text:e("active"),color:"red",className:(null===s||void 0===s||null===(n=s.subscription)||void 0===n||null===(d=n.subscription)||void 0===d?void 0:d.id)===l.id?"":"d-none",children:(0,k.jsxs)("div",{className:"p-3",children:[(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsxs)("h1",{className:"display-4 mt-4",children:["before"===(null===t||void 0===t?void 0:t.position)&&(0,k.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===t||void 0===t?void 0:t.symbol}),(0,k.jsx)("span",{children:l.price}),"after"===(null===t||void 0===t?void 0:t.position)&&(0,k.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===t||void 0===t?void 0:t.symbol})]}),(0,k.jsxs)("p",{className:"mb-0 text-lowercase",children:[l.month," ",e("month")]}),(0,k.jsxs)("p",{className:"mb-0 text-lowercase",children:[e("order.limit")," ",null===l||void 0===l?void 0:l.order_limit]}),(0,k.jsxs)("p",{className:"mb-0 text-lowercase",children:[e("product.limit")," ",null===l||void 0===l?void 0:l.product_limit]}),(0,k.jsx)("p",{className:"mb-0 text-lowercase",children:Boolean(null===l||void 0===l?void 0:l.with_report)?e("with.report"):e("without.report")})]}),(0,k.jsx)("div",{className:"mt-4",children:(0,k.jsx)("h2",{className:"text-center font-weight-semibold",children:l.type})}),(0,k.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,k.jsx)("div",{children:null===C||void 0===C?void 0:C.map(((e,t)=>(0,k.jsxs)("p",{children:[(0,k.jsx)(c.A,{color:"blue"}),(0,k.jsx)("span",{children:e})]},"pricing-feature-".concat(t))))})}),(0,k.jsx)("div",{className:"mt-3 text-center",children:(0,k.jsx)(r.A,{type:"default",onClick:()=>v(l),children:e("purchase")})})]})})},"price-column-".concat(a))}))})]})}),o&&(0,k.jsx)(S,{modal:o,handleCancel:()=>v(null),refetch:A})]})}}}]);