(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5058],{65820:(l,e,i)=>{"use strict";i.d(e,{s:()=>t});var o=i(28429),d=i(21215),n=i.n(d);const t=()=>{const l=(0,o.Zp)(),e=(0,o.zy)(),i=n().parse(e.search,{ignoreQueryPrefix:!0});return{values:i,set:(e,o)=>l({search:n().stringify({...i,[e]:o})}),reset:e=>{const o={...i};o[e]&&delete o[e],l({search:n().stringify({...o})})},clear:()=>l({search:n().stringify({})}),merge:e=>l({search:n().stringify({...i,...e})}),get:l=>i[l],setMultiple:e=>{const o={...i,...e};l({search:n().stringify(o)})},resetMultiple:e=>{const o={...i};e.forEach((l=>{o[l]&&delete o[l]})),l({search:n().stringify(o)})}}}},48521:(l,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>b});var o=i(9950),d=i(86366),n=i(23263),t=i(90650),a=i(71999),r=i(28429),v=i(67231),u=i(91854),s=i(74623),c=i(70030),p=i(65820),x=i(88986),m=i(11906),h=i(26405),y=i(79019),g=i(62425),j=i(76092),A=i(34293),k=i(44414);const{Step:f}=d.A,b=()=>{var l;const{t:e}=(0,c.B)(),{uuid:i}=(0,r.g)(),b=(0,p.s)(),_=(0,u.wA)(),{activeMenu:C}=(0,u.d4)((l=>l.menu),u.bN),{languages:q}=(0,u.d4)((l=>l.formLang),u.bN),[N,P]=(0,o.useState)(C.refetch),F=Number((null===(l=b.values)||void 0===l?void 0:l.step)||0);(0,o.useEffect)((()=>{B(i)}),[]),(0,x.A)((()=>{C.refetch&&B(i)}),[C.refetch]);const S=()=>{const l=F+1;b.set("step",l)},I=()=>{const l=F-1;b.set("step",l)},w=l=>{var e;return l?{label:null!==l&&void 0!==l&&l.translation?null===l||void 0===l||null===(e=l.translation)||void 0===e?void 0:e.title:null===l||void 0===l?void 0:l.title,value:null===l||void 0===l?void 0:l.id}:null},B=l=>{P(!0),v.A.getById(l).then((l=>{var e,i,o,d,n,t,a,r,v,u,c,p;const x={};null===l||void 0===l||null===(e=l.data)||void 0===e||null===(i=e.stocks)||void 0===i||i.forEach((l=>{var e;null===l||void 0===l||null===(e=l.extras)||void 0===e||e.forEach((e=>{var i,o,d,n,t,a,r,v,u,s;(null===e||void 0===e?void 0:e.extra_group_id)in x?null!==x&&void 0!==x&&null!==(i=x[null===e||void 0===e?void 0:e.extra_group_id])&&void 0!==i&&null!==(o=i.values)&&void 0!==o&&o.some((l=>(null===l||void 0===l?void 0:l.value)===(null===e||void 0===e?void 0:e.id)))||null===x||void 0===x||null===(d=x[null===e||void 0===e?void 0:e.extra_group_id])||void 0===d||null===(n=d.values)||void 0===n||n.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.value,stock_id:null===l||void 0===l?void 0:l.id,group:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title}):x[null===e||void 0===e?void 0:e.extra_group_id]={label:null===e||void 0===e||null===(r=e.group)||void 0===r||null===(v=r.translation)||void 0===v?void 0:v.title,value:null===e||void 0===e?void 0:e.extra_group_id,id:null===e||void 0===e?void 0:e.extra_group_id,stock_id:null===l||void 0===l?void 0:l.id,values:[{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.value,stock_id:null===l||void 0===l?void 0:l.id,group:null===e||void 0===e||null===(u=e.group)||void 0===u||null===(s=u.translation)||void 0===s?void 0:s.title}]}}))}));const m={...null===l||void 0===l?void 0:l.data,...M(null===l||void 0===l?void 0:l.data),category:w(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.category),brand:w(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.brand),kitchen:w(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.kitchen),unit:w(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.unit),images:(h=null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.galleries,h.map((l=>({uid:null===l||void 0===l?void 0:l.id,name:null===l||void 0===l?void 0:l.path,url:null===l||void 0===l?void 0:l.path})))),product_id:null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.id,extras:Object.values(x),stocks:null===l||void 0===l||null===(v=l.data)||void 0===v||null===(u=v.stocks)||void 0===u?void 0:u.map((l=>({...l,...Object.assign({},...null===l||void 0===l?void 0:l.extras.map(((l,e)=>{var i,o;return{["extras[".concat(e,"]")]:{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.id,group:null===l||void 0===l||null===(i=l.group)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title}}}))),quantity:(null===l||void 0===l?void 0:l.quantity)||0,extras:void 0}))),properties:null===l||void 0===l||null===(c=l.data)||void 0===c||null===(p=c.properties)||void 0===p?void 0:p.map(((l,e)=>({id:e,["key[".concat(null===l||void 0===l?void 0:l.locale,"]")]:null===l||void 0===l?void 0:l.key,["value[".concat(l.locale,"]")]:null===l||void 0===l?void 0:l.value}))),translation:void 0,translations:void 0};var h;_((0,s.Ok)({activeMenu:C,data:m}))})).finally((()=>{P(!1),_((0,s.km)(C))}))},M=l=>{if(null===l||void 0===l||!l.translations)return{};const{translations:e}=l,i=null===q||void 0===q?void 0:q.map((l=>{var i,o;return{["title[".concat(null===l||void 0===l?void 0:l.locale,"]")]:null===e||void 0===e||null===(i=e.find((e=>(null===e||void 0===e?void 0:e.locale)===(null===l||void 0===l?void 0:l.locale))))||void 0===i?void 0:i.title,["description[".concat(null===l||void 0===l?void 0:l.locale,"]")]:null===e||void 0===e||null===(o=e.find((e=>(null===e||void 0===e?void 0:e.locale)===(null===l||void 0===l?void 0:l.locale))))||void 0===o?void 0:o.description}}));return Object.assign({},...i)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(n.A,{title:e("edit.food"),extra:(0,k.jsx)(a.A,{}),children:(0,k.jsx)(d.A,{current:F,onChange:l=>{_((0,s.Ok)({activeMenu:C,data:{...C.data,step:l}})),b.set("step",l)},children:h.C.map((l=>(0,k.jsx)(f,{title:e(l.title)},l.title)))})}),N?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(t.A,{size:"large",className:"py-5"})}):(0,k.jsxs)("div",{children:["First-content"===h.C[F].content&&(0,k.jsx)(A.A,{next:S,action_type:"edit"}),"Second-content"===h.C[F].content&&(0,k.jsx)(j.A,{next:S,prev:I}),"Third-content"===h.C[F].content&&(0,k.jsx)(m.A,{next:S,prev:I,userRole:"seller"}),"Fourth-content"===h.C[F].content&&(0,k.jsx)(y.A,{next:S,prev:I}),"Finish-content"===h.C[F].content&&(0,k.jsx)(g.A,{prev:I})]})]})}},79019:(l,e,i)=>{"use strict";i.d(e,{A:()=>N});var o=i(91854),d=i(9950),n=i(68387),t=i(20380),a=i(23263),r=i(80737),v=i(48538),u=i(70030),s=i(67231),c=i(49348),p=i(28429),x=i(74623),m=i(12203),h=i(24513),y=i(44070),g=i(35116),j=i(44414);const A=l=>{let{properties:e,editSelectedProperty:i,deleteProperty:o,loading:d=!1}=l;const{t:n}=(0,u.B)(),t=[{title:n("key"),dataIndex:"key",key:"key"},{title:n("value"),dataIndex:"value",key:"value"},{title:n("options"),key:"options",render:(l,e)=>(0,j.jsxs)(r.A,{children:[(0,j.jsx)(v.A,{type:"primary",icon:(0,j.jsx)(h.A,{}),onClick:()=>i(e)}),(0,j.jsx)(g.A,{type:"primary",danger:!0,icon:(0,j.jsx)(y.A,{}),onClick:()=>o(null===e||void 0===e?void 0:e.id)})]})}];return(0,j.jsx)(a.A,{loading:d,children:(0,j.jsx)(m.A,{dataSource:e,columns:t,pagination:!1})})};var k=i(59233),f=i(87094),b=i(41988),_=i(55902);const C=l=>{let{addNewProperty:e,loading:i=!1}=l;const{t:d}=(0,u.B)(),[t]=k.A.useForm(),{defaultLang:r,languages:s}=(0,o.d4)((l=>l.formLang),o.bN);return(0,j.jsx)(a.A,{loading:i,children:(0,j.jsx)(k.A,{form:t,layout:"vertical",onFinish:l=>{const i={key:null===l||void 0===l?void 0:l["key[".concat(r,"]")],value:null===l||void 0===l?void 0:l["value[".concat(r,"]")]},o=s.map((e=>({id:(0,n.P)(),locale:null===e||void 0===e?void 0:e.locale,key:(null===l||void 0===l?void 0:l["key[".concat(null===e||void 0===e?void 0:e.locale,"]")])||(null===i||void 0===i?void 0:i.key),value:(null===l||void 0===l?void 0:l["value[".concat(e.locale,"]")])||(null===i||void 0===i?void 0:i.value)})));e(o),t.resetFields()},children:(0,j.jsxs)(f.A,{gutter:12,children:[(0,j.jsx)(b.A,{span:8,children:s.map((l=>(0,j.jsx)(k.A.Item,{label:d("key"),name:"key[".concat((null===l||void 0===l?void 0:l.locale)||"en","]"),hidden:(null===l||void 0===l?void 0:l.locale)!==r,rules:[{required:(null===l||void 0===l?void 0:l.locale)===r,message:d("required")},{type:"string",min:2,max:200,message:d("min.2.max.200.chars")}],children:(0,j.jsx)(_.A,{})},null===l||void 0===l?void 0:l.locale)))}),(0,j.jsx)(b.A,{span:8,children:s.map((l=>(0,j.jsx)(k.A.Item,{label:d("value"),name:"value[".concat((null===l||void 0===l?void 0:l.locale)||"en","]"),hidden:(null===l||void 0===l?void 0:l.locale)!==r,rules:[{required:(null===l||void 0===l?void 0:l.locale)===r,message:d("required")},{type:"string",min:2,max:200,message:d("min.2.max.200.chars")}],children:(0,j.jsx)(_.A,{})},null===l||void 0===l?void 0:l.locale)))}),(0,j.jsx)(b.A,{children:(0,j.jsx)(k.A.Item,{label:" ",children:(0,j.jsx)(v.A,{type:"primary",htmlType:"submit",children:d("add")})})})]})})})},q=l=>{let{property:e,editProperty:i}=l;const{t:o}=(0,u.B)(),[d]=k.A.useForm();return(0,j.jsx)(a.A,{children:(0,j.jsx)(k.A,{form:d,layout:"vertical",onFinish:l=>{i({...e,...l})},initialValues:{key:null===e||void 0===e?void 0:e.key,value:null===e||void 0===e?void 0:e.value},children:(0,j.jsxs)(f.A,{gutter:12,children:[(0,j.jsx)(b.A,{span:24,children:(0,j.jsx)(k.A.Item,{label:o("key"),name:"key",rules:[{required:!0,message:o("required")},{type:"string",min:2,max:200,message:o("min.2.max.200.chars")}],children:(0,j.jsx)(_.A,{})})}),(0,j.jsx)(b.A,{span:24,children:(0,j.jsx)(k.A.Item,{label:o("value"),name:"value",rules:[{required:!0,message:o("required")},{type:"string",min:2,max:200,message:o("min.2.max.200.chars")}],children:(0,j.jsx)(_.A,{})})}),(0,j.jsx)(b.A,{span:24,children:(0,j.jsx)(v.A,{type:"primary",htmlType:"submit",className:"w-100",children:o("edit")})})]})})})},N=l=>{var e;let{prev:i,next:m,isRequest:h=!1}=l;const{t:y}=(0,u.B)(),{uuid:g}=(0,p.g)(),k=(0,o.wA)(),{defaultLang:f}=(0,o.d4)((l=>l.formLang),o.bN),{activeMenu:b}=(0,o.d4)((l=>l.menu),o.bN),[_,N]=(0,d.useState)(h&&(null===(e=b.data)||void 0===e?void 0:e.properties)||[]),[P,F]=(0,d.useState)(null),[S,I]=(0,d.useState)(!1),[w,B]=(0,d.useState)(!1);(0,d.useEffect)((()=>{h||M(g)}),[]);const M=l=>{I(!0),s.A.getById(l).then((l=>{var e,i;N(null===l||void 0===l||null===(e=l.data)||void 0===e||null===(i=e.properties)||void 0===i?void 0:i.map((l=>({...l,id:(0,n.P)()}))))})).finally((()=>{I(!1)}))};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C,{loading:S,addNewProperty:l=>{N([..._,...l])}}),(0,j.jsx)(A,{loading:S,properties:null===_||void 0===_?void 0:_.filter((l=>(null===l||void 0===l?void 0:l.locale)===f)),editSelectedProperty:F,deleteProperty:l=>{t.A.confirm({title:y("are.you.sure?"),okText:y("yes"),onOk:()=>{N((e=>e.filter((e=>e.id!==l))))}})}}),(0,j.jsx)(a.A,{children:(0,j.jsxs)(r.A,{children:[(0,j.jsx)(v.A,{onClick:i,disabled:S,children:y("prev")}),(0,j.jsx)(v.A,{type:"primary",onClick:()=>{const l={key:[],value:[]};if(null===_||void 0===_||_.map((e=>{l.key.push({[null===e||void 0===e?void 0:e.locale]:null===e||void 0===e?void 0:e.key}),l.value.push({[null===e||void 0===e?void 0:e.locale]:null===e||void 0===e?void 0:e.value})})),h)return k((0,x.Ok)({activeMenu:b,data:{...b.data,properties:_,props:l}})),void m();B(!0),s.A.properties(g,l).then((()=>{c.oR.success(y("successfully.updated")),m()})).finally((()=>{B(!1)}))},disabled:S,loading:w,children:y("next")})]})}),!!P&&(0,j.jsx)(t.A,{visible:!!P,onCancel:()=>{F(null)},footer:!1,children:(0,j.jsx)(q,{property:P,editProperty:l=>{N((e=>e.map((e=>e.id===l.id?l:e)))),F(null)}})})]})}},42634:()=>{}}]);