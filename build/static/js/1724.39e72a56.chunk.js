"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1724],{72345:(e,l,a)=>{a.d(l,{v:()=>d});var s=a(9950),i=a(90777),n=a(90650),t=a(95491),r=a.n(t),o=a(44414);const d=e=>{let{fetchOptions:l,refetch:a=!1,debounceTimeout:t=400,...d}=e;const[c,u]=(0,s.useState)(!1),[m,v]=(0,s.useState)([]),h=(0,s.useMemo)((()=>r()((e=>{v([]),u(!0),l(e).then((e=>{v(e),u(!1)}))}),t)),[]);return(0,o.jsx)(i.A,{showSearch:!0,labelInValue:!0,filterTreeNode:(e,l)=>{var a;if(l)return null===l||void 0===l||null===(a=l.label)||void 0===a?void 0:a.localeCompare(e)},treeLine:!0,onSearch:e=>{console.log("value",e),h(e)},filterOption:!1,treeData:c?[]:m,treeDefaultExpandAll:!0,onFocus:()=>{m.length&&!a||(u(!0),l().then((e=>{v(e),u(!1)})))},notFoundContent:c?(0,o.jsx)(n.A,{size:"small"}):"no results",...d})}},80415:(e,l,a)=>{a.d(l,{Av:()=>c,HF:()=>i,HV:()=>o,LH:()=>s,No:()=>r,Qt:()=>t,fz:()=>d,g$:()=>n});const s={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},i=["progress","paid","canceled","rejected","refund"],n=["before","after"],t=["blue","red","gold","volcano","cyan","lime"],r=["new","accepted","cooking","ready","ended"],o=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],d=["dine_in","delivery","pickup"],c=["male","female"]},44851:(e,l,a)=>{a.d(l,{A:()=>t});var s=a(96011),i=a.n(s),n=a(63620);async function t(e){let l={address:e,key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.CJ};return i().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{let{data:l}=e;return l.results[0]})).catch((e=>"not found"))}},89441:(e,l,a)=>{a.d(l,{A:()=>J});var s=a(9950),i=a(59233),n=a(80737),t=a(48538),r=a(28429),o=a(91854),d=a(74623),c=a(55660),u=a(70030),m=a(29597),v=a(90777),h=a(12916),p=a(87094),g=a(41988),A=a(23263),j=a(55902),x=a(25933),f=a(56952),b=a(40895),y=a(99674),_=a(98591),w=a(78498),I=a(48970),k=a(92019),q=a(20735),S=a(79406),P=a(58974),N=a(62572),F=a(53271),L=a(12040),C=a(92967),O=a(72345),E=a(63620),V=a(84619),H=a(44851),D=a(80415),M=a(44414);const{SHOW_ALL:B}=v.A,Y=e=>{var l;let{backImage:a,setBackImage:r,logoImage:d,setLogoImage:c,form:m,user:v,setLocation:Y,location:J,emailStatusOptions:Q}=e;const{t:R}=(0,u.B)(),{activeMenu:T}=(0,o.d4)((e=>e.menu),o.bN),W=i.A.useWatch("categories",m),[z,$]=(0,s.useState)(null),[K,Z]=(0,s.useState)(null),[G,U]=(0,s.useState)(null),{defaultLang:X,languages:ee}=(0,o.d4)((e=>e.formLang),o.bN),[le,ae]=(0,s.useState)(""),se=(null===T||void 0===T||null===(l=T.data)||void 0===l?void 0:l.documents)||[],{placePredictions:ie,getPlacePredictions:ne,isPlacePredictionsLoading:te}=(0,V.A)({apiKey:E.CJ,libraries:["places","geocode"]}),re=D.g$.map((e=>({label:R(e),value:e,key:e})));const oe=()=>{$(!0),U(!0)},de=()=>{$(!1),Z(!1)},ce=e=>{if(e.children)if(W.some((l=>l.value===e.value))){const l=W.filter((l=>l.value!==e.value)),a=l.filter((l=>!e.children.some((e=>e.value===l.value))));m.setFieldsValue({categories:a})}else m.setFieldsValue({categories:W.concat([{label:e.label,value:e.value},...e.children.map((e=>({label:e.label,value:e.value})))])});else null!==W&&void 0!==W&&W.some((l=>l.value===e.value))?m.setFieldsValue({categories:W.filter((l=>l.value!==e.value))}):m.setFieldsValue({categories:W.concat([e.parent,{label:e.label,value:e.value}])})};return(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:24,children:(0,M.jsx)(A.A,{children:(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:4,children:(0,M.jsx)(i.A.Item,{label:R("logo.image"),name:"logo_img",rules:[{validator:(e,l)=>0===(null===d||void 0===d?void 0:d.length)?Promise.reject(new Error(R("required"))):Promise.resolve()}],children:(0,M.jsx)(I.A,{type:"shops/logo",imageList:d,setImageList:c,form:m,multiple:!1,name:"logo_img"})})}),(0,M.jsx)(g.A,{span:4,children:(0,M.jsx)(i.A.Item,{label:R("background.image"),name:"background_img",rules:[{validator:(e,l)=>0===(null===a||void 0===a?void 0:a.length)?Promise.reject(new Error(R("required"))):Promise.resolve()}],children:(0,M.jsx)(I.A,{type:"shops/background",imageList:a,setImageList:r,form:m,multiple:!1,name:"background_img"})})}),(0,M.jsx)(g.A,{span:10,children:(0,M.jsx)(i.A.Item,{label:R("status.note"),name:"status_note",rules:[{validator:(e,l)=>l?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(R("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.length)<5?Promise.reject(new Error(R("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(R("required")))}],children:(0,M.jsx)(_.A,{rows:4})})}),(0,M.jsx)(g.A,{span:4,children:(0,M.jsx)(i.A.Item,{name:"status",label:R("status"),children:(0,M.jsx)(j.A,{disabled:!0})})}),(0,M.jsx)(g.A,{span:2,children:(0,M.jsx)(i.A.Item,{label:R("open"),name:"open",valuePropName:"checked",children:(0,M.jsx)(x.A,{disabled:!0})})})]})})}),(0,M.jsx)(g.A,{span:24,children:(0,M.jsx)(A.A,{title:R("general"),children:(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:12,children:(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:24,children:ee.map(((e,l)=>(0,M.jsx)(i.A.Item,{label:R("title"),name:"title[".concat(e.locale,"]"),rules:[{validator:(l,a)=>a||(null===e||void 0===e?void 0:e.locale)!==X?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(R("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.length)<2?Promise.reject(new Error(R("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(R("required")))}],hidden:e.locale!==X,children:(0,M.jsx)(j.A,{})},"title"+l)))}),(0,M.jsx)(g.A,{span:24,children:(0,M.jsx)(i.A.Item,{label:R("phone"),name:"phone",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,className:"w-100"})})})]})}),(0,M.jsx)(g.A,{span:12,children:ee.map(((e,l)=>(0,M.jsx)(i.A.Item,{label:R("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(l,a)=>a||(null===e||void 0===e?void 0:e.locale)!==X?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(R("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.length)<5?Promise.reject(new Error(R("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(R("required")))}],hidden:e.locale!==X,children:(0,M.jsx)(_.A,{rows:4})},"desc"+l)))}),(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{label:R("seller"),name:"user",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(S.a,{disabled:!v,fetchOptions:async function(e){const l={search:e,roles:"user","empty-shop":1};return U(!1),F.A.search(l).then((e=>e.data.map((e=>({label:e.firstname+" "+(e.lastname||""),value:e.id})))))},refetch:G,dropdownRender:e=>(0,M.jsxs)(M.Fragment,{children:[e,(0,M.jsx)(b.A,{style:{margin:"8px 0"}}),(0,M.jsx)(t.A,{className:"w-100",icon:(0,M.jsx)(k.A,{}),onClick:oe,children:R("add.user")})]})})})}),!(null===se||void 0===se||!se.length)&&(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{label:R("uploaded.documents.for.verification"),children:(0,M.jsx)(n.A,{gap:"4px 0",wrap:!0,children:null===se||void 0===se?void 0:se.map((e=>(0,M.jsx)("a",{href:null===e||void 0===e?void 0:e.path,target:"_blank",rel:"noopener noreferrer",children:(0,M.jsx)(h.A,{icon:(0,M.jsx)(q.A,{}),children:null===e||void 0===e?void 0:e.title})})))})})}),(0,M.jsx)(g.A,{span:6,children:(0,M.jsx)(i.A.Item,{label:R("shop.tags"),name:"tags",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(S.a,{mode:"multiple",fetchOptions:async function(e){U(!1);const l={search:e};return P.A.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:(null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:e.id}}))}))},refetch:G})})}),(0,M.jsx)(g.A,{span:6,children:(0,M.jsx)(i.A.Item,{label:R("categories"),name:"categories",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(O.v,{treeCheckable:!0,tagRender:e=>{const{label:l,onClose:a}=e;return(0,M.jsx)(h.A,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClose:a,style:{marginRight:3},children:l})},showCheckedStrategy:B,treeCheckStrictly:!0,refetch:!0,onSelect:(e,l)=>ce(l),onDeselect:(e,l)=>ce(l),fetchOptions:async function(e){const l={search:e,type:"shop",active:1,lang:X};return U(!1),N.A.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>{var l,a;return{label:(null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:e.id,disabled:0===(null===(a=e.children)||void 0===a?void 0:a.length),children:e.children.map((l=>{var a,s;return{label:null===(a=l.translation)||void 0===a?void 0:a.title,value:l.id,parent:{label:(null===(s=e.translation)||void 0===s?void 0:s.title)||"no name",value:e.id}}}))}}))}))}})})}),(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{name:"emailStatuses",label:R("order.statuses.for.email.notifications"),children:(0,M.jsx)(y.A,{mode:"multiple",options:Q})})})]})})}),(0,M.jsx)(g.A,{span:8,children:(0,M.jsx)(A.A,{title:R("delivery"),children:(0,M.jsxs)(p.A,{gutter:8,children:[(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{name:"price",label:R("min.price"),rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,className:"w-100"})})}),(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{name:"price_per_km",label:R("price.per.km"),rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,className:"w-100"})})})]})})}),(0,M.jsx)(g.A,{span:8,children:(0,M.jsx)(A.A,{title:R("delivery.time"),children:(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{name:"delivery_time_type",label:R("delivery_time_type"),rules:[{required:!0,message:R("required")}],children:(0,M.jsxs)(y.A,{className:"w-100",children:[(0,M.jsx)(y.A.Option,{value:"minute",label:R("minutes")}),(0,M.jsx)(y.A.Option,{value:"hour",label:R("hour")})]})})}),(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{name:"delivery_time_from",label:R("delivery_time_from"),rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,className:"w-100"})})}),(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{name:"delivery_time_to",label:R("delivery_time_to"),rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,className:"w-100"})})})]})})}),(0,M.jsx)(g.A,{span:8,children:(0,M.jsx)(A.A,{title:R("order.info"),children:(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{label:R("min.amount"),name:"min_amount",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,className:"w-100"})})}),(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{label:R("tax"),name:"tax",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,max:100,addonAfter:"%",className:"w-100"})})}),(0,M.jsx)(g.A,{span:12,children:(0,M.jsx)(i.A.Item,{label:R("admin.comission"),name:"percentage",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(f.A,{min:0,max:100,className:"w-100",addonAfter:"%"})})})]})})}),(0,M.jsx)(g.A,{span:24,children:(0,M.jsx)(A.A,{title:R("qr.menu.settings"),children:(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:6,children:(0,M.jsx)(i.A.Item,{name:"wifi_name",label:R("shop.wifi.name"),children:(0,M.jsx)(j.A,{className:"w-100"})})}),(0,M.jsx)(g.A,{span:6,children:(0,M.jsx)(i.A.Item,{name:"wifi_password",label:R("shop.wifi.password"),children:(0,M.jsx)(j.A,{className:"w-100"})})}),(0,M.jsx)(g.A,{span:6,children:(0,M.jsx)(i.A.Item,{label:R("order.payment"),name:"order_payment",rules:[{required:!0,message:R("required")}],children:(0,M.jsx)(y.A,{options:re})})}),(0,M.jsx)(g.A,{span:6,children:(0,M.jsx)(i.A.Item,{name:"new_order_after_payment",label:R("new.order.after.payment"),valuePropName:"checked",children:(0,M.jsx)(x.A,{})})})]})})}),(0,M.jsx)(g.A,{span:24,children:(0,M.jsx)(A.A,{title:R("address"),children:(0,M.jsxs)(p.A,{gutter:12,children:[(0,M.jsx)(g.A,{span:12,children:ee.map(((e,l)=>(0,M.jsx)(i.A.Item,{label:R("address"),name:"address[".concat(e.locale,"]"),rules:[{required:e.locale===X,message:R("required")}],hidden:e.locale!==X,children:(0,M.jsx)(y.A,{allowClear:!0,searchValue:le,showSearch:!0,autoClearSearchValue:!0,loading:te,options:null===ie||void 0===ie?void 0:ie.map((e=>({label:e.description,value:e.description}))),onSearch:e=>{ae(e),e.length>0&&ne({input:e})},onSelect:async e=>{const l=await(0,H.A)(e);Y({lat:null===l||void 0===l?void 0:l.geometry.location.lat,lng:null===l||void 0===l?void 0:l.geometry.location.lng})}})},"address"+l)))}),(0,M.jsx)(g.A,{span:24,children:(0,M.jsx)(w.A,{location:J,setLocation:Y,setAddress:e=>m.setFieldsValue({["address[".concat(X,"]")]:e})})})]})})}),z&&(0,M.jsx)(L.A,{visible:z,handleCancel:()=>de()}),K&&(0,M.jsx)(C.A,{visible:K,handleCancel:()=>de()})]})},J=e=>{var l,a,v,h,p,g,A,j,x;let{next:f,action_type:b="",user:y}=e;const{t:_}=(0,u.B)(),[w]=i.A.useForm(),I=(0,r.Zp)(),k=(0,o.wA)(),{uuid:q}=(0,r.g)(),{activeMenu:S}=(0,o.d4)((e=>e.menu),o.bN),{settings:P}=(0,o.d4)((e=>e.globalSettings),o.bN),[N,F]=(0,s.useState)(null!==S&&void 0!==S&&null!==(l=S.data)&&void 0!==l&&l.location?{lat:parseFloat(null===S||void 0===S||null===(a=S.data)||void 0===a||null===(v=a.location)||void 0===v?void 0:v.latitude),lng:parseFloat(null===S||void 0===S||null===(h=S.data)||void 0===h||null===(p=h.location)||void 0===p?void 0:p.longitude)}:(0,m.A)(P)),[L,C]=(0,s.useState)(!1),[O,E]=(0,s.useState)(null!==(g=S.data)&&void 0!==g&&g.logo_img?[null===(A=S.data)||void 0===A?void 0:A.logo_img]:[]),[V,H]=(0,s.useState)(null!==(j=S.data)&&void 0!==j&&j.background_img?[null===(x=S.data)||void 0===x?void 0:x.background_img]:[]),B=(0,s.useMemo)((()=>D.HV.map((e=>({label:_(e),value:e,key:e})))),[q]);(0,s.useEffect)((()=>()=>{const e=w.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),k((0,d.Ok)({activeMenu:S,data:{...S.data,...e}}))}),[]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(i.A,{form:w,name:"basic",layout:"vertical",onFinish:e=>{var l,a,s,i,n,t;C(!0);const r=null!==e&&void 0!==e&&null!==(l=e.emailStatuses)&&void 0!==l&&l.length?Object.assign({},...null===e||void 0===e||null===(a=e.emailStatuses)||void 0===a?void 0:a.map(((e,l)=>({["email_statuses[".concat(l,"]")]:(null===e||void 0===e?void 0:e.value)||e})))):[],o={...e,"images[0]":null===(s=O[0])||void 0===s?void 0:s.name,"images[1]":null===(i=V[0])||void 0===i?void 0:i.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((e=>e.value)),tags:null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n.map((e=>e.value)),user_id:e.user.value,open:void 0,wifi_name:(null===e||void 0===e?void 0:e.wifi_name)||"",wifi_password:(null===e||void 0===e?void 0:e.wifi_password)||"","location[latitude]":N.lat,"location[longitude]":N.lng,user:void 0,delivery_time:0,order_payment:(null===e||void 0===e||null===(t=e.order_payment)||void 0===t?void 0:t.value)||(null===e||void 0===e?void 0:e.order_payment)||void 0,...r,emailStatuses:void 0,new_order_after_payment:null!==e&&void 0!==e&&e.new_order_after_payment?1:0};null===o||void 0===o||delete o.background_img,null===o||void 0===o||delete o.logo_img,"edit"===b?function(e,l){c.A.update(q,l).then((()=>{k((0,d.Ok)({activeMenu:S,data:e})),f()})).catch((e=>console.error(e.response.data.params))).finally((()=>C(!1)))}(e,o):function(e,l){c.A.create(l).then((l=>{let{data:a}=l;k((0,d.W6)({id:"shop-".concat(a.uuid),url:"shop/".concat(a.uuid),name:_("add.shop"),data:{...e,id:null===a||void 0===a?void 0:a.id,seller:null===a||void 0===a?void 0:a.seller},refetch:!1})),I("/shop/".concat(a.uuid,"?step=1"))})).catch((e=>console.error(e.response.data.params))).finally((()=>C(!1)))}(e,o)},initialValues:{open:!1,status:"new",...S.data},children:[(0,M.jsx)(Y,{form:w,user:y,backImage:V,setBackImage:H,logoImage:O,setLogoImage:E,location:N,setLocation:F,emailStatusOptions:B}),(0,M.jsx)(n.A,{children:(0,M.jsx)(t.A,{type:"primary",htmlType:"submit",loading:L,children:_("next")})})]})})}},49164:(e,l,a)=>{a.d(l,{A:()=>h});var s=a(9950),i=a(81446),n=a(59051),t=a.n(n),r=a(81466),o=a(80127),d=a(28429),c=a(34422),u=a(40691),m=a(59233),v=a(44414);const h=e=>{let{next:l,prev:a}=e;const[n]=m.A.useForm(),[h,p]=(0,s.useState)([]),[g,A]=(0,s.useState)(new Array(7).fill(!1)),[j,x]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),{uuid:y}=(0,d.g)();return(0,s.useEffect)((()=>(n.setFieldsValue({working_days:c.Q}),y&&(b(!0),o.A.getById(y).then((e=>{p(e.data.closed_dates.filter((e=>e.day>t()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})),r.A.getById(y).then((e=>{A(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&n.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:t()(e.from,"HH:mm:ss"),to:t()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>b(!1)))),()=>{b(!1),x(!1)})),[]),(0,v.jsx)(v.Fragment,{children:f?(0,v.jsx)(i.A,{}):(0,v.jsx)(u.A,{onFinish:e=>{x(!0);const a={dates:h?h.map((e=>t()(e).format("YYYY-MM-DD"))):void 0},s={dates:e.working_days.map((e=>({day:e.title,from:t()(e.from?e.from:"00").format("HH-mm"),to:t()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))};o.A.update(y,a).then((()=>{l()})).finally((()=>x(!1))),0!==e.working_days.length&&r.A.update(y,s).then((()=>{l()})).finally((()=>x(!1)))},prev:a,form:n,lines:g,loadingBtn:j,days:h,setDays:p,setLines:A,weeks:c.Q})})}}}]);