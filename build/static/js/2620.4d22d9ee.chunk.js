"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2620],{92620:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var l=a(9950),n=a(28429),s=a(49348),i=a(59233),c=a(23263),o=a(90650),r=a(91854),u=a(74623),d=a(5386),v=a(5302),h=a(70030),p=a(71999),b=a(31281),f=a(82035),m=a(44414);const g=()=>{const{t:e}=(0,h.B)(),{activeMenu:t}=(0,r.d4)((e=>e.menu),r.bN),a=(0,r.wA)(),[g]=i.A.useForm(),x=(0,n.Zp)(),{id:A}=(0,n.g)(),[k,j]=(0,l.useState)(!1),{languages:_}=(0,r.d4)((e=>e.formLang),r.bN);(0,l.useEffect)((()=>()=>{const e=g.getFieldsValue(!0);a((0,u.Ok)({activeMenu:t,data:e}))}),[]);function y(e){if(!e)return{};const{translations:t}=e,a=_.map((e=>{var a,l,n;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description,["button_text[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.button_text}}));return Object.assign({},...a)}return(0,l.useEffect)((()=>{var e;t.refetch&&(e=A,j(!0),v.A.getById(e).then((e=>{var l;let n=e.data;const s={...n,img:(i=n.galleries,i.map((e=>({uid:e.id,name:e.path,url:e.path})))),shops:null===(l=n.shops)||void 0===l?void 0:l.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}})),...y(n)};var i;g.setFieldsValue(s),a((0,u.Ok)({activeMenu:t,data:s}))})).finally((()=>{a((0,u.km)(t)),j(!1)})))}),[t.refetch]),(0,m.jsx)(c.A,{title:e("clone.banner"),className:"h-100",extra:(0,m.jsx)(p.A,{}),children:k?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,m.jsx)(o.A,{size:"large",className:"py-5"})}):(0,m.jsx)(f.A,{form:g,handleSubmit:(l,n)=>{var i;const c="banners",o={status:"published"},h={url:l.url,shops:null===(i=l.shops)||void 0===i?void 0:i.map((e=>e.value)),images:n.map((e=>e.name)),clickable:l.clickable,title:(0,b.A)(_,l,"title"),description:(0,b.A)(_,l,"description"),button_text:(0,b.A)(_,l,"button_text")};return v.A.create(h).then((()=>{s.oR.success(e("successfully.cloned")),(0,r.vA)((()=>{a((0,u.EK)({...t,nextUrl:c})),a((0,d.s)(o))})),x("/".concat(c))}))}})})}}}]);