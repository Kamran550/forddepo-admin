"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5353],{35353:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(9950),l=a(28429),i=a(49348),o=a(59233),s=a(23263),c=a(90650),r=a(91854),d=a(74623),u=a(60926),v=a(95709),p=a(70030),g=a(71999),m=a(63620),h=a(96011),f=a.n(h),b=a(31281),_=a(37702),k=a(44414);const A=()=>{const{t:e}=(0,p.B)(),{activeMenu:t}=(0,r.d4)((e=>e.menu),r.bN),a=(0,r.wA)(),[h]=o.A.useForm(),A=(0,l.Zp)(),{id:y}=(0,l.g)(),[x,j]=(0,n.useState)(!1),{languages:N}=(0,r.d4)((e=>e.formLang),r.bN);function E(e){if(!e)return{};const{translations:t}=e,a=N.map((e=>{var a,n;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.description}}));return Object.assign({},...a)}(0,n.useEffect)((()=>()=>{const e=h.getFieldsValue(!0);a((0,d.Ok)({activeMenu:t,data:e}))}),[]);return(0,n.useEffect)((()=>{var e;t.refetch&&(e=y,j(!0),v.A.getById(e).then((e=>{var n;let l=e.data;const i={...l,...E(l),...null===l||void 0===l?void 0:l.buttons,active:!(null===l||void 0===l||!l.active),image:[(o=null===l||void 0===l||null===(n=l.galleries[0])||void 0===n?void 0:n.path,{name:o,url:m.sE+o})]};var o;h.setFieldsValue(i),a((0,d.Ok)({activeMenu:t,data:i}))})).finally((()=>{a((0,d.km)(t)),j(!1)})))}),[t.refetch]),(0,k.jsx)(s.A,{title:e("edit.page"),className:"h-100",extra:(0,k.jsx)(g.A,{}),children:x?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(c.A,{size:"large",className:"py-5"})}):(0,k.jsx)(_.A,{form:h,handleSubmit:(n,l)=>{const o={images:l.map((e=>e.name)),active:Number(n.active),type:n.type,title:(0,b.A)(N,n,"title"),description:(0,b.A)(N,n,"description"),buttons:{google_play_button_link:null===n||void 0===n?void 0:n.google_play_button_link,app_store_button_link:null===n||void 0===n?void 0:n.app_store_button_link}},s="pages";return f()({method:"put",url:"".concat(m.TT,"dashboard/admin/pages/").concat(y),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:o,params:{}}).then((()=>{i.oR.success(e("successfully.updated")),(0,r.vA)((()=>{a((0,d.EK)({...t,nextUrl:s})),a((0,u.f)({}))})),A("/".concat(s))})).catch((e=>{var t,a;return i.oR.error(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))}})})}}}]);