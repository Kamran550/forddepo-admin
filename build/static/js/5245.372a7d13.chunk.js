"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5245],{80415:(l,d,i)=>{i.d(d,{Av:()=>s,HF:()=>e,HV:()=>a,LH:()=>o,No:()=>v,Qt:()=>t,fz:()=>u,g$:()=>n});const o={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},e=["progress","paid","canceled","rejected","refund"],n=["before","after"],t=["blue","red","gold","volcano","cyan","lime"],v=["new","accepted","cooking","ready","ended"],a=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],u=["dine_in","delivery","pickup"],s=["male","female"]},65820:(l,d,i)=>{i.d(d,{s:()=>t});var o=i(28429),e=i(21215),n=i.n(e);const t=()=>{const l=(0,o.Zp)(),d=(0,o.zy)(),i=n().parse(d.search,{ignoreQueryPrefix:!0});return{values:i,set:(d,o)=>l({search:n().stringify({...i,[d]:o})}),reset:d=>{const o={...i};o[d]&&delete o[d],l({search:n().stringify({...o})})},clear:()=>l({search:n().stringify({})}),merge:d=>l({search:n().stringify({...i,...d})}),get:l=>i[l],setMultiple:d=>{const o={...i,...d};l({search:n().stringify(o)})},resetMultiple:d=>{const o={...i};d.forEach((l=>{o[l]&&delete o[l]})),l({search:n().stringify(o)})}}}},35047:(l,d,i)=>{i.r(d),i.d(d,{default:()=>Al});var o=i(59233),e=i(87094),n=i(41988),t=i(23263),v=i(48538),a=i(9950),u=i(92270),s=i(23758),r=i(91854),c=i(51242),h=i(28429),p=i(74623),x=i(88986),y=i(80415),m=i(70030),j=i(41397);const g=l=>{if(l)return(0,j.isArray)(l)?l.map((l=>({label:"".concat((null===l||void 0===l?void 0:l.firstname)||""," ").concat((null===l||void 0===l?void 0:l.lastname)||""),value:null===l||void 0===l?void 0:l.id,id:null===l||void 0===l?void 0:l.id}))):{label:"".concat((null===l||void 0===l?void 0:l.firstname)||""," ").concat((null===l||void 0===l?void 0:l.lastname)||""),value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}};var A=i(59051),f=i.n(A),_=i(21215),b=i.n(_),k=i(37295),q=i(90650),N=i(40895),w=i(92979),S=i(65820),C=i(1201),z=i(31526),M=i(8750),I=i(50384),T=i(20380),P=i(72243),F=i(91524),B=i(80737),D=i(47933),O=i(22576),Y=i(53774),H=i(28249),E=i(21055),V=i(91348),W=i(44414);const Z=l=>{var d,i,o,u,s,h,p,x,y,j,g;let{uuid:A,type:f="add",onCancel:_}=l;const{t:b}=(0,m.B)(),k=(0,r.wA)(),[N,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)({}),[z,I]=(0,a.useState)({}),[Z,L]=(0,a.useState)([]),[Q,U]=(0,a.useState)([]),[G,$]=(0,a.useState)([]),[K,R]=(0,a.useState)([]),[J,X]=(0,a.useState)([]),[ll,dl]=(0,a.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),[il,ol]=(0,a.useState)(null!==(d=null===S||void 0===S?void 0:S.min_qty)&&void 0!==d?d:1),el=l=>{var d;const i=null===K||void 0===K?void 0:K.reduce(((l,d)=>{var i,o,e,n,t,v,a;return l+(null!==(i=null===d||void 0===d||null===(o=d.product)||void 0===o||null===(e=o.stock)||void 0===e?void 0:e.price)&&void 0!==i?i:0)*(null!==(n=null!==(t=null===d||void 0===d||null===(v=d.product)||void 0===v?void 0:v.quantity)&&void 0!==t?t:null===d||void 0===d||null===(a=d.product)||void 0===a?void 0:a.min_qty)&&void 0!==n?n:1)}),0);return(null!==i&&void 0!==i?i:0)+(null!==(d=null===ll||void 0===ll?void 0:ll.stock)&&void 0!==d?d:0)?null===ll||void 0===ll?void 0:ll.stock[l||"price"]:0};return(0,a.useEffect)((()=>(A&&(l=>{w(!0),D.A.getById(l).then((l=>{var d,i,o,e,n,t;C(null===l||void 0===l?void 0:l.data);const v=(0,O.w)(null===l||void 0===l?void 0:l.data);L(null===v||void 0===v?void 0:v.extras),ol(null!==(d=null!==(i=null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.min_qty)&&void 0!==i?i:null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.quantity)&&void 0!==d?d:1),U(null===v||void 0===v?void 0:v.stock),dl((0,O.A)(G,null===v||void 0===v?void 0:v.extras,null===v||void 0===v?void 0:v.stock)),null===(n=(0,O.A)("",null===v||void 0===v?void 0:v.extras,null===v||void 0===v?void 0:v.stock))||void 0===n||null===(t=n.extras)||void 0===t||t.forEach((l=>{$((d=>[...d,l[0]]))}))})).finally((()=>{w(!1)}))})(A),()=>{})),[A]),(0,a.useEffect)((()=>{var l;if(null!==ll&&void 0!==ll&&null!==(l=ll.stock)&&void 0!==l&&l.addons){var d,i;return(l=>{R(l)})(null===ll||void 0===ll||null===(d=ll.stock)||void 0===d||null===(i=d.addons)||void 0===i?void 0:i.filter((l=>null===J||void 0===J?void 0:J.includes(String(null===l||void 0===l?void 0:l.addon_id)))))}}),[J,null===S||void 0===S?void 0:S.uuid,null===ll||void 0===ll||null===(i=ll.stock)||void 0===i?void 0:i.addons]),(0,a.useEffect)((()=>{null!==ll&&void 0!==ll&&ll.stock&&I({...ll.stock,extras:G})}),[null===ll||void 0===ll?void 0:ll.stock,G]),(0,W.jsx)(T.A,{visible:!!A,title:(null===S||void 0===S||null===(o=S.translation)||void 0===o?void 0:o.title)||b("product"),onCancel:_,footer:[(0,W.jsx)(v.A,{type:"primary",disabled:N,onClick:()=>{const l={stock_id:null===z||void 0===z?void 0:z.id,quantity:il,addons:null!==K&&void 0!==K&&K.length?null===K||void 0===K?void 0:K.map((l=>{var d,i,o,e,n,t;return{stock_id:null===l||void 0===l||null===(d=l.product)||void 0===d||null===(i=d.stock)||void 0===i?void 0:i.id,quantity:null!==(o=null!==(e=null===l||void 0===l||null===(n=l.product)||void 0===n?void 0:n.quantity)&&void 0!==e?e:null===l||void 0===l||null===(t=l.product)||void 0===t?void 0:t.min_qty)&&void 0!==o?o:1}})):[]};(0,r.vA)((()=>{k((0,c.U$)(l))})),_()},children:b(f)},"addUpdateOrderProductModal"),(0,W.jsx)(v.A,{onClick:_,children:b("cancel")},"closeOrderProductModal")],children:(0,W.jsxs)(t.A,{children:[N&&(0,W.jsx)("div",{className:"loader",children:(0,W.jsx)(q.A,{})}),(0,W.jsxs)(e.A,{gutter:12,children:[(0,W.jsx)(n.A,{span:8,children:(0,W.jsx)(P.A,{src:(null===S||void 0===S?void 0:S.img)||"https://via.placeholder.com/150",alt:(null===S||void 0===S||null===(u=S.translation)||void 0===u?void 0:u.title)||b("N/A"),height:200,style:{objectFit:"contain"}})}),(0,W.jsx)(n.A,{span:16,children:(0,W.jsxs)(F.A,{title:(null===S||void 0===S||null===(s=S.translation)||void 0===s?void 0:s.title)||b("product"),children:[(0,W.jsxs)(F.A.Item,{label:b("price"),span:3,children:[(0,W.jsx)("div",{className:null!==z&&void 0!==z&&z.discount?"strike":"",children:(0,Y.A)(el())}),!(null===z||void 0===z||!z.discount)&&(0,W.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,Y.A)(el("total_price"))})]}),(0,W.jsx)(F.A.Item,{label:b("in.stock"),span:3,children:(0,H.A)(null!==(h=null===z||void 0===z?void 0:z.quantity)&&void 0!==h?h:1,null===S||void 0===S?void 0:S.unit)}),(0,W.jsx)(F.A.Item,{label:b("tax"),span:3,children:(0,Y.A)(null===z||void 0===z?void 0:z.tax)})]})})]}),!(null===ll||void 0===ll||null===(p=ll.extras)||void 0===p||!p.length)&&(null===ll||void 0===ll||null===(x=ll.extras)||void 0===x?void 0:x.map(((l,d)=>(0,W.jsx)("div",{className:"extra-group",children:(0,W.jsx)(B.A,{className:"extras-select",wrap:!0,children:null===l||void 0===l?void 0:l.map((l=>(0,W.jsx)("span",{className:"extras-text rounded ".concat(null!==G&&void 0!==G&&G.find((d=>(null===d||void 0===d?void 0:d.id)===(null===l||void 0===l?void 0:l.id)))?"selected":""),onClick:()=>(l=>{var d,i,o,e,n;const t=G.findIndex((d=>(null===d||void 0===d?void 0:d.extra_group_id)===(null===l||void 0===l?void 0:l.extra_group_id)));let v=G;t>-1&&(v=null===(d=v)||void 0===d?void 0:d.slice(0,t)),null===(i=v)||void 0===i||i.push(l);const a=null===(o=v)||void 0===o||null===(e=o.map((l=>null===l||void 0===l?void 0:l.id)))||void 0===e?void 0:e.join(",");let u=(0,O.A)(a,Z,Q);dl(u),null===u||void 0===u||null===(n=u.extras)||void 0===n||n.forEach((d=>{var i;const o=G.findIndex((i=>{var o,e;return(null===(o=d[0])||void 0===o?void 0:o.extra_group_id)!==(null===l||void 0===l?void 0:l.extra_group_id)?(null===i||void 0===i?void 0:i.extra_group_id)===(null===(e=d[0])||void 0===e?void 0:e.extra_group_id):(null===i||void 0===i?void 0:i.extra_group_id)===(null===l||void 0===l?void 0:l.extra_group_id)}));if((null===(i=d[0])||void 0===i?void 0:i.level)>=(null===l||void 0===l?void 0:l.level)){var e;let i=(null===(e=d[0])||void 0===e?void 0:e.extra_group_id)!==(null===l||void 0===l?void 0:l.extra_group_id)?d[0]:l;-1===o?v.push(i):v[o]=i}})),$(v)})(l),style:{padding:"0 10px"},children:(null===l||void 0===l?void 0:l.value)||b("N/A")},null===l||void 0===l?void 0:l.id)))})},"extra-group_".concat(d))))),(0,W.jsx)(E.A,{showExtras:ll,selectedValues:J,handleChange:l=>{const d=String(null===l||void 0===l?void 0:l.addon_id);null!==J&&void 0!==J&&J.includes(d)?X((l=>l.filter((l=>l!==d)))):X((l=>[...l,d]))},addonCalculate:(l,d)=>{dl((i=>{var o;return{...i,stock:{...null===i||void 0===i?void 0:i.stock,addons:null===i||void 0===i||null===(o=i.stock)||void 0===o?void 0:o.addons.map((i=>(null===i||void 0===i?void 0:i.addon_id)===l?{...i,product:{...null===i||void 0===i?void 0:i.product,quantity:d}}:i))}}})),R((i=>i.map((i=>(null===i||void 0===i?void 0:i.addon_id)===l?{...i,product:{...null===i||void 0===i?void 0:i.product,quantity:d}}:i))))}}),(0,W.jsx)(e.A,{gutter:12,className:"mt-5",children:(0,W.jsx)(n.A,{span:24,children:(0,W.jsxs)(B.A,{children:[(0,W.jsx)(v.A,{type:"primary",icon:(0,W.jsx)(V.A,{}),onClick:()=>{1!==il&&(il<=(null===S||void 0===S?void 0:S.min_qty)||ol((l=>l-1)))},disabled:il===(null===S||void 0===S?void 0:S.min_qty)}),(null!==il&&void 0!==il?il:1)*(null!==(y=null===S||void 0===S?void 0:S.interval)&&void 0!==y?y:1),null===S||void 0===S||null===(j=S.unit)||void 0===j||null===(g=j.translation)||void 0===g?void 0:g.title,(0,W.jsx)(v.A,{type:"primary",icon:(0,W.jsx)(M.A,{}),onClick:()=>{il>=(null===S||void 0===S?void 0:S.quantity)||il>=(null===S||void 0===S?void 0:S.max_qty)||ol((l=>l+1))},disabled:il===(null===S||void 0===S?void 0:S.quantity)||il===(null===S||void 0===S?void 0:S.max_qty)})]})})})]})})},L=()=>{const{t:l}=(0,m.B)(),d=(0,S.s)(),{products:i,loading:o}=(0,r.d4)((l=>l.product),r.bN);return(0,W.jsxs)(W.Fragment,{children:[o&&(0,W.jsx)("div",{className:"loader",children:(0,W.jsx)(q.A,{})}),(0,W.jsx)("div",{className:"products-row order-items",children:null!==i&&void 0!==i&&i.length?null===i||void 0===i?void 0:i.map((i=>{var o,e,n;return(0,W.jsxs)(t.A,{className:"products-col",cover:(0,W.jsx)("img",{alt:(null===i||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title)||l("N/A"),src:(null===i||void 0===i?void 0:i.img)||"https://via.placeholder.com/150"}),onClick:()=>{var l;l=null===i||void 0===i?void 0:i.uuid,d.set("uuid",l)},children:[(0,W.jsx)(z.A,{title:(null===i||void 0===i||null===(e=i.translation)||void 0===e?void 0:e.title)||l("N/A")}),(0,W.jsx)("div",{className:"preview",children:(0,W.jsx)(M.A,{})}),null===i||void 0===i||null===(n=i.stocks)||void 0===n?void 0:n.map((l=>{var d,i;return(0,W.jsxs)("span",{className:null!==l&&void 0!==l&&l.bonus?"show-bonus":"d-none",children:[(0,W.jsx)(I.ob7,{})," ",null===l||void 0===l||null===(d=l.bonus)||void 0===d?void 0:d.value,"+",null===l||void 0===l||null===(i=l.bonus)||void 0===i?void 0:i.bonus_quantity]})}))]},null===i||void 0===i?void 0:i.id)})):(0,W.jsx)(e.A,{style:{width:"100%"},children:(0,W.jsx)(n.A,{span:24,children:(0,W.jsx)(C.A,{})})})}),!!d.get("uuid")&&(0,W.jsx)(Z,{uuid:d.get("uuid"),onCancel:()=>{d.reset("uuid")}})]})};var Q=i(8297),U=i(80905),G=i(37963),$=i(62572),K=i(66432);const R=()=>{const{t:l}=(0,m.B)(),d=(0,S.s)(),[i,o]=(0,a.useState)({shop:!1,brand:!1,category:!1}),e=(l,i)=>{d.set(l,i)};return(0,W.jsxs)(B.A,{wrap:!0,children:[(0,W.jsx)(Q.A,{defaultValue:d.get("search"),handleChange:l=>{e("search",l)},placeholder:l("product.search"),style:{width:200}}),(0,W.jsx)(U.j,{fetchOptions:l=>{let{page:d=1,search:i=""}=l;const e={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d};return G.A.getAll(e).then((l=>{var d;return o((d=>{var i,o;return{...d,brand:!(null===l||void 0===l||null===(i=l.meta)||void 0===i||null===(o=i.links)||void 0===o||!o.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>(0,K.A)(l)))}))},hasMore:null===i||void 0===i?void 0:i.brand,placeholder:l("select.brand"),defaultValue:d.get("brand_id"),onChange:l=>{e("brand_id",null===l||void 0===l?void 0:l.value)},style:{width:200}}),(0,W.jsx)(U.j,{fetchOptions:l=>{let{page:d=1,search:i=""}=l;const e={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d,type:"main"};return $.A.search(e).then((l=>{var d;return o((d=>{var i,o;return{...d,category:!(null===l||void 0===l||null===(i=l.meta)||void 0===i||null===(o=i.links)||void 0===o||!o.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>(0,K.A)(l)))}))},hasMore:null===i||void 0===i?void 0:i.category,placeholder:l("select.category"),defaultValue:d.get("category_id"),onChange:l=>{e("category_id",null===l||void 0===l?void 0:l.value)},style:{width:200}})]})},J=l=>{var d;let{orderLoading:i}=l;const o=(0,r.wA)(),e=(0,S.s)(),{data:n}=(0,r.d4)((l=>l.order),r.bN),v={shop_id:(null===n||void 0===n||null===(d=n.shop)||void 0===d?void 0:d.id)||void 0,search:e.get("search")||void 0,brand_id:e.get("brand_id")||void 0,category_id:e.get("category_id")||void 0,perPage:20,page:1,active:1};return(0,a.useEffect)((()=>{var l;return null!==n&&void 0!==n&&null!==(l=n.shop)&&void 0!==l&&l.id&&o((0,w.zv)(v)),()=>{}}),[null===n||void 0===n?void 0:n.id,null===v||void 0===v?void 0:v.shop_id,null===v||void 0===v?void 0:v.search,null===v||void 0===v?void 0:v.brand_id,null===v||void 0===v?void 0:v.category_id]),(0,W.jsxs)(t.A,{className:"order-add",children:[i&&(0,W.jsx)("div",{className:"loader",children:(0,W.jsx)(q.A,{})}),(0,W.jsx)(R,{}),(0,W.jsx)(N.A,{}),(0,W.jsx)(L,{})]})};var X=i(12916),ll=i(88810),dl=i(44070);const il=l=>{var d,i,o,e,t,u,s,r,c,h,p,y,j,g,A,f,_,b,q,N,w,S,C,z,I,T,P,F,D,O,H,E,Z,L,Q,U,G,$;let{item:K,data:R,handleChangeProductQuantity:J,handleDeleteProduct:il}=l;const{t:ol}=(0,m.B)(),[el,nl]=(0,a.useState)(null!==(d=null===K||void 0===K?void 0:K.quantity)&&void 0!==d?d:0),tl=(0,k.A)(el,300),vl=(l,d)=>{if("increment"===l){var i,o;if((null===K||void 0===K||null===(i=K.stock)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.max_qty)<d)return;nl((l=>l+1))}else if("decrement"===l){var e,n;if((null===K||void 0===K||null===(e=K.stock)||void 0===e||null===(n=e.product)||void 0===n?void 0:n.min_qty)>d||0===d)return;nl((l=>l-1))}};return(0,x.A)((()=>(J({...K,quantity:tl}),()=>{})),[tl]),(0,x.A)((()=>{var l;null!==K&&void 0!==K&&K.quantity&&(null===K||void 0===K?void 0:K.quantity)!==el&&nl(null!==(l=null===K||void 0===K?void 0:K.quantity)&&void 0!==l?l:0)}),[null===K||void 0===K?void 0:K.quantity]),(0,W.jsx)(n.A,{span:24,style:{border:"1px solid var(--input-border)",borderRadius:"12px",padding:"10px 15px",columnGap:"20px"},children:(0,W.jsxs)(B.A,{size:20,children:[(0,W.jsx)(ll.A,{image:null===K||void 0===K||null===(i=K.stock)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.img,id:null===K||void 0===K?void 0:K.stock_id}),(0,W.jsxs)(B.A,{direction:"vertical",size:15,children:[(0,W.jsx)("h3",{style:{margin:0},children:(null===K||void 0===K||null===(e=K.stock)||void 0===e||null===(t=e.product)||void 0===t||null===(u=t.translation)||void 0===u?void 0:u.title)||ol("N/A")}),!(null===K||void 0===K||!K.bonus)&&(0,W.jsx)(X.A,{color:"red",children:ol("bonus")}),!(null===K||void 0===K||null===(s=K.stock)||void 0===s||null===(r=s.stock_extras)||void 0===r||!r.length)&&(0,W.jsx)("div",{children:null===K||void 0===K||null===(c=K.stock)||void 0===c||null===(h=c.stock_extras)||void 0===h?void 0:h.map((l=>(0,W.jsx)(X.A,{children:(null===l||void 0===l?void 0:l.value)||ol("N/A")},null===l||void 0===l?void 0:l.id)))}),!(null===K||void 0===K||null===(p=K.addons)||void 0===p||!p.length)&&(0,W.jsx)("div",{children:null===K||void 0===K||null===(y=K.addons)||void 0===y?void 0:y.map((l=>{var d,i,o;return(0,W.jsx)(X.A,{children:"".concat((null===l||void 0===l||null===(d=l.product)||void 0===d||null===(i=d.translation)||void 0===i?void 0:i.title)||ol("N/A")," x ").concat(null!==(o=null===l||void 0===l?void 0:l.quantity)&&void 0!==o?o:0)},null===l||void 0===l?void 0:l.id)}))}),(0,W.jsxs)("div",{style:{display:"flex",columnGap:"10px",fontSize:"16px"},children:[!(null===K||void 0===K||!K.discount)&&(0,W.jsx)("span",{style:{textDecoration:"line-through",color:"orangered"},children:(0,Y.A)(null===K||void 0===K?void 0:K.price,null===R||void 0===R||null===(j=R.currency)||void 0===j?void 0:j.symbol,null===R||void 0===R||null===(g=R.currency)||void 0===g?void 0:g.position)}),(0,W.jsx)("span",{children:(0,Y.A)(null===K||void 0===K?void 0:K.total_price,null===R||void 0===R||null===(A=R.currency)||void 0===A?void 0:A.symbol,null===R||void 0===R||null===(f=R.currency)||void 0===f?void 0:f.position)})]}),(0,W.jsxs)(B.A,{children:[(0,W.jsx)(v.A,{icon:(0,W.jsx)(V.A,{}),onClick:()=>{vl("decrement",el-1)},disabled:(null===K||void 0===K||null===(_=K.stock)||void 0===_||null===(b=_.product)||void 0===b?void 0:b.min_qty)===el||!(null===K||void 0===K||!K.bonus)}),(0,W.jsxs)(B.A,{children:["before"===(null===K||void 0===K||null===(q=K.stock)||void 0===q||null===(N=q.product)||void 0===N||null===(w=N.unit)||void 0===w?void 0:w.position)&&(0,W.jsx)("span",{children:(null===K||void 0===K||null===(S=K.stock)||void 0===S||null===(C=S.product)||void 0===C||null===(z=C.unit)||void 0===z||null===(I=z.translation)||void 0===I?void 0:I.title)||ol("N/A")}),(null!==el&&void 0!==el?el:0)*(null!==(T=null===K||void 0===K||null===(P=K.stock)||void 0===P||null===(F=P.product)||void 0===F?void 0:F.interval)&&void 0!==T?T:1),"after"===(null===K||void 0===K||null===(D=K.stock)||void 0===D||null===(O=D.product)||void 0===O||null===(H=O.unit)||void 0===H?void 0:H.position)&&(0,W.jsx)("span",{children:(null===K||void 0===K||null===(E=K.stock)||void 0===E||null===(Z=E.product)||void 0===Z||null===(L=Z.unit)||void 0===L||null===(Q=L.translation)||void 0===Q?void 0:Q.title)||ol("N/A")})]}),(0,W.jsx)(v.A,{icon:(0,W.jsx)(M.A,{}),onClick:()=>{vl("increment",el+1)},disabled:(null===K||void 0===K||null===(U=K.stock)||void 0===U||null===(G=U.product)||void 0===G?void 0:G.max_qty)===el||(null===K||void 0===K||null===($=K.stock)||void 0===$?void 0:$.quantity)<=el||!(null===K||void 0===K||!K.bonus)}),(0,W.jsx)(v.A,{icon:(0,W.jsx)(dl.A,{}),onClick:()=>il(K),disabled:!(null===K||void 0===K||!K.bonus)})]})]})]})})},ol=l=>{var d,i,o;return{stock_id:null===l||void 0===l||null===(d=l.stock)||void 0===d?void 0:d.id,quantity:null===l||void 0===l?void 0:l.quantity,addons:null!==l&&void 0!==l&&null!==(i=l.addons)&&void 0!==i&&i.length?null===l||void 0===l||null===(o=l.addons)||void 0===o?void 0:o.map((l=>({stock_id:null===l||void 0===l?void 0:l.id,quantity:null===l||void 0===l?void 0:l.quantity}))):[]}},el=l=>{let{orderLoading:d}=l;const i=(0,r.wA)(),{orderItems:o,data:v}=(0,r.d4)((l=>l.order),r.bN),a=l=>{const d=ol(l);i((0,c.U$)(d))},u=l=>{const d=ol(l);i((0,c.Mx)(d))};return null!==o&&void 0!==o&&o.length?(0,W.jsxs)(t.A,{children:[d&&(0,W.jsx)("div",{className:"loader",children:(0,W.jsx)(q.A,{})}),(0,W.jsx)(e.A,{gutter:12,style:{display:"flex",flexDirection:"column",rowGap:"20px"},children:null===o||void 0===o?void 0:o.map(((l,d)=>(0,W.jsx)(il,{item:l,data:v,handleChangeProductQuantity:a,handleDeleteProduct:u},"".concat(null===l||void 0===l?void 0:l.id,"_").concat(d))))})]}):(0,W.jsxs)(t.A,{children:[d&&(0,W.jsx)("div",{className:"loader",children:(0,W.jsx)(q.A,{})}),(0,W.jsx)(e.A,{style:{width:"100%"},children:(0,W.jsx)(n.A,{span:24,children:(0,W.jsx)(C.A,{id:"nosell"})})})]})};var nl=i(99674),tl=i(5713),vl=i(53271),al=i(85842);const ul=l=>{let{form:d}=l;const{t:i}=(0,m.B)(),[e,t]=(0,a.useState)({user:!1,address:!1}),v=o.A.useWatch("deliveryDate",d);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(n.A,{span:24,children:(0,W.jsx)(o.A.Item,{name:"user",label:i("user"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(U.j,{hasMore:null===e||void 0===e?void 0:e.user,fetchOptions:async l=>{let{page:d=1,search:i=""}=l;const o={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d};return await vl.A.search(o).then((l=>(t((d=>{var i;return{...d,user:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),g(null===l||void 0===l?void 0:l.data))))},placeholder:i("select.user"),allowClear:!1})})}),(0,W.jsx)(n.A,{span:24,children:(0,W.jsx)(o.A.Item,{name:"address",label:i("address"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(U.j,{hasMore:null===e||void 0===e?void 0:e.address,fetchOptions:async l=>{let{page:d=1,search:i=""}=l;const o={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d};return await al.A.getAll(o).then((l=>{var d;return t((d=>{var i;return{...d,address:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>{var d,i,o,e,n,t,v,a,u;return{label:(null===l||void 0===l||null===(d=l.address)||void 0===d?void 0:d.address)||(null===l||void 0===l?void 0:l.title),value:"".concat((null===l||void 0===l||null===(i=l.address)||void 0===i?void 0:i.address)||(null===l||void 0===l?void 0:l.title),"_").concat((null===l||void 0===l||null===(o=l.location)||void 0===o?void 0:o.latitude)||(null===l||void 0===l||null===(e=l.location)||void 0===e?void 0:e[0]),"_").concat((null===l||void 0===l||null===(n=l.location)||void 0===n?void 0:n.longitude)||(null===l||void 0===l||null===(t=l.location)||void 0===t?void 0:t[1])),key:"".concat((null===l||void 0===l||null===(v=l.address)||void 0===v?void 0:v.address)||(null===l||void 0===l?void 0:l.title),"_").concat(null===l||void 0===l||null===(a=l.location)||void 0===a?void 0:a.latitude,"_").concat(null===l||void 0===l||null===(u=l.location)||void 0===u?void 0:u.longitude)}}))}))},placeholder:i("select.address"),allowClear:!1})})}),(0,W.jsx)(n.A,{span:12,children:(0,W.jsx)(o.A.Item,{name:"deliveryDate",label:i("delivery.date"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(tl.A,{placeholder:i("select.delivery.date"),format:"YYYY-MM-DD",className:"w-100",showToday:!1,disabledDate:l=>l&&l<f()().startOf("day")})})}),(0,W.jsx)(n.A,{span:12,children:(0,W.jsx)(o.A.Item,{name:"deliveryTime",label:i("delivery.time"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(tl.A,{placeholder:i("select.delivery.time"),format:"HH:mm",className:"w-100",showNow:!1,picker:"time",disabled:!v})})})]})};var sl=i(39236),rl=i(22276);const cl=l=>{let{form:d}=l;const{t:i}=(0,m.B)(),{data:e}=(0,r.d4)((l=>l.order),r.bN),[t,v]=(0,a.useState)({deliveryZone:!1,table:!1}),u=o.A.useWatch("deliveryZone",d);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(n.A,{span:12,children:(0,W.jsx)(o.A.Item,{name:"deliveryZone",label:i("delivery.zone"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(U.j,{hasMore:null===t||void 0===t?void 0:t.deliveryZone,fetchOptions:async l=>{var d;let{search:i,page:o=1}=l;const n={search:null!==i&&void 0!==i&&i.length?i:void 0,shop_id:null===e||void 0===e||null===(d=e.shop)||void 0===d?void 0:d.id,perPage:20,page:o};return await sl.A.getAll(n).then((l=>{var d;return v((d=>{var i;return{...d,deliveryZone:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>(0,K.A)(l)))}))},placeholder:i("select.delivery.zone"),allowClear:!1,onChange:()=>{d.setFieldsValue({table:void 0})}})})}),(0,W.jsx)(n.A,{span:12,children:(0,W.jsx)(o.A.Item,{name:"table",label:i("table"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(U.j,{hasMore:null===t||void 0===t?void 0:t.table,fetchOptions:async l=>{var d;let{search:o,page:n=1}=l;const t={search:null!==o&&void 0!==o&&o.length?o:void 0,shop_section_id:(null===u||void 0===u?void 0:u.value)||void 0,shop_id:null===e||void 0===e||null===(d=e.shop)||void 0===d?void 0:d.id,perPage:20,page:n};return await rl.A.getAll(t).then((l=>{var d;return v((d=>{var i;return{...d,table:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>({label:(null===l||void 0===l?void 0:l.name)||i("N/A"),value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id})))}))},placeholder:i("select.table"),allowClear:!1,refetchOnFocus:!0,disabled:!u})})})]})},hl=(l,d)=>{switch(l){case"delivery":return(0,W.jsx)(ul,{form:d});case"dine_in":return(0,W.jsx)(cl,{form:d});default:return null}},pl=l=>{let{form:d}=l;const{t:i}=(0,m.B)(),{data:v}=(0,r.d4)((l=>l.order),r.bN),u=(0,a.useMemo)((()=>y.fz.map(((l,d)=>({label:i(l),value:l,key:d})))),[null===v||void 0===v?void 0:v.id]),s=o.A.useWatch("deliveryType",d),c=o.A.useWatch("paymentType",d);return(0,x.A)((()=>("dine_in"===(null===s||void 0===s?void 0:s.value)&&"wallet"===(null===c||void 0===c?void 0:c.value)&&d.setFieldsValue({paymentType:null}),()=>{})),[null===s||void 0===s?void 0:s.value,null===c||void 0===c?void 0:c.value]),(0,W.jsx)(t.A,{children:(0,W.jsxs)(e.A,{gutter:12,children:[(0,W.jsx)(n.A,{span:24,children:(0,W.jsx)(o.A.Item,{name:"deliveryType",label:i("delivery.type"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(nl.A,{labelInValue:!0,options:u,placeholder:i("select.delivery.type")})})}),hl(null===s||void 0===s?void 0:s.value,d)]})})};var xl=i(17491);const yl=l=>{let{form:d}=l;const{t:i}=(0,m.B)(),[v,u]=(0,a.useState)({paymentType:!1}),s=o.A.useWatch("deliveryType",d);return(0,W.jsx)(t.A,{children:(0,W.jsxs)(e.A,{gutter:12,children:[(0,W.jsx)(n.A,{span:12,children:(0,W.jsx)(o.A.Item,{name:"currency",label:i("currency"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(nl.A,{placeholder:i("select.currency"),labelInValue:!0,disabled:!0})})}),(0,W.jsx)(n.A,{span:12,children:(0,W.jsx)(o.A.Item,{name:"paymentType",label:i("payment.type"),rules:[{required:!0,message:i("required")}],children:(0,W.jsx)(U.j,{placeholder:i("select.payment.type"),hasMore:null===v||void 0===v?void 0:v.paymentType,fetchOptions:async l=>{let{page:d=1,search:o=""}=l;const e={search:null!==o&&void 0!==o&&o.length?o:void 0,perPage:20,page:d};return await xl.A.getAll(e).then((l=>(u((d=>{var i;return{...d,paymentType:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l?void 0:l.data.filter((l=>"dine_in"===(null===s||void 0===s?void 0:s.value)?"cash"===l.tag:"cash"===l.tag||"wallet"===l.tag)).map((l=>({label:i(l.tag)||i("N/A"),value:null===l||void 0===l?void 0:l.tag,key:null===l||void 0===l?void 0:l.id}))))))},refetchOnFocus:!0,allowClear:!1})})})]})})},ml=l=>{let{orderLoading:d,form:i}=l;return d?(0,W.jsx)(t.A,{loading:d}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(pl,{form:i}),(0,W.jsx)(yl,{form:i})]})},jl=l=>{let{loading:d}=l;const{t:i}=(0,m.B)(),{data:o,totalPrices:v}=(0,r.d4)((l=>l.order),r.bN),u=(0,a.useCallback)((function(){var l,d;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,Y.A)(i,null===o||void 0===o||null===(l=o.currency)||void 0===l?void 0:l.symbol,null===o||void 0===o||null===(d=o.currency)||void 0===d?void 0:d.position)}),[null===o||void 0===o?void 0:o.id]);return(0,W.jsxs)(t.A,{children:[d&&(0,W.jsx)("div",{className:"loader",children:(0,W.jsx)(q.A,{})}),(0,W.jsx)(e.A,{gutter:12,children:(0,W.jsxs)(n.A,{span:24,children:[(0,W.jsxs)("div",{className:"flex",children:[(0,W.jsx)("h4",{style:{fontSize:"16px"},children:i("sub.total")}),(0,W.jsx)("h4",{style:{fontSize:"16px"},children:u(null===v||void 0===v?void 0:v.price)})]}),(0,W.jsxs)("div",{className:"flex",children:[(0,W.jsx)("h4",{style:{fontSize:"16px"},children:i("shop.tax")}),(0,W.jsx)("h4",{style:{fontSize:"16px"},children:u(null===v||void 0===v?void 0:v.total_shop_tax)})]}),(0,W.jsxs)("div",{className:"flex",children:[(0,W.jsx)("h4",{style:{fontSize:"16px"},children:i("delivery.fee")}),(0,W.jsx)("h4",{style:{fontSize:"16px"},children:u(null===v||void 0===v?void 0:v.delivery_fee)})]}),(0,W.jsxs)("div",{className:"flex",children:[(0,W.jsx)("h4",{style:{fontSize:"16px"},children:i("service.fee")}),(0,W.jsx)("h4",{style:{fontSize:"16px"},children:u(null===v||void 0===v?void 0:v.service_fee)})]}),(0,W.jsxs)("div",{className:"flex",children:[(0,W.jsx)("h4",{style:{fontSize:"16px"},children:i("discount")}),(0,W.jsx)("h4",{style:{fontSize:"16px",color:"orangered"},children:"- ".concat(u(null===v||void 0===v?void 0:v.total_discount))})]}),(0,W.jsxs)("div",{className:"flex",children:[(0,W.jsx)("h4",{style:{fontSize:"16px"},children:i("coupon")}),(0,W.jsx)("h4",{style:{fontSize:"16px",color:"orangered"},children:"- ".concat(u(null===v||void 0===v?void 0:v.coupon_price))})]}),(0,W.jsx)(N.A,{}),(0,W.jsxs)("div",{className:"flex",children:[(0,W.jsx)("h3",{style:{fontSize:"18px"},children:i("total.price")}),(0,W.jsx)("h3",{style:{fontSize:"18px"},children:u(null===v||void 0===v?void 0:v.total_price)})]})]})})]})};var gl=i(64498);const Al=()=>{var l,d;const i=(0,r.wA)(),j=(0,h.Zp)(),[A]=o.A.useForm(),{t:_}=(0,m.B)(),{id:q}=(0,h.g)(),{activeMenu:N}=(0,r.d4)((l=>l.menu),r.bN),{calculateProductsBody:w,data:S}=(0,r.d4)((l=>l.order),r.bN),[C,z]=(0,a.useState)(!1),[M,I]=(0,a.useState)(!1),[T,P]=(0,a.useState)(!1),[F,B]=(0,a.useState)(null),D=(0,a.useMemo)((()=>y.fz.map(((l,d)=>({label:_(l),value:l,key:d})))),[q]),O=(0,k.A)(w,300),Y=o.A.useWatch("deliveryType",A),H=o.A.useWatch("address",A),E=null===(l=o.A.useWatch("address",A))||void 0===l||null===(d=l.value)||void 0===d?void 0:d.split("_");(0,a.useEffect)((()=>(Z(),()=>{})),[q]),(0,x.A)((()=>(N.refetch&&Z(),()=>{})),[N.refetch]),(0,x.A)((()=>(null!==S&&void 0!==S&&S.id&&!F&&V(),()=>{})),[null===S||void 0===S?void 0:S.id,O,null===H||void 0===H?void 0:H.value]);const V=async function(){const l=(()=>{var l,d,i,o,e;const n={products:null===w||void 0===w||null===(l=w.filter((l=>!(null!==l&&void 0!==l&&l.bonus))))||void 0===l?void 0:l.map((l=>{var d;return{...l,addons:null!==l&&void 0!==l&&null!==(d=l.addons)&&void 0!==d&&d.length?null===l||void 0===l?void 0:l.addons:void 0}})),currency_id:null===S||void 0===S||null===(d=S.currency)||void 0===d?void 0:d.id,coupon:(null===S||void 0===S||null===(i=S.coupon)||void 0===i?void 0:i.name)||void 0,shop_id:null===S||void 0===S||null===(o=S.shop)||void 0===o?void 0:o.id,type:(null===Y||void 0===Y?void 0:Y.value)||(null===S||void 0===S?void 0:S.delivery_type),tips:null!==(e=null===S||void 0===S?void 0:S.tips)&&void 0!==e?e:void 0,address:null!==E&&void 0!==E&&E.length?{latitude:null===E||void 0===E?void 0:E[(null===E||void 0===E?void 0:E.length)-2],longitude:null===E||void 0===E?void 0:E[(null===E||void 0===E?void 0:E.length)-1]}:null!==S&&void 0!==S&&S.location?null===S||void 0===S?void 0:S.location:void 0};return b().stringify(n,{addQueryPrefix:!0})})();P(!0),await s.A.calculate(l).then((l=>{var d,o,e;i((0,c.pe)({...null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.data,stocks:void 0,shop:void 0})),i((0,c.F1)(null===l||void 0===l||null===(o=l.data)||void 0===o||null===(e=o.data)||void 0===e?void 0:e.stocks))})).finally((()=>{P(!1)}))},Z=()=>{(async l=>{z(!0),await s.A.getById(l).then((l=>{var d,o,e,n,t,v,a,u,s,h,p,x,y,m,j,b,k,q,N,w,S,C,z,M,I,T,P,F,B,O,Y,H,E,V,W,Z,L,Q,U,G,$,K,R,J,X,ll,dl,il,ol,el,nl,tl,vl,al,ul;const sl={deliveryType:D.find((d=>{var i;return d.value===(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.delivery_type)})),currency:{label:"".concat(null===l||void 0===l||null===(d=l.data)||void 0===d||null===(o=d.currency)||void 0===o?void 0:o.title," ").concat(null===l||void 0===l||null===(e=l.data)||void 0===e||null===(n=e.currency)||void 0===n?void 0:n.symbol),value:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(v=t.currency)||void 0===v?void 0:v.id,key:null===l||void 0===l||null===(a=l.data)||void 0===a||null===(u=a.currency)||void 0===u?void 0:u.id},paymentType:null!==l&&void 0!==l&&null!==(s=l.data)&&void 0!==s&&null!==(h=s.transaction)&&void 0!==h&&h.payment_system?{label:_(null===l||void 0===l||null===(p=l.data)||void 0===p||null===(x=p.transaction)||void 0===x||null===(y=x.payment_system)||void 0===y?void 0:y.tag)||_("N/A"),value:null===l||void 0===l||null===(m=l.data)||void 0===m||null===(j=m.transaction)||void 0===j||null===(b=j.payment_system)||void 0===b?void 0:b.tag,key:null===l||void 0===l||null===(k=l.data)||void 0===k||null===(q=k.transaction)||void 0===q||null===(N=q.payment_system)||void 0===N?void 0:N.id}:void 0,user:g(null===l||void 0===l||null===(w=l.data)||void 0===w?void 0:w.user),address:null!==l&&void 0!==l&&null!==(S=l.data)&&void 0!==S&&S.address?{label:null===l||void 0===l||null===(C=l.data)||void 0===C||null===(z=C.address)||void 0===z?void 0:z.address,value:"".concat(null===l||void 0===l||null===(M=l.data)||void 0===M||null===(I=M.address)||void 0===I?void 0:I.address,"_").concat(null===l||void 0===l||null===(T=l.data)||void 0===T||null===(P=T.location)||void 0===P?void 0:P.latitude,"_").concat(null===l||void 0===l||null===(F=l.data)||void 0===F||null===(B=F.location)||void 0===B?void 0:B.longitude),key:"".concat(null===l||void 0===l||null===(O=l.data)||void 0===O||null===(Y=O.address)||void 0===Y?void 0:Y.address,"_").concat(null===l||void 0===l||null===(H=l.data)||void 0===H||null===(E=H.location)||void 0===E?void 0:E.latitude,"_").concat(null===l||void 0===l||null===(V=l.data)||void 0===V||null===(W=V.location)||void 0===W?void 0:W.longitude)}:null,deliveryDate:null!==l&&void 0!==l&&null!==(Z=l.data)&&void 0!==Z&&Z.delivery_date?f()(null===l||void 0===l||null===(L=l.data)||void 0===L?void 0:L.delivery_date,"YYYY-MM-DD"):null,deliveryTime:null!==l&&void 0!==l&&null!==(Q=l.data)&&void 0!==Q&&Q.delivery_time?f()(null===l||void 0===l||null===(U=l.data)||void 0===U?void 0:U.delivery_time,"HH:mm"):null,table:{label:(null===l||void 0===l||null===(G=l.data)||void 0===G||null===($=G.table)||void 0===$?void 0:$.name)||_("N/A"),value:null===l||void 0===l||null===(K=l.data)||void 0===K||null===(R=K.table)||void 0===R?void 0:R.id,key:null===l||void 0===l||null===(J=l.data)||void 0===J||null===(X=J.table)||void 0===X?void 0:X.id},deliveryZone:{label:(null===l||void 0===l||null===(ll=l.data)||void 0===ll||null===(dl=ll.table)||void 0===dl||null===(il=dl.shop_section)||void 0===il||null===(ol=il.translation)||void 0===ol?void 0:ol.title)||_("N/A"),value:null===l||void 0===l||null===(el=l.data)||void 0===el||null===(nl=el.table)||void 0===nl||null===(tl=nl.shop_section)||void 0===tl?void 0:tl.id,key:null===l||void 0===l||null===(vl=l.data)||void 0===vl||null===(al=vl.table)||void 0===al||null===(ul=al.shop_section)||void 0===ul?void 0:ul.id}};A.setFieldsValue(sl),(0,r.vA)((()=>{var d,o;i((0,c.B_)(null===l||void 0===l?void 0:l.data)),i((0,c.Hl)(null===l||void 0===l||null===(d=l.data)||void 0===d||null===(o=d.details)||void 0===o?void 0:o.map((l=>{var d,i,o,e;return{stock_id:null===l||void 0===l||null===(d=l.stock)||void 0===d?void 0:d.id,quantity:null!==(i=null===l||void 0===l?void 0:l.quantity)&&void 0!==i?i:0,bonus:(null===l||void 0===l?void 0:l.bonus)||void 0,addons:null!==l&&void 0!==l&&null!==(o=l.addons)&&void 0!==o&&o.length?null===l||void 0===l||null===(e=l.addons)||void 0===e?void 0:e.map((l=>{var d;return{stock_id:(null===l||void 0===l?void 0:l.stock_id)||(null===l||void 0===l?void 0:l.id),quantity:null!==(d=null===l||void 0===l?void 0:l.quantity)&&void 0!==d?d:0}})):[]}}))))}))})).finally((()=>{z(!1)}))})(q),i((0,p.km)(N))};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(o.A,{form:A,name:"order-edit-form",layout:"vertical",onFinish:l=>{var d,o,e,n,t,v,a,r,h,p,x,y;const m=null===l||void 0===l||null===(d=l.address)||void 0===d||null===(o=d.value)||void 0===o?void 0:o.split("_"),j={shop_id:null===S||void 0===S||null===(e=S.shop)||void 0===e?void 0:e.id,coupon:(null===S||void 0===S||null===(n=S.coupon)||void 0===n?void 0:n.name)||void 0,currency_id:null===l||void 0===l||null===(t=l.currency)||void 0===t?void 0:t.value,payment_type:null===l||void 0===l||null===(v=l.paymentType)||void 0===v?void 0:v.value,delivery_type:null===l||void 0===l||null===(a=l.deliveryType)||void 0===a?void 0:a.value,products:null===w||void 0===w?void 0:w.map((l=>{var d;return{...l,addons:null!==l&&void 0!==l&&null!==(d=l.addons)&&void 0!==d&&d.length?null===l||void 0===l?void 0:l.addons:void 0}}))},g={user_id:null===l||void 0===l||null===(r=l.user)||void 0===r?void 0:r.value,address:{address:null===l||void 0===l||null===(h=l.address)||void 0===h?void 0:h.label,office:null,house:null,floor:null},location:{latitude:null===m||void 0===m?void 0:m[(null===m||void 0===m?void 0:m.length)-2],longitude:null===m||void 0===m?void 0:m[(null===m||void 0===m?void 0:m.length)-1]},delivery_date:null===l||void 0===l||null===(p=l.deliveryDate)||void 0===p?void 0:p.format("YYYY-MM-DD"),delivery_time:null===l||void 0===l||null===(x=l.deliveryTime)||void 0===x?void 0:x.format("HH:mm"),...j},A={table_id:(null===l||void 0===l||null===(y=l.table)||void 0===y?void 0:y.value)||void 0,...j},f="delivery"===(null===Y||void 0===Y?void 0:Y.value)?g:A;I(!0),s.A.update(q,f).then((d=>{var o;u.A.create(d.data.id,{payment_sys_id:null===l||void 0===l||null===(o=l.paymentType)||void 0===o?void 0:o.key}).then((()=>{var l;i((0,c.B_)({})),i((0,c.F1)([])),i((0,c.Hl)([])),i((0,c.pe)({})),B(null===d||void 0===d||null===(l=d.data)||void 0===l?void 0:l.id)})).finally((()=>{I(!1)}))})).catch((()=>{I(!1)}))},children:(0,W.jsxs)(e.A,{gutter:24,children:[(0,W.jsxs)(n.A,{span:16,children:[(0,W.jsx)(J,{orderLoading:C}),(0,W.jsx)(el,{orderLoading:C||T})]}),(0,W.jsx)(n.A,{span:8,children:(0,W.jsxs)("div",{style:{position:"sticky",top:"16px",right:0},children:[(0,W.jsx)(ml,{form:A}),(0,W.jsx)(jl,{loading:C||T}),(0,W.jsx)(t.A,{children:(0,W.jsx)(e.A,{gutter:12,children:(0,W.jsx)(n.A,{span:24,children:(0,W.jsx)(v.A,{type:"primary",htmlType:"submit",style:{minWidth:"100%"},loading:M,disabled:T,children:_("update")})})})})]})})]})}),!!F&&(0,W.jsx)(gl.A,{orderId:F,handleClose:()=>{B(null);const l="orders-board";i((0,p.EK)({...N,nextUrl:l})),j("/".concat(l))}})]})}}}]);