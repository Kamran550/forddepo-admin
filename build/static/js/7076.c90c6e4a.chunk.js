"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7076],{79406:(e,l,a)=>{a.d(l,{a:()=>r});var n=a(9950),i=a(95491),t=a.n(i),s=a(99674),d=a(90650),o=a(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:a=400,refetch:i=!1,...r}=e;const[c,u]=(0,n.useState)(!1),[v,m]=(0,n.useState)([]),h=(0,n.useMemo)((()=>t()((e=>{m([]),u(!0),l(e).then((e=>{m(e),u(!1)}))}),a)),[l,a]);return(0,o.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>h(""),filterOption:!1,onSearch:h,notFoundContent:c?(0,o.jsx)(d.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{h("")}})}},36790:(e,l,a)=>{a.d(l,{A:()=>i});var n=a(82371);const i={getAll:e=>n.A.get("dashboard/admin/kitchen",{params:e})}},56409:(e,l,a)=>{a.d(l,{A:()=>A});var n=a(9950),i=a(59233),t=a(20380),s=a(48538),d=a(55902),o=a(70030),r=a(71999),c=a(91854),u=a(11260),v=a(49348),m=a(88149),h=a(31281),p=a(81446),x=a(44414);function A(e){let{modal:l,handleCancel:a,onSuccess:A}=e;const[j]=i.A.useForm(),{t:g}=(0,o.B)(),y=(0,c.wA)(),[b,f]=(0,n.useState)(!1),[k,I]=(0,n.useState)(!1),{languages:q,defaultLang:N}=(0,c.d4)((e=>e.formLang),c.bN);(0,n.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.id&&(e=l.id,I(!0),u.A.getGroupById(e).then((e=>{const l=e.data;j.setFieldsValue({...l,...S(l)})})).finally((()=>I(!1))))}),[l]);function S(e){if(!e)return{};const{translations:l}=e,a=q.map((e=>{var a;return{["title[".concat(e.locale,"]")]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title}}));return Object.assign({},...a)}return(0,x.jsx)(t.A,{title:null!==l&&void 0!==l&&l.id?g("edit.extra.group"):g("add.extra.group"),visible:!!l,onCancel:a,footer:[(0,x.jsx)(s.A,{type:"primary",onClick:()=>j.submit(),loading:b,children:g("save")},"save-button-group"),(0,x.jsx)(s.A,{type:"default",onClick:a,children:g("cancel")},"cancel-button-group")],children:k?(0,x.jsx)(p.A,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsx)(r.A,{})}),(0,x.jsx)(i.A,{layout:"vertical",name:"extra-group",form:j,onFinish:e=>{const n={title:(0,h.A)(q,e),type:"text"};null!==l&&void 0!==l&&l.id?function(e,l){f(!0),u.A.updateGroup(e,l).then((()=>{v.oR.success(g("successfully.updated")),y((0,m.Nj)()),a()})).finally((()=>f(!1)))}(null===l||void 0===l?void 0:l.id,n):function(e){f(!0),u.A.createGroup(e).then((()=>{v.oR.success(g("successfully.created")),a(),y((0,m.Nj)()),A&&A()})).finally((()=>f(!1)))}(n)},children:q.map((e=>(0,x.jsx)(i.A.Item,{rules:[{required:e.locale===N,message:g("required")}],name:"title[".concat(e.locale,"]"),label:g("title"),hidden:e.locale!==N,children:(0,x.jsx)(d.A,{placeholder:g("title")})},"title"+e.locale)))})]})})}},82615:(e,l,a)=>{a.d(l,{A:()=>j});var n=a(59233),i=a(55902),t=a(20380),s=a(48538),d=a(9950),o=a(25825),r=a(70030),c=a(91854),u=a(49348),v=a(32599),m=a(62466),h=a(43999),p=a(11260),x=a(47992),A=a(44414);function j(e){let{modal:l,handleCancel:a,onSuccess:j,groupId:g}=e;const[y]=n.A.useForm(),{t:b}=(0,r.B)(),f=(0,c.wA)(),[k,I]=(0,d.useState)(!1),[q,N]=(0,d.useState)("text"),[S,C]=(0,d.useState)(null),[w,_]=(0,d.useState)(""),{extraGroups:F}=(0,c.d4)((e=>e.extraGroup),c.bN);(0,d.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,a,n;N(l.group.type);const i={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(a=e.translation)||void 0===a?void 0:a.title,value:null===l||void 0===l||null===(n=l.group)||void 0===n?void 0:n.id},value:l.value};switch(l.group.type){case"color":_(l.value);break;case"image":C((0,m.A)(l.value))}y.setFieldsValue(i)}g&&y.setFieldsValue({extra_group_id:{value:g}})}),[l,g]);function P(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,A.jsx)(t.A,{title:null!==l&&void 0!==l&&l.id?b("edit.extra"):b("add.extra"),visible:!!l,onCancel:a,footer:[(0,A.jsx)(s.A,{type:"primary",onClick:()=>y.submit(),loading:k,children:b("save")}),(0,A.jsx)(s.A,{type:"default",onClick:a,children:b("cancel")})],children:(0,A.jsxs)(n.A,{name:"extra-form",layout:"vertical",form:y,onFinish:e=>{var n;console.log(e);const i={extra_group_id:null===e||void 0===e||null===(n=e.extra_group_id)||void 0===n?void 0:n.value,value:P(q,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{I(!0),p.A.updateValue(e,l).then((()=>{u.oR.success(b("successfully.updated")),a(),f((0,h.nZ)())})).finally((()=>I(!1)))})(l.id,i):(e=>{I(!0),p.A.createValue(e).then((()=>{u.oR.success(b("successfully.created")),a(),f((0,h.nZ)()),j&&j()})).finally((()=>I(!1)))})(i)},children:[(0,A.jsx)(n.A.Item,{name:"extra_group_id",label:b("extra.group"),hidden:!!g,rules:[{required:!0,message:""}],children:(0,A.jsx)(x.G,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),p.A.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,A.jsx)(n.A.Item,{name:"value",label:b("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,A.jsx)(o.Xq,{onChangeComplete:e=>_(e.hex),color:w,disableAlpha:!0});case"text":return(0,A.jsx)(i.A,{placeholder:b("enter.extra.value")});case"image":return(0,A.jsx)(v.A,{type:"extras",image:S,setImage:C,form:y,name:"value"});default:return""}})(q)})]})})}},59585:(e,l,a)=>{a.d(l,{A:()=>_});var n=a(9950),i=a(23263),t=a(59233),s=a(80737),d=a(48538),o=a(91854),r=a(47933),c=a(74623),u=a(70030),v=a(28429),m=a(49348),h=a(6604),p=a(20380),x=a(55902),A=a(63611),j=a(12916),g=a(7785),y=a(11260),b=a(56409),f=a(8750),k=a(37295),I=a(44414);const q=e=>{let{open:l,onClose:a,selectedExtras:i,onSelect:t}=e;const{t:s}=(0,u.B)(),[o,r]=(0,n.useState)([]),[c,v]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[q,N]=(0,n.useState)(""),S=(0,k.A)(q,500),[C,w]=(0,n.useState)(),_=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(!0);const a={valid:!0,perPage:10,search:e,page:l};y.A.getAllGroups(a).then((e=>{const l=e.data.map((e=>{var l;return{id:e.id,label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,shop_id:e.shop_id}}));r(l),w(e.meta)})).finally((()=>v(!1)))};return(0,n.useEffect)((()=>{l&&_(S)}),[l,S]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(p.A,{visible:l,onCancel:()=>{a(),N("")},footer:c?null:(0,I.jsx)(d.A,{type:"link",onClick:()=>h(!0),style:{paddingLeft:0},icon:(0,I.jsx)(f.A,{}),children:s("add.new.extra")}),children:[(0,I.jsx)(x.A,{className:"mt-3",value:q,onChange:e=>N(e.target.value)}),(0,I.jsx)(A.Ay,{loading:c,dataSource:o.filter((e=>!(null!==i&&void 0!==i&&i.some((l=>l.id===e.id))))),renderItem:e=>(0,I.jsx)(A.Ay.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,I.jsx)(j.A,{children:s("admin")}),style:{cursor:"pointer"},onClick:()=>{t(e)},children:e.label})}),(0,I.jsx)(g.A,{onChange:e=>{_(S,e)},current:null===C||void 0===C?void 0:C.current_page,total:null===C||void 0===C?void 0:C.total})]}),(0,I.jsx)(b.A,{modal:m,handleCancel:()=>h(!1),onSuccess:()=>_()})]})};var N=a(52765),S=a(90247),C=a(82615);const w=e=>{let{extra:l,onClose:a,onSelect:i}=e;const{t:t}=(0,u.B)(),[s,o]=(0,n.useState)(!1),[r,c]=(0,n.useState)([]),[v,m]=(0,n.useState)([]),[h,x]=(0,n.useState)(!1);function j(e){o(!0),y.A.getGroupById(e).then((e=>c(e.data.extra_values.map((e=>({label:e.value,value:e.id})))))).finally((()=>{o(!1)}))}return(0,n.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.value&&(j(l.value),m((null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e.map((e=>e.value)))||[]))}),[null===l||void 0===l?void 0:l.value]),console.log(l),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(p.A,{visible:!!l,onCancel:a,footer:[(0,I.jsx)(d.A,{onClick:a,children:t("cancel")}),!s&&r.length>0&&(0,I.jsx)(d.A,{onClick:()=>{const e=[];r.forEach((l=>{v.forEach((a=>{l.value===a&&e.push(l)}))})),i(null===l||void 0===l?void 0:l.value,e),a()},type:"primary",children:t("save")})],children:[(0,I.jsx)(N.A.Group,{value:v,onChange:e=>{m(e)},className:"w-100",children:0!==(null===r||void 0===r?void 0:r.length)||s?(0,I.jsx)(A.Ay,{dataSource:r,loading:s,renderItem:e=>(0,I.jsx)(A.Ay.Item,{children:(0,I.jsx)(N.A,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}):(0,I.jsx)(S.A,{})}),s?null:(0,I.jsx)(d.A,{type:"link",onClick:()=>x(!0),style:{paddingLeft:0},icon:(0,I.jsx)(f.A,{}),children:t("add.new.extra")})]}),l&&(0,I.jsx)(C.A,{modal:h,handleCancel:()=>x(!1),groupId:null===l||void 0===l?void 0:l.value,onSuccess:()=>j(null===l||void 0===l?void 0:l.value)})]})},_=e=>{var l;let{next:a,prev:p,isRequest:x}=e;const{t:A}=(0,u.B)(),j=(0,o.wA)(),{uuid:g,id:y}=(0,v.g)(),b=(0,v.Zp)(),{activeMenu:f}=(0,o.d4)((e=>e.menu),o.bN),[k,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[_,F]=(0,n.useState)((null===(l=f.data)||void 0===l?void 0:l.extras)||[]),[P,O]=(0,n.useState)(null),[B,E]=(0,n.useState)(!1);return(0,I.jsx)(i.A,{children:(0,I.jsxs)(t.A,{layout:"vertical",initialValues:{...f.data},onFinish:()=>{if(_.some((e=>{var l;return 0===(null===(l=e.values)||void 0===l?void 0:l.length)||!e.values})))return void m.oR.error(A("please.select.at.least.1.extra.value.for.each.extra"));const e=_.map((e=>e.value));if(e.sort(((e,l)=>e-l)),x)return j((0,c.Ok)({activeMenu:f,data:{...f.data,extras:_}})),void b("/product-request/".concat(y,"?step=2"),{state:{generate:B}});N(!0),r.A.extras(g,{extras:e}).then((()=>{j((0,c.Ok)({activeMenu:f,data:{...f.data,extras:_}})),a()})).finally((()=>N(!1)))},children:[(0,I.jsx)(q,{open:S,onClose:()=>C(!1),selectedExtras:_,onSelect:e=>{E(!0),F((l=>[...l,e])),C(!1)}}),(0,I.jsx)(w,{extra:P,onClose:()=>O(null),onSelect:(e,l)=>{E(!0),F((a=>a.map((a=>{if(a.value===e){const e=l.map((e=>{var l,a;const n=null===(l=f.data)||void 0===l||null===(a=l.extras)||void 0===a?void 0:a.flatMap((e=>e.values)).find((l=>l.value===e.value));return{...e,stock_id:null===n||void 0===n?void 0:n.stock_id}}));return{...a,values:e}}return a}))))}}),(0,I.jsx)(s.A,{className:"w-100",size:"middle",direction:"vertical",children:_.map((e=>{var l;return(0,I.jsxs)(s.A,{className:"w-100",direction:"vertical",children:[(0,I.jsxs)(s.A,{className:"w-100",wrap:!0,children:[(0,I.jsx)(d.A,{onClick:()=>O(e),ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(l=e.values)||void 0===l?void 0:l.map((l=>(0,I.jsxs)("div",{className:"extra-value",children:[null===l||void 0===l?void 0:l.label," ",(0,I.jsx)("button",{onClick:()=>{return a=e.value,n=l.value,E(!0),void F((e=>e.map((e=>e.value===a?{...e,values:(null===e||void 0===e?void 0:e.values.filter((e=>e.value!==n)))||[]}:e))));var a,n},type:"button",className:"extra-clear",children:(0,I.jsx)(h.lr4,{})})]},l.value)))]}),(0,I.jsx)(s.A,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,I.jsx)(d.A,{danger:!0,onClick:()=>{return l=e,E(!0),void F((e=>e.filter((e=>e.id!==l.id))));var l},type:"text",children:A("delete")})})]},e.id)}))}),(0,I.jsx)(d.A,{onClick:()=>C(!0),className:"w-100 my-3",type:"dashed",children:A("add.extra")}),(0,I.jsxs)(s.A,{className:"mt-3",children:[(0,I.jsx)(d.A,{onClick:p,children:A("prev")}),(0,I.jsx)(d.A,{type:"primary",htmlType:"submit",loading:k,children:A("next")})]})]})})}},57844:(e,l,a)=>{a.d(l,{A:()=>f});var n=a(9950),i=a(23263),t=a(91524),s=a(87094),d=a(41988),o=a(98412),r=a(80737),c=a(48538),u=a(90650),v=a(91854),m=a(28429),h=a(74623),p=a(92979),x=a(70030),A=a(47933),j=a(63620),g=a(49348),y=a(98890),b=a(44414);const f=e=>{var l,a,f,k,I,q,N,S,C,w,_,F,P,O,B,E,L;let{prev:M,isRequest:G}=e;const{t:R}=(0,x.B)(),{activeMenu:V}=(0,v.d4)((e=>e.menu),v.bN),{defaultLang:T,languages:Z}=(0,v.d4)((e=>e.formLang),v.bN),z=(0,m.Zp)(),U=(0,v.wA)(),[K,W]=(0,n.useState)({}),[X,D]=(0,n.useState)(null),{uuid:H}=(0,m.g)(),[J,Q]=(0,n.useState)(!1);function Y(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,a=Z.map((e=>{var a,n;return{["title[".concat(e.locale,"]")]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(n=l.find((l=>l.locale===e.locale)))||void 0===n?void 0:n.description}}));return Object.assign({},...a)}(0,n.useEffect)((()=>{G||function(e){D(!0),A.A.getById(e).then((e=>{const l={...e.data,...Y(e.data),properties:e.data.properties.map(((e,l)=>({id:l,["key[".concat(e.locale,"]")]:e.key,["value[".concat(e.locale,"]")]:e.value}))),translation:void 0,translations:void 0};W(l)})).finally((()=>D(!1)))}(H)}),[G]);const $=V.data,ee=G?V.data.model:K;return X?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(u.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(i.A,{children:[G&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(t.A,{bordered:!0,title:R("changed.info"),children:[(0,b.jsx)(t.A.Item,{label:"".concat(R("title")," (").concat(T,")"),span:3,children:$["title[".concat(T,"]")]}),(0,b.jsx)(t.A.Item,{label:"".concat(R("description")," (").concat(T,")"),span:3,children:$["description[".concat(T,"]")]}),(0,b.jsx)(t.A.Item,{label:R("shop"),span:1.5,children:null===$||void 0===$||null===(l=$.shop)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title}),(0,b.jsx)(t.A.Item,{label:R("category"),span:1.5,children:null===$||void 0===$||null===(f=$.category)||void 0===f?void 0:f.label}),(0,b.jsx)(t.A.Item,{label:R("brand"),span:1.5,children:null===$||void 0===$||null===(k=$.brand)||void 0===k?void 0:k.label}),(0,b.jsx)(t.A.Item,{label:R("unit"),span:1.5,children:null===$||void 0===$||null===(I=$.unit)||void 0===I?void 0:I.label}),(0,b.jsx)(t.A.Item,{label:R("images"),span:3,children:(0,b.jsx)(s.A,{gutter:12,children:null===$||void 0===$||null===(q=$.images)||void 0===q?void 0:q.map(((e,l)=>(0,b.jsx)(d.A,{children:(0,b.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+l)))})}),(0,b.jsx)(t.A.Item,{label:R("tax"),children:(null===$||void 0===$?void 0:$.tax)||0}),(0,b.jsx)(t.A.Item,{label:R("min.quantity"),children:null===$||void 0===$?void 0:$.min_qty}),(0,b.jsx)(t.A.Item,{label:R("max.quantity"),children:null===$||void 0===$?void 0:$.max_qty})]}),(0,b.jsx)(o.A,{className:"mt-4",children:(0,b.jsx)(o.A.Panel,{header:R("stocks"),children:null===$||void 0===$?void 0:$.stocks.map(((e,l)=>{var a;return e?(0,b.jsxs)(t.A,{bordered:!0,className:"mt-4",children:[(0,b.jsx)(t.A.Item,{label:R("price"),span:2,children:e.price}),(0,b.jsx)(t.A.Item,{label:R("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(a=e.ids)||void 0===a?void 0:a.map(((e,l)=>(0,b.jsx)(t.A.Item,{label:null===$||void 0===$?void 0:$.extras[l].label,children:null===e||void 0===e?void 0:e.label},"extra"+l)))]},"desc"+l):""}))},"stocks")})]}),(0,b.jsxs)(t.A,{bordered:!0,className:"mt-4",title:R("original.info"),children:[(0,b.jsx)(t.A.Item,{label:"".concat(R("title")," (").concat(T,")"),span:3,column:3,children:(null===(N=ee.translation)||void 0===N?void 0:N.title)||ee["title[".concat(T,"]")]}),(0,b.jsx)(t.A.Item,{label:"".concat(R("description")," (").concat(T,")"),span:3,column:3,children:(null===ee||void 0===ee||null===(S=ee.translation)||void 0===S?void 0:S.description)||ee["description[".concat(T,"]")]}),(0,b.jsx)(t.A.Item,{label:R("shop"),span:1.5,column:1.5,children:null===(C=ee.shop)||void 0===C||null===(w=C.translation)||void 0===w?void 0:w.title}),(0,b.jsx)(t.A.Item,{label:R("category"),span:1.5,column:1.5,children:null===(_=ee.category)||void 0===_||null===(F=_.translation)||void 0===F?void 0:F.title}),(0,b.jsx)(t.A.Item,{label:R("brand"),span:1.5,column:1.5,children:null===(P=ee.brand)||void 0===P?void 0:P.title}),(0,b.jsx)(t.A.Item,{label:R("unit"),span:1.5,column:1.5,children:null===(O=ee.unit)||void 0===O||null===(B=O.translation)||void 0===B?void 0:B.title}),(0,b.jsx)(t.A.Item,{label:R("images"),span:3,column:3,children:(0,b.jsx)(s.A,{gutter:12,children:null===ee||void 0===ee||null===(E=ee.galleries)||void 0===E?void 0:E.map(((e,l)=>(0,b.jsx)(d.A,{children:(0,b.jsx)("img",{width:80,alt:"product",src:j.sE+e.path})},"image"+l)))})}),(0,b.jsx)(t.A.Item,{span:3,column:3,label:R("tax"),children:ee.tax||0}),(0,b.jsx)(t.A.Item,{span:3,column:3,label:R("min.quantity"),children:ee.min_qty}),(0,b.jsx)(t.A.Item,{span:3,column:3,label:R("max.quantity"),children:ee.max_qty})]}),(0,b.jsx)(o.A,{className:"mt-4",children:(0,b.jsx)(o.A.Panel,{header:R("stocks"),children:null===(L=ee.stocks)||void 0===L?void 0:L.map(((e,l)=>e?(0,b.jsxs)(t.A,{bordered:!0,className:"mt-4",children:[(0,b.jsx)(t.A.Item,{label:R("price"),span:2,column:2,children:e.price}),(0,b.jsx)(t.A.Item,{label:R("quantity"),span:2,column:2,children:e.quantity}),e.extras.map(((e,l)=>{var a,n;return(0,b.jsx)(t.A.Item,{label:null===e||void 0===e||null===(a=e.group)||void 0===a||null===(n=a.translation)||void 0===n?void 0:n.title,span:2,column:2,children:null===e||void 0===e?void 0:e.value},"extra"+l)}))]},"desc"+l):""))},"stocks")}),(0,b.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,b.jsxs)(r.A,{children:[(0,b.jsx)(c.A,{onClick:M,children:R("prev")}),(0,b.jsx)(c.A,{loading:J,type:"primary",onClick:function(){const e={status:void 0},l="catalog/products";if(G&&V.data){Q(!0);const e={id:V.data.model_id,type:"product",data:V.data};y.A.requestChangeUpdate(V.data.request_id,e).then((()=>{z("/".concat(l),{state:{tab:"request"}}),g.oR.success(R("successfully.updated")),U((0,h.EK)({...V,nextUrl:l}))})).finally((()=>{Q(!1)}))}else U((0,h.EK)({...V,nextUrl:l})),U((0,p.j0)(e)),z("/".concat(l))},children:R("finish")})]})})]})}},44832:(e,l,a)=>{a.d(l,{A:()=>_});var n=a(9950),i=a(59233),t=a(87094),s=a(41988),d=a(23263),o=a(55902),r=a(56952),c=a(25933),u=a(48538),v=a(47992),m=a(58547),h=a(37963),p=a(62572),x=a(91854),A=a(47933),j=a(74623),g=a(63010),y=a(28429),b=a(70030),f=a(48970),k=a(15249),I=a(79406),q=a(8750),N=a(72345),S=a(36790),C=a(80905),w=a(44414);const _=e=>{var l,a,_;let{next:F,action_type:P="",isRequest:O}=e;const{t:B}=(0,b.B)(),[E]=i.A.useForm(),L=i.A.useWatch("shop",E),M=(0,x.wA)(),{uuid:G}=(0,y.g)(),R=(0,y.Zp)(),[V,T]=(0,n.useState)(null),{activeMenu:Z}=(0,x.d4)((e=>e.menu),x.bN),{defaultLang:z,languages:U}=(0,x.d4)((e=>e.formLang),x.bN),[K,W]=(0,n.useState)(null!==(l=Z.data)&&void 0!==l&&l.images?null===(a=Z.data)||void 0===a?void 0:a.images:[]),[X,D]=(0,n.useState)(!1),[H,J]=(0,n.useState)(Boolean(null===(_=Z.data)||void 0===_?void 0:_.kcal)),[Q,Y]=(0,n.useState)({kitchen:!1});(0,n.useEffect)((()=>{const e=E.getFieldsValue(!0);M((0,j.Ok)({activeMenu:Z,data:{...Z.data,...e}}))}),[]);const $=()=>{M((0,j.X4)({id:"category-add",url:"category/add",name:B("add.category")})),R("/category/add")};return(0,w.jsxs)(i.A,{layout:"vertical",form:E,initialValues:{active:!0,vegetarian:!0,...Z.data},onFinish:e=>{var l,a,n,i,t;D(!0);const s={...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(l=e.brand)||void 0===l?void 0:l.value,category_id:(null===(a=e.category)||void 0===a?void 0:a.value)||e.category,shop_id:null===(n=e.shop)||void 0===n?void 0:n.value,kitchen_id:(null===e||void 0===e||null===(i=e.kitchen)||void 0===i?void 0:i.value)||void 0,unit_id:null===(t=e.unit)||void 0===t?void 0:t.value,kcal:H?String(e.kcal):void 0,carbs:H?String(e.carbs):void 0,protein:H?String(e.protein):void 0,fats:H?String(e.fats):void 0,images:void 0,brand:void 0,category:void 0,shop:void 0,unit:void 0,kitchen:void 0,tax:e.tax||0,...Object.assign({},...K.map(((e,l)=>({["images[".concat(l,"]")]:e.name}))))};if(O)return M((0,j.Ok)({activeMenu:Z,data:{...Z.data,...s,images:K,brand:e.brand,category:e.category,kitchen:(null===e||void 0===e?void 0:e.kitchen)||void 0,shop:e.shop,unit:e.unit,tax:e.tax||0,title:{...Object.assign({},...U.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))},description:{...Object.assign({},...U.map((l=>({[l.locale]:e["description[".concat(l.locale,"]")]}))))}}})),void F();"edit"===P?function(e,l){A.A.update(G,l).then((()=>{M((0,j.Ok)({activeMenu:Z,data:{...e,...null===Z||void 0===Z?void 0:Z.data}})),F()})).catch((e=>T(e.response.data.params))).finally((()=>D(!1)))}(e,s):function(e,l){A.A.create(l).then((l=>{let{data:a}=l;M((0,j.W6)({id:"product-".concat(a.uuid),url:"product/".concat(a.uuid),name:B("add.product"),data:e,refetch:!1})),R("/product/".concat(a.uuid,"/?step=1"))})).catch((e=>T(e.response.data.params))).finally((()=>D(!1)))}(e,s)},children:[(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:16,children:(0,w.jsxs)(t.A,{children:[(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:B("basic.info"),children:(0,w.jsxs)(t.A,{children:[(0,w.jsx)(s.A,{span:24,children:U.map((e=>(0,w.jsx)(i.A.Item,{label:B("name"),name:"title[".concat(e.locale,"]"),rules:[{required:(null===e||void 0===e?void 0:e.locale)===z,message:B("required")},{type:"string",min:2,max:200,message:B("min.2.max.200.chars")}],hidden:e.locale!==z,children:(0,w.jsx)(o.A,{})},"name"+e.id)))}),(0,w.jsx)(s.A,{span:24,children:U.map((e=>(0,w.jsx)(i.A.Item,{label:B("description"),name:"description[".concat(e.locale,"]"),rules:[{required:(null===e||void 0===e?void 0:e.locale)===z,message:B("required")},{type:"string",min:2,max:200,message:B("min.2.max.200.chars")}],hidden:e.locale!==z,children:(0,w.jsx)(k.A,{rows:3})},"description"+e.id)))})]})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:B("pricing"),children:(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{label:B("min.qty"),name:"min_qty",rules:[{required:!0,message:B("required")}],children:(0,w.jsx)(r.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{label:B("max.qty"),name:"max_qty",rules:[{required:!0,message:B("required")}],children:(0,w.jsx)(r.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{label:B("tax"),name:"tax",rules:[{validator:(e,l)=>l&&(l<0||l>100)?Promise.reject(new Error(B("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,w.jsx)(r.A,{className:"w-100",addonAfter:"%"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{label:B("add.quantity.per.click"),name:"interval",rules:[{required:!0,message:B("required")},{type:"number",min:0,message:B("must.be.positive")}],help:null!==V&&void 0!==V&&V.interval?V.interval[0]:null,validateStatus:null!==V&&void 0!==V&&V.interval?"error":"success",children:(0,w.jsx)(r.A,{className:"w-100"})})})]})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:B("additions"),children:(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{label:B("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(c.A,{})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{label:B("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,w.jsx)(c.A,{})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{label:B("nutrition.".concat(H?"on":"off")),valuePropName:"checked",children:(0,w.jsx)(c.A,{checked:H,onChange:e=>J(e)})})})]})})}),H&&(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:B("nutritional.value.of.product"),children:(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{rules:[{required:!0,message:B("required")}],label:B("kcal"),name:"kcal",children:(0,w.jsx)(r.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{rules:[{required:!0,message:B("required")}],label:B("carbs"),name:"carbs",children:(0,w.jsx)(r.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{rules:[{required:!0,message:B("required")}],label:B("protein"),name:"protein",children:(0,w.jsx)(r.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(i.A.Item,{rules:[{required:!0,message:B("required")}],label:B("fats"),name:"fats",children:(0,w.jsx)(r.A,{min:0,className:"w-100"})})})]})})})]})}),(0,w.jsx)(s.A,{span:8,children:(0,w.jsxs)(t.A,{children:[(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:B("organization"),children:(0,w.jsxs)(t.A,{children:[!O&&(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(i.A.Item,{label:B("shop/restaurant"),name:"shop",rules:[{required:!0,message:B("required")}],children:(0,w.jsx)(I.a,{fetchOptions:async function(e){const l={search:null!==e&&void 0!==e&&e.length?e:void 0,perPage:20,page:1,active:1};return m.A.get(l).then((e=>e.data.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||B("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onChange:()=>{E.setFieldsValue({category:void 0,kitchen:void 0})}})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(i.A.Item,{label:B("category"),name:"category",rules:[{required:!0,message:B("required")}],children:(0,w.jsx)(N.v,{disabled:!(null!==L&&void 0!==L&&L.value),refetch:!0,fetchOptions:async function(e){const l={page:1,perPage:20,type:"main",search:null!==e&&void 0!==e&&e.length?e:void 0,shop_id:null===L||void 0===L?void 0:L.value,"statuses[0]":"pending","statuses[1]":"published",active:1};return p.A.selectPaginate(l).then((e=>e.data.map((e=>{var l,a,n;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||B("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,disabled:(null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.length)>0,children:null===e||void 0===e||null===(n=e.children)||void 0===n?void 0:n.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||B("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}}))))},dropdownRender:e=>(0,w.jsxs)(w.Fragment,{children:[e,(0,w.jsx)("div",{className:"p-1",children:(0,w.jsx)(u.A,{icon:(0,w.jsx)(q.A,{}),className:"w-100",onClick:$,children:B("add.category")})})]})})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(i.A.Item,{label:B("kitchen"),name:"kitchen",children:(0,w.jsx)(C.j,{allowClear:!1,fetchOptions:e=>{let{search:l,page:a=1}=e;const n={search:null!==l&&void 0!==l&&l.length?l:void 0,page:a,perPage:20,active:1,shop_id:null===L||void 0===L?void 0:L.value};return S.A.getAll(n).then((e=>{var l,a,n;return Y({...Q,kitchen:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<(null===e||void 0===e||null===(a=e.meta)||void 0===a?void 0:a.last_page)}),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||B("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:Q.kitchen,disabled:!(null!==L&&void 0!==L&&L.value)})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(i.A.Item,{label:B("brand"),name:"brand",children:(0,w.jsx)(v.G,{fetchOptions:async function(e){const l={page:1,perPage:20,type:"main",search:null!==e&&void 0!==e&&e.length?e:void 0,active:1};return h.A.getAll(l).then((e=>e.data.map((e=>({label:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.id)||B("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(i.A.Item,{label:B("unit"),name:"unit",rules:[{required:!0,message:B("required")}],children:(0,w.jsx)(v.G,{fetchOptions:function(e){const l={perPage:20,page:1,active:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return g.A.getAll(l).then((e=>{let{data:l}=e;return null===l||void 0===l?void 0:l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||B("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})})]})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:B("media"),children:(0,w.jsx)(t.A,{children:(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(i.A.Item,{name:"images",rules:[{required:!(null!==K&&void 0!==K&&K.length),message:B("required")}],children:(0,w.jsx)(f.A,{type:"products",imageList:K,setImageList:W,form:E,multiple:!0})})})})})})]})})]}),(0,w.jsx)(u.A,{type:"primary",htmlType:"submit",loading:X,children:B("next")})]})}},93567:(e,l,a)=>{a.d(l,{A:()=>S});var n=a(91854),i=a(9950),t=a(68387),s=a(20380),d=a(23263),o=a(80737),r=a(48538),c=a(70030),u=a(47933),v=a(49348),m=a(28429),h=a(74623),p=a(12203),x=a(24513),A=a(44070),j=a(35116),g=a(44414);const y=e=>{let{properties:l,editSelectedProperty:a,deleteProperty:n,loading:i=!1}=e;const{t:t}=(0,c.B)(),s=[{title:t("key"),dataIndex:"key",key:"key"},{title:t("value"),dataIndex:"value",key:"value"},{title:t("options"),key:"options",render:(e,l)=>(0,g.jsxs)(o.A,{children:[(0,g.jsx)(r.A,{type:"primary",icon:(0,g.jsx)(x.A,{}),onClick:()=>a(l)}),(0,g.jsx)(j.A,{type:"primary",danger:!0,icon:(0,g.jsx)(A.A,{}),onClick:()=>n(null===l||void 0===l?void 0:l.id)})]})}];return(0,g.jsx)(d.A,{loading:i,children:(0,g.jsx)(p.A,{dataSource:l,columns:s,pagination:!1})})};var b=a(59233),f=a(87094),k=a(41988),I=a(55902);const q=e=>{let{addNewProperty:l,loading:a=!1}=e;const{t:i}=(0,c.B)(),[s]=b.A.useForm(),{defaultLang:o,languages:u}=(0,n.d4)((e=>e.formLang),n.bN);return(0,g.jsx)(d.A,{loading:a,children:(0,g.jsx)(b.A,{form:s,layout:"vertical",onFinish:e=>{const a={key:null===e||void 0===e?void 0:e["key[".concat(o,"]")],value:null===e||void 0===e?void 0:e["value[".concat(o,"]")]},n=u.map((l=>({id:(0,t.P)(),locale:null===l||void 0===l?void 0:l.locale,key:(null===e||void 0===e?void 0:e["key[".concat(null===l||void 0===l?void 0:l.locale,"]")])||(null===a||void 0===a?void 0:a.key),value:(null===e||void 0===e?void 0:e["value[".concat(l.locale,"]")])||(null===a||void 0===a?void 0:a.value)})));l(n),s.resetFields()},children:(0,g.jsxs)(f.A,{gutter:12,children:[(0,g.jsx)(k.A,{span:8,children:u.map((e=>(0,g.jsx)(b.A.Item,{label:i("key"),name:"key[".concat((null===e||void 0===e?void 0:e.locale)||"en","]"),hidden:(null===e||void 0===e?void 0:e.locale)!==o,rules:[{required:(null===e||void 0===e?void 0:e.locale)===o,message:i("required")},{type:"string",min:2,max:200,message:i("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})},null===e||void 0===e?void 0:e.locale)))}),(0,g.jsx)(k.A,{span:8,children:u.map((e=>(0,g.jsx)(b.A.Item,{label:i("value"),name:"value[".concat((null===e||void 0===e?void 0:e.locale)||"en","]"),hidden:(null===e||void 0===e?void 0:e.locale)!==o,rules:[{required:(null===e||void 0===e?void 0:e.locale)===o,message:i("required")},{type:"string",min:2,max:200,message:i("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})},null===e||void 0===e?void 0:e.locale)))}),(0,g.jsx)(k.A,{children:(0,g.jsx)(b.A.Item,{label:" ",children:(0,g.jsx)(r.A,{type:"primary",htmlType:"submit",children:i("add")})})})]})})})},N=e=>{let{property:l,editProperty:a}=e;const{t:n}=(0,c.B)(),[i]=b.A.useForm();return(0,g.jsx)(d.A,{children:(0,g.jsx)(b.A,{form:i,layout:"vertical",onFinish:e=>{a({...l,...e})},initialValues:{key:null===l||void 0===l?void 0:l.key,value:null===l||void 0===l?void 0:l.value},children:(0,g.jsxs)(f.A,{gutter:12,children:[(0,g.jsx)(k.A,{span:24,children:(0,g.jsx)(b.A.Item,{label:n("key"),name:"key",rules:[{required:!0,message:n("required")},{type:"string",min:2,max:200,message:n("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})})}),(0,g.jsx)(k.A,{span:24,children:(0,g.jsx)(b.A.Item,{label:n("value"),name:"value",rules:[{required:!0,message:n("required")},{type:"string",min:2,max:200,message:n("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})})}),(0,g.jsx)(k.A,{span:24,children:(0,g.jsx)(r.A,{type:"primary",htmlType:"submit",className:"w-100",children:n("edit")})})]})})})},S=e=>{var l;let{prev:a,next:p,isRequest:x=!1}=e;const{t:A}=(0,c.B)(),{uuid:j}=(0,m.g)(),b=(0,n.wA)(),{defaultLang:f}=(0,n.d4)((e=>e.formLang),n.bN),{activeMenu:k}=(0,n.d4)((e=>e.menu),n.bN),[I,S]=(0,i.useState)(x&&(null===(l=k.data)||void 0===l?void 0:l.properties)||[]),[C,w]=(0,i.useState)(null),[_,F]=(0,i.useState)(!1),[P,O]=(0,i.useState)(!1);(0,i.useEffect)((()=>{x||B(j)}),[]);const B=e=>{F(!0),u.A.getById(e).then((e=>{var l,a;S(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.properties)||void 0===a?void 0:a.map((e=>({...e,id:(0,t.P)()}))))})).finally((()=>{F(!1)}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(q,{loading:_,addNewProperty:e=>{S([...I,...e])}}),(0,g.jsx)(y,{loading:_,properties:null===I||void 0===I?void 0:I.filter((e=>(null===e||void 0===e?void 0:e.locale)===f)),editSelectedProperty:w,deleteProperty:e=>{s.A.confirm({title:A("are.you.sure?"),okText:A("yes"),onOk:()=>{S((l=>l.filter((l=>l.id!==e))))}})}}),(0,g.jsx)(d.A,{children:(0,g.jsxs)(o.A,{children:[(0,g.jsx)(r.A,{onClick:a,disabled:_,children:A("prev")}),(0,g.jsx)(r.A,{type:"primary",onClick:()=>{const e={key:[],value:[]};if(null===I||void 0===I||I.map((l=>{e.key.push({[null===l||void 0===l?void 0:l.locale]:null===l||void 0===l?void 0:l.key}),e.value.push({[null===l||void 0===l?void 0:l.locale]:null===l||void 0===l?void 0:l.value})})),x)return b((0,h.Ok)({activeMenu:k,data:{...k.data,properties:I,props:e}})),void p();O(!0),u.A.properties(j,e).then((()=>{v.oR.success(A("successfully.updated")),p()})).finally((()=>{O(!1)}))},disabled:_,loading:P,children:A("next")})]})}),!!C&&(0,g.jsx)(s.A,{visible:!!C,onCancel:()=>{w(null)},footer:!1,children:(0,g.jsx)(N,{property:C,editProperty:e=>{S((l=>l.map((l=>l.id===e.id?e:l)))),w(null)}})})]})}},49326:(e,l,a)=>{a.d(l,{C:()=>n});const n=[{title:"product",content:"First-content"},{title:"product.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]}}]);