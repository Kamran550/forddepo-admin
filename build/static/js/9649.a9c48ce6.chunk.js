"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9649],{69649:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var l=a(9950),i=a(54909),n=a(28429),s=a(70030),d=a(34967),o=a(80737),r=a(72243),c=a(12916),u=a(48538),v=a(23263),h=a(12203),m=a(69554),p=a(24513),x=a(74623),g=a(91854),j=a(49348),A=a(76083),y=a(55386),b=a(28645),f=a(8168),w=a(88986),k=a(3462),_=a(99324),C=a(98890),q=a(59051),I=a.n(q),P=a(59233),S=a(20380),M=a(87094),T=a(41988),N=a(55902),B=a(44414);function K(e){let{data:t,handleCancel:a,handleOk:i,visible:n}=e;const{t:d}=(0,s.B)(),[o]=P.A.useForm(),[r,c]=(0,l.useState)(!1);return(0,B.jsx)(S.A,{title:d(t.title),visible:n,onCancel:a,footer:[(0,B.jsx)(u.A,{type:"primary",onClick:()=>o.submit(),loading:r,children:d("save")}),(0,B.jsx)(u.A,{type:"default",onClick:a,children:d("cancel")})],children:(0,B.jsx)(P.A,{layout:"vertical",onFinish:e=>{c(!0);const t={...e,status:"canceled"};i(t)},form:o,children:(0,B.jsx)(P.A.Item,{children:(0,B.jsx)(M.A,{className:"mt-4",children:(0,B.jsx)(T.A,{span:24,children:(0,B.jsx)(P.A.Item,{name:"status_note",label:d("note"),rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(d("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(d("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(d("required")))}],children:(0,B.jsx)(N.A.TextArea,{maxLength:250,showCount:!0})})})})})})})}const E={type:"category"};function Y(e){var t,a,i;let{parentId:d,type:q="main",activeTab:P="request"}=e;const{t:S}=(0,s.B)(),{setIsModalVisible:M}=(0,l.useContext)(y.o),[T,N]=(0,l.useState)(!1),[Y,z]=(0,l.useState)(!1),[O,D]=(0,l.useState)(null),F=(0,g.wA)(),H=(0,n.Zp)(),{activeMenu:R}=(0,g.d4)((e=>e.menu),g.bN),{data:L,meta:U,loading:V,params:X}=(0,g.d4)((e=>e.requestModels),g.bN),Z=R.data,{uuid:G}=(0,n.g)(),J={sort:null===Z||void 0===Z?void 0:Z.sort,column:null===Z||void 0===Z?void 0:Z.column,perPage:null===Z||void 0===Z?void 0:Z.perPage,page:null===Z||void 0===Z?void 0:Z.page,parent_id:d},[Q,W]=(0,l.useState)([{title:S("created.by"),dataIndex:"createdBy",key:"createdBy",is_show:!0,render:e=>(0,B.jsxs)("span",{children:[e.firstname," ",null===e||void 0===e?void 0:e.lastname," ",(0,B.jsx)("a",{href:"tel:".concat(null===e||void 0===e?void 0:e.phone),children:null===e||void 0===e?void 0:e.phone})]})},{title:S("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>I()(e).format("YYYY-MM-DD HH:mm")},{title:S("name"),dataIndex:"name",key:"name",is_show:!0,render:(e,t)=>{var a,l,i,n,s,d;return(0,B.jsxs)(o.A,{children:[null===t||void 0===t||null===(a=t.model)||void 0===a||null===(l=a.translation)||void 0===l?void 0:l.title," ",(0,B.jsx)(_.Kly,{})," ",null===t||void 0===t||null===(i=t.data)||void 0===i||null===(n=i.title)||void 0===n?void 0:n[null===t||void 0===t||null===(s=t.model)||void 0===s||null===(d=s.translation)||void 0===d?void 0:d.locale]]})}},{title:S("image"),dataIndex:"img",key:"img",is_show:!0,render:(e,t)=>{var a,l,i;return(0,B.jsxs)(o.A,{children:[(0,B.jsx)(r.A,{src:(0,m.A)(null===t||void 0===t||null===(a=t.model)||void 0===a?void 0:a.img),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0}),(0,B.jsx)(_.Kly,{}),(0,B.jsx)(r.A,{src:(0,m.A)(null===t||void 0===t||null===(l=t.data)||void 0===l||null===(i=l.images)||void 0===i?void 0:i.at(0)),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0})]})}},{title:S("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,B.jsx)("div",{children:"pending"===e?(0,B.jsx)(c.A,{color:"blue",children:S(e)}):"canceled"===e?(0,B.jsx)(c.A,{color:"error",children:S(e)}):(0,B.jsx)(c.A,{color:"cyan",children:S(e)})})},{title:S("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,t)=>(0,B.jsxs)(o.A,{children:[(0,B.jsx)(u.A,{icon:(0,B.jsx)(p.A,{}),onClick:()=>(e=>{F((0,x.X4)({url:"category-request/".concat(e.id),id:"request_edit",name:S("request.edit")})),H("/category-request/".concat(e.id),{state:{parentId:d,parentUuid:G}})})(t)}),(0,B.jsx)(u.A,{type:"primary",onClick:()=>{D([{id:t.id,status:"approved"}]),M(!0)},children:S("accept")}),(0,B.jsx)(u.A,{type:"primary",danger:!0,onClick:()=>{D([{id:t.id,status:"canceled"}]),N(!0)},children:S("decline")})]})}]);(0,l.useEffect)((()=>{R.refetch&&"request"===P&&(F((0,k.uj)(J)),F((0,x.km)(R)))}),[R.refetch]),(0,w.A)((()=>{"request"===P&&F((0,k.uj)(J))}),[P,R.data]);const $=e=>{z(!0);const t={status:null===O||void 0===O?void 0:O.at(0).status,status_note:null===e||void 0===e?void 0:e.status_note};C.A.changeStatus(null===O||void 0===O?void 0:O.at(0).id,t).then((()=>{j.oR.success(S("successfully.changed")),F((0,k.uj)(E)),M(!1),D(null)})).finally((()=>{N(!1),z(!1)}))},ee={selectedRowKeys:O,onChange:e=>{D(e)}};return(0,B.jsxs)(v.A,{title:S("requests"),extra:(0,B.jsx)(o.A,{wrap:!0,children:(0,B.jsx)(b.A,{columns:Q,setColumns:W})}),children:[(0,B.jsx)(h.A,{scroll:{x:!0},rowSelection:ee,columns:null===Q||void 0===Q?void 0:Q.filter((e=>e.is_show)),dataSource:L,pagination:{pageSize:X.perPage,page:(null===(t=R.data)||void 0===t?void 0:t.page)||1,total:U.total,defaultCurrent:null===(a=R.data)||void 0===a?void 0:a.page,current:null===(i=R.data)||void 0===i?void 0:i.page},rowKey:e=>e.key,onChange:function(e,t,a){const{pageSize:l,current:i}=e,{field:n,order:s}=a,d=(0,f.A)(s);F((0,x.Ok)({activeMenu:R,data:{...R.data,perPage:l,page:i,column:n,sort:d}}))},loading:V}),(0,B.jsx)(A.A,{click:$,text:S("change.status"),setText:D,loading:Y}),(0,B.jsx)(K,{data:{title:"decline"},visible:T,handleCancel:()=>N(!1),handleOk:$,laoding:Y})]})}function z(){var e,t;const{t:a}=(0,s.B)(),o=(0,n.zy)(),r=(0,g.wA)(),{activeMenu:c}=(0,g.d4)((e=>e.menu),g.bN),[u,v]=(0,l.useState)((null===(e=o.state)||void 0===e?void 0:e.tab)||"list");return(0,B.jsxs)(i.A,{defaultActiveKey:(null===(t=o.state)||void 0===t?void 0:t.tab)||"list",destroyInactiveTabPane:!0,onChange:e=>{r((0,x.Ms)(c)),v(e)},children:[(0,B.jsx)(i.A.TabPane,{tab:a("category.list"),children:(0,B.jsx)(d.A,{activeTab:u})},"list"),(0,B.jsx)(i.A.TabPane,{tab:a("requests"),children:(0,B.jsx)(Y,{activeTab:u})},"request")]})}}}]);