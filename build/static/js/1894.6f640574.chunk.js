"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1894],{80905:(e,t,l)=>{l.d(t,{j:()=>r});var s=l(9950),a=l(95491),n=l.n(a),i=l(99674),u=l(90650),o=l(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:l=400,hasMore:a,refetchOnFocus:r=!1,...d}=e;const[c,m]=(0,s.useState)(!1),[v,h]=(0,s.useState)([]),[p,x]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),[f,A]=(0,s.useState)(1),g=(0,s.useMemo)((()=>n()((e=>{h([]),j(e),m(!0),t({search:e}).then((e=>{h(e),A(2),m(!1)})).finally((()=>x(!1)))}),l)),[t,l,f]);return(0,o.jsxs)(i.A,{showSearch:!0,allowClear:!0,onPopupScroll:async e=>{const l=e.target;p||l.scrollTop+l.offsetHeight!==l.scrollHeight||a&&(x(!0),t({search:b,page:f}).then((e=>{A((e=>e+1)),h([...v,...e])})).finally((()=>x(!1))))},labelInValue:!0,filterOption:!1,onSearch:g,notFoundContent:c?(0,o.jsx)(u.A,{size:"small"}):"no results",onFocus:()=>{r?g(""):null!==v&&void 0!==v&&v.length||g("")},...d,children:[v.map(((e,t)=>(0,o.jsx)(i.A.Option,{value:e.value,children:e.label},t))),p&&(0,o.jsx)(i.A.Option,{children:(0,o.jsx)(u.A,{size:"small"})})]})}},41894:(e,t,l)=>{l.r(t),l.d(t,{default:()=>b});var s=l(9950),a=l(28429),n=l(49348),i=l(59233),u=l(23263),o=l(91854),r=l(74623),d=l(70030),c=l(59051),m=l.n(c),v=l(58358),h=l(39095),p=l(25183),x=l(44414);const b=()=>{const{t:e}=(0,d.B)(),{activeMenu:t}=(0,o.d4)((e=>e.menu),o.bN),l=(0,o.wA)(),[c]=i.A.useForm(),b=(0,a.Zp)(),{myShop:j}=(0,o.d4)((e=>e.myShop),o.bN);(0,s.useEffect)((()=>()=>{const e=c.getFieldsValue(!0);e.expired_at=JSON.stringify(null===e||void 0===e?void 0:e.expired_at),l((0,r.Ok)({activeMenu:t,data:e}))}),[]);return(0,x.jsx)(u.A,{title:e("add.bonus"),className:"h-100",children:(0,x.jsx)(p.A,{form:c,handleSubmit:s=>{const a={expired_at:m()(s.expired_at).format("YYYY-MM-DD"),status:s.status,type:"sum",value:s.value,bonus_stock_id:s.bonus_stock_id.value,bonus_quantity:s.bonus_quantity,bonusable_id:j.id},i="seller/bonus/shop";return h.A.create(a).then((()=>{n.oR.success(e("successfully.created")),(0,o.vA)((()=>{l((0,r.EK)({...t,nextUrl:i})),l((0,v.S)({}))})),b("/".concat(i))}))}})})}},25183:(e,t,l)=>{l.d(t,{A:()=>j});var s=l(9950),a=l(59233),n=l(87094),i=l(41988),u=l(56952),o=l(5713),r=l(25933),d=l(48538),c=l(59051),m=l.n(c),v=l(70030),h=l(91854),p=l(67231),x=l(80905),b=l(44414);function j(e){let{form:t,handleSubmit:l}=e;const{t:c}=(0,v.B)(),{activeMenu:j}=(0,h.d4)((e=>e.menu),h.bN),[f,A]=(0,s.useState)({bonusStock:!1}),[g,_]=(0,s.useState)(!1);return(0,b.jsxs)(a.A,{name:"bonus-form",layout:"vertical",onFinish:e=>{_(!0),l(e).finally((()=>_(!1)))},form:t,initialValues:{status:!0,...j.data,...(()=>{var e,t;if(null===(e=j.data)||void 0===e||!e.expired_at)return{};const l=JSON.parse(null===(t=j.data)||void 0===t?void 0:t.expired_at);return{expired_at:m()(l,"HH:mm:ss")}})()},className:"d-flex flex-column h-100",children:[(0,b.jsxs)(n.A,{gutter:12,children:[(0,b.jsx)(i.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("order_amount"),name:"value",rules:[{required:!0,message:c("required")},{type:"number",min:1,message:c("min.1")}],children:(0,b.jsx)(u.A,{className:"w-100"})})}),(0,b.jsx)(i.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(x.j,{fetchOptions:function(e){let{page:t,search:l}=e;const s={active:1,status:"published",page:t,search:null!==l&&void 0!==l&&l.length?l:void 0};return p.A.getStock(s).then((e=>{var t,l;return A({...f,bonusStock:(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.current_page)<=(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.last_page)}),e.data.map((e=>{var t,l,s,a,n;return{label:"".concat(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title," ").concat(null!==e&&void 0!==e&&null!==(s=e.extras)&&void 0!==s&&s.length?" => ".concat(null===e||void 0===e||null===(a=e.extras)||void 0===a||null===(n=a.map((e=>{var t,l;return"".concat(null===e||void 0===e||null===(t=e.group)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title,": ").concat(null===e||void 0===e?void 0:e.value)})))||void 0===n?void 0:n.join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:null===f||void 0===f?void 0:f.bonusStock,allowClear:!1})})}),(0,b.jsx)(i.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:c("required")},{type:"number",min:1,message:c("min.1")}],children:(0,b.jsx)(u.A,{className:"w-100"})})}),(0,b.jsx)(i.A,{span:12,children:(0,b.jsx)(a.A.Item,{name:"expired_at",label:c("expired.at"),rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(o.A,{className:"w-100",placeholder:"",disabledDate:e=>m()().add(-1,"days")>=e})})}),(0,b.jsx)(i.A,{span:12,children:(0,b.jsx)(a.A.Item,{label:c("active"),name:"status",valuePropName:"checked",children:(0,b.jsx)(r.A,{})})})]}),(0,b.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,b.jsx)("div",{className:"pb-5",children:(0,b.jsx)(d.A,{type:"primary",htmlType:"submit",loading:g,children:c("submit")})})})]})}}}]);