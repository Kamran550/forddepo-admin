"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2271],{17456:(e,t,l)=>{l.d(t,{A:()=>a});l(9950);const a=l.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},53774:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(83291);function n(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const d=null===(e=a.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,s=Number(l).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=n||(null===d||void 0===d?void 0:d.symbol)||"$";return"after"===(i||(null===d||void 0===d?void 0:d.position)||"before")?"".concat(s," ").concat(r):"".concat(r," ").concat(s)}},42271:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var a=l(12916),n=l(23263),i=l(48538),d=l(66362),s=l(12203),r=l(53774),o=l(59051),c=l.n(o),u=l(9950),p=l(70030),h=l(91854),v=l(74623),m=l(53271),y=l(59233),b=l(20380),x=l(87094),A=l(41988),f=l(56952),g=l(53496),j=l(81446),w=l(49348),k=l(17456),S=l(54826),C=l(70283),N=l(68873),I=l(17491),z=l(23327),F=l(44414);function _(e){var t,l,a;let{open:d,handleCancel:s,refetch:r}=e;const{t:o}=(0,p.B)(),c=(0,h.wA)(),{payments:v,loading:m}=(0,h.d4)((e=>e.payment),h.bN),{myShop:_}=(0,h.d4)((e=>e.myShop),h.bN),[M,Y]=(0,u.useState)(!1),[B,D]=(0,u.useState)({}),[q,E]=(0,u.useState)(null),[K,T]=(0,u.useState)(null),{payment_type:V}=(0,h.d4)((e=>e.globalSettings.settings),h.bN),[$]=y.A.useForm();(0,u.useEffect)((()=>{v.length||c((0,g.kK)()),async function(){await I.A.getById(_.id).then((e=>{let{data:t}=e;return E(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){I.A.getAll().then((e=>{let{data:t}=e;return T(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const G=e=>{switch(e){case"wallet":return(0,F.jsx)(N.c8K,{size:80});case"paypal":return(0,F.jsx)(S.SnG,{size:80});case"stripe":return(0,F.jsx)(C.kDV,{size:80});case"razorpay":return(0,F.jsx)(C.NVb,{size:80});case"paystack":return(0,F.jsx)("img",{src:k.A,alt:"img",width:"80",height:"80"})}};return(0,F.jsx)(b.A,{visible:d,title:o("wallet.topup"),onCancel:s,footer:[(0,F.jsx)(i.A,{type:"primary",disabled:m,htmlType:"submit",form:"payment",loading:M,children:o("save")},"save-btn"),(0,F.jsx)(i.A,{type:"default",onClick:s,children:o("cancel")},"cancel-btn")],children:m?(0,F.jsx)(j.A,{}):(0,F.jsx)(y.A,{layout:"vertical",id:"payment",onFinish:e=>{B.value?(Y(!0),z.A.topUp({payment_type:B.label,price:e.price}).then((e=>{let{data:t}=e;$.resetFields(),D({}),s(),r(),window.open(t.data.url)})).finally((()=>Y(!1)))):w.oR.warning(o("please.select.payment.type"))},children:(0,F.jsxs)(x.A,{gutter:12,children:[(0,F.jsx)(A.A,{span:24,children:(0,F.jsx)(y.A.Item,{name:"price",label:o("price"),rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("should.be.greater.than.0")}],children:(0,F.jsx)(f.A,{className:"w-100"})})}),null===(t="admin"===V?K:q)||void 0===t||null===(l=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===l||null===(a=l.filter((e=>"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===a?void 0:a.map(((e,t)=>(0,F.jsx)(A.A,{span:8,children:(0,F.jsxs)(n.A,{className:"payment-card ".concat((null===B||void 0===B?void 0:B.label)===e.label?"active":""),onClick:()=>{D(e)},children:[(0,F.jsx)("div",{className:"payment-icon",children:G(null===e||void 0===e?void 0:e.label)}),(0,F.jsx)("div",{className:"font-weight-bold mt-2",children:o(null===e||void 0===e?void 0:e.label)})]})},t)))]})})})}const M=()=>{var e;const[t,l]=(0,u.useState)(null),{t:o}=(0,p.B)(),y=(0,h.wA)(),[b,x]=(0,u.useState)(!1),[A,f]=(0,u.useState)(!1),{activeMenu:g}=(0,h.d4)((e=>e.menu),h.bN),{defaultCurrency:j}=(0,h.d4)((e=>e.currency),h.bN),w=(0,u.useCallback)((()=>{x(!0),m.A.profileShow().then((e=>{l(e.data)})).finally((()=>{x(!1)}))}),[]);(0,u.useEffect)((()=>{null!==g&&void 0!==g&&g.refetch&&w(),y((0,v.km)(g))}),[null===g||void 0===g?void 0:g.refetch]);const k=[{title:o("created.at"),dataIndex:"created_at",render:e=>c()(e).format("YYYY-MM-DD hh:mm")},{title:o("status"),dataIndex:"status",render:e=>(0,F.jsx)("div",{children:"paid"===e?(0,F.jsx)(a.A,{color:"cyan",children:e}):(0,F.jsx)(a.A,{color:"blue",children:e})})},{title:o("type"),dataIndex:"type",render:e=>"topup"===e?(0,F.jsx)(a.A,{color:"cyan",children:e}):(0,F.jsx)(a.A,{color:"error",children:e})},{title:o("note"),dataIndex:"note"}];return(0,F.jsxs)(n.A,{title:o("user.wallet"),extra:b?null:(0,F.jsx)(i.A,{onClick:()=>f(!0),children:o("top.up")}),children:[null!==t&&void 0!==t&&t.wallet?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(d.A.Title,{children:(0,r.A)(null===t||void 0===t?void 0:t.wallet.price,null===j||void 0===j?void 0:j.symbol,null===j||void 0===j?void 0:j.position)}),(0,F.jsx)(s.A,{loading:b,dataSource:null===t||void 0===t||null===(e=t.wallet)||void 0===e?void 0:e.histories,columns:k})]}):(0,F.jsx)(s.A,{dataSource:[],columns:k,loading:b}),(0,F.jsx)(_,{refetch:w,open:A,handleCancel:()=>f(!1)})]})}}}]);