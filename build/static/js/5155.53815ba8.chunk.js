(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5155],{72345:(e,t,l)=>{"use strict";l.d(t,{v:()=>d});var a=l(9950),s=l(90777),n=l(90650),i=l(95491),o=l.n(i),r=l(44414);const d=e=>{let{fetchOptions:t,refetch:l=!1,debounceTimeout:i=400,...d}=e;const[c,u]=(0,a.useState)(!1),[m,v]=(0,a.useState)([]),p=(0,a.useMemo)((()=>o()((e=>{v([]),u(!0),t(e).then((e=>{v(e),u(!1)}))}),i)),[]);return(0,r.jsx)(s.A,{showSearch:!0,labelInValue:!0,filterTreeNode:(e,t)=>{var l;if(t)return null===t||void 0===t||null===(l=t.label)||void 0===l?void 0:l.localeCompare(e)},treeLine:!0,onSearch:e=>{console.log("value",e),p(e)},filterOption:!1,treeData:c?[]:m,treeDefaultExpandAll:!0,onFocus:()=>{m.length&&!l||(u(!0),t().then((e=>{v(e),u(!1)})))},notFoundContent:c?(0,r.jsx)(n.A,{size:"small"}):"no results",...d})}},70948:(e,t,l)=>{"use strict";l.d(t,{A:()=>v});var a=l(97239),s=l(9950),n=l(39174),i=l(6566),o=l(83291),r=l(63620);const d=()=>{var e,t,l;const a=null===(e=o.M.getState())||void 0===e||null===(t=e.globalSettings)||void 0===t||null===(l=t.settings)||void 0===l?void 0:l.location;if(null!==a&&void 0!==a&&a.length){const e=null===a||void 0===a?void 0:a.split(",");return{lat:parseFloat(null===e||void 0===e?void 0:e[0]),lng:parseFloat(null===e||void 0===e?void 0:e[1])}}return{lat:r.it,lng:r.cz}};var c=l(44414);const u=(0,i.A)(),m=d(),v=(0,a.GoogleApiWrapper)({apiKey:u,libraries:["places"]})((e=>{var t,l;const[i,o]=(0,s.useState)(m),[r,d]=(0,s.useState)(e.triangleCoords?e.triangleCoords:[]),[u,v]=(0,s.useState)(!!e.triangleCoords),[p,g]=(0,s.useState)(null);e.setMerge(u);(0,s.useEffect)((()=>{g(!0)}),[]);const h=e.triangleCoords.map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));for(var x=new e.google.maps.LatLngBounds(i),A=0;A<h.length;A++)x.extend(h[A]);return(0,c.jsxs)("div",{className:"map-container",style:{height:500,width:"100%"},children:[(0,c.jsx)("button",{className:"map-button",type:"button",onClick:()=>{navigator.geolocation.getCurrentPosition((function(e){o({lat:e.coords.latitude,lng:e.coords.longitude})}))},children:(0,c.jsx)(n.uFi,{})}),(0,c.jsxs)(a.Map,{options:{minZoom:15,maxZoom:15},cursor:"pointer",onClick:(t,l,a)=>{g(!1);const{latLng:s}=a,n=s.lat(),i=s.lng();u?(d([]),e.settriangleCoords([{lat:n,lng:i}]),o({lat:n,lng:i}),v(!1)):e.settriangleCoords((e=>[...e,{lat:n,lng:i}]))},maxZoom:16,minZoom:2,google:e.google,initialCenter:m,center:i,onReady:function(e,t){t.setOptions({draggableCursor:"crosshair",draggingCursor:"grab"})},bounds:p&&x,className:"clickable",children:[null===(t=e.triangleCoords)||void 0===t?void 0:t.map(((t,l)=>(0,c.jsx)(a.Marker,{onClick:t=>(t=>{var l,a;v(!(null===e||void 0===e||!e.triangleCoords)),(null===(l=e.triangleCoords[0])||void 0===l?void 0:l.lat)===(null===(a=t.position)||void 0===a?void 0:a.lat)&&e.triangleCoords.length>1&&(d(e.triangleCoords),e.setLocation(e.triangleCoords),v(!0),g(!0))})(t),position:t,icon:{url:"https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg",scaledSize:new e.google.maps.Size(10,10)},className:"marker"},l))),null!==r&&void 0!==r&&r.length?(0,c.jsx)(a.Polygon,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===r||void 0===r?void 0:r.length):(0,c.jsx)(a.Polyline,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===(l=e.triangleCoords)||void 0===l?void 0:l.length)]})]})}))},71999:(e,t,l)=>{"use strict";l.d(t,{A:()=>d});var a=l(9950),s=l(17811),n=l(91854),i=l(82406),o=l(12437),r=l(44414);const d=()=>{const e=(0,n.wA)(),{languages:t,defaultLang:l}=(0,n.d4)((e=>e.formLang),n.bN);(0,a.useEffect)((()=>{o.A.getAllActive().then((t=>{let{data:l}=t;e((0,i.Nn)(l)),e((0,i.Qq)(l.find((e=>!(null===e||void 0===e||!e.default))).locale))}))}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.Ay.Group,{value:l,onChange:t=>{let{target:{value:l}}=t;e((0,i.Qq)(l))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,r.jsx)(s.Ay.Button,{value:e.locale,children:e.title},e.id)))})})}},78498:(e,t,l)=>{"use strict";l.d(t,{A:()=>h});var a=l(9950),s=l(97239);const n=l.p+"static/media/pin.0e41858db80c699cd8a2.png";var i=l(96011),o=l.n(i),r=l(63620);async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.CJ,l={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:t};return o().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{var t;let{data:l}=e;return null===(t=l.results[0])||void 0===t?void 0:t.formatted_address})).catch((e=>"not found"))}var c=l(39174),u=l(49348),m=l(70030),v=l(6566),p=l(44414);const g=(0,v.A)();const h=(0,s.GoogleApiWrapper)({apiKey:g,libraries:["places","geometry"]})((function(e){var t,l;const[i,o]=(0,a.useState)(),{t:r}=(0,m.B)(),v=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};o(t)}),(function(e){u.oR.warning(r("turn.on.gps"))}))};(0,a.useEffect)((()=>{v()}),[]);const h=[{lat:Number(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.lat)||0,lng:Number(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.lng)||0}];for(var x=new e.google.maps.LatLngBounds,A=0;A<h.length;A++)x.extend(h[A]);return(0,p.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,p.jsx)("button",{className:"map-button",type:"button",onClick:()=>{v(),i&&(async t=>{const l={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng};e.setLocation(l);const a=await d(l,g);e.setAddress(a)})(i)},children:(0,p.jsx)(c.uFi,{})}),(0,p.jsx)(s.Map,{cursor:"pointer",onClick:async(t,l,a)=>{const{latLng:s}=a,n={lat:s.lat(),lng:s.lng()};e.setLocation(n);const i=await d(n,g);e.setAddress(i)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,p.jsx)(s.Marker,{position:e.location,icon:{url:n,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},47992:(e,t,l)=>{"use strict";l.d(t,{G:()=>d});var a=l(9950),s=l(95491),n=l.n(s),i=l(99674),o=l(90650),r=l(44414);const d=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:s,...d}=e;const[c,u]=(0,a.useState)(!1),[m,v]=(0,a.useState)([]),p=(0,a.useMemo)((()=>n()((e=>{v([]),u(!0),t(e).then((e=>{v(e),u(!1)}))}),l)),[t,l]);return(0,r.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),s&&s()},notFoundContent:c?(0,r.jsx)(o.A,{size:"small"}):"no results",...d,options:m,onFocus:()=>{p("")}})}},34422:(e,t,l)=>{"use strict";l.d(t,{Q:()=>n});var a=l(59051),s=l.n(a);const n=[{title:"monday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"tuesday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"wednesday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"thursday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"friday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"saturday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")},{title:"sunday",disabled:!1,from:s()("01:00:00","HH:mm:ss"),to:s()("23:00:00","HH:mm:ss")}]},80415:(e,t,l)=>{"use strict";l.d(t,{Av:()=>c,HF:()=>s,HV:()=>r,LH:()=>a,No:()=>o,Qt:()=>i,fz:()=>d,g$:()=>n});const a={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},s=["progress","paid","canceled","rejected","refund"],n=["before","after"],i=["blue","red","gold","volcano","cyan","lime"],o=["new","accepted","cooking","ready","ended"],r=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],d=["dine_in","delivery","pickup"],c=["male","female"]},44851:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(96011),s=l.n(a),n=l(63620);async function i(e){let t={address:e,key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.CJ};return s().get("https://maps.googleapis.com/maps/api/geocode/json",{params:t}).then((e=>{let{data:t}=e;return t.results[0]})).catch((e=>"not found"))}},29597:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});l(63620);function a(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},6566:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});var a=l(83291),s=l(63620);const n=()=>{var e,t;const{google_map_key:l}=null===(e=a.M.getState())||void 0===e||null===(t=e.globalSettings)||void 0===t?void 0:t.settings;return l||s.CJ}},65820:(e,t,l)=>{"use strict";l.d(t,{s:()=>i});var a=l(28429),s=l(21215),n=l.n(s);const i=()=>{const e=(0,a.Zp)(),t=(0,a.zy)(),l=n().parse(t.search,{ignoreQueryPrefix:!0});return{values:l,set:(t,a)=>e({search:n().stringify({...l,[t]:a})}),reset:t=>{const a={...l};a[t]&&delete a[t],e({search:n().stringify({...a})})},clear:()=>e({search:n().stringify({})}),merge:t=>e({search:n().stringify({...l,...t})}),get:e=>l[e],setMultiple:t=>{const a={...l,...t};e({search:n().stringify(a)})},resetMultiple:t=>{const a={...l};t.forEach((e=>{a[e]&&delete a[e]})),e({search:n().stringify(a)})}}}},92457:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>de,steps:()=>re});var a=l(9950),s=l(86366),n=l(23263),i=l(91854),o=l(74623),r=l(71999),d=l(93966),c=l(70030),u=l(65820),m=l(81446),v=l(59233),p=l(80737),g=l(48538),h=l(90777),x=l(12916),A=l(87094),j=l(41988),y=l(55902),f=l(56952),b=l(99674),_=l(25933),k=l(47992),w=l(98591),S=l(78498),C=l(12598),N=l(48970),I=l(58974),H=l(72345),q=l(63620),F=l(84619),M=l(44851),L=l(80415),O=l(20735),z=l(44414);const{SHOW_ALL:B}=h.A,D=e=>{var t;let{logoImage:l,setLogoImage:s,backImage:o,setBackImage:r,form:d,location:u,setLocation:m,emailStatusOptions:g}=e;const{t:h}=(0,c.B)(),{activeMenu:D}=(0,i.d4)((e=>e.menu),i.bN),V=v.A.useWatch("categories",d),{defaultLang:P,languages:T}=(0,i.d4)((e=>e.formLang),i.bN),[Y,E]=(0,a.useState)(""),Q=(null===D||void 0===D||null===(t=D.data)||void 0===t?void 0:t.documents)||[],{placePredictions:Z,getPlacePredictions:W,isPlacePredictionsLoading:J}=(0,F.A)({apiKey:q.CJ,libraries:["places","geocode"]}),R=L.g$.map((e=>({label:h(e),value:e,key:e})));const G=e=>{if(e.children)if(V.some((t=>t.value===e.value))){const t=V.filter((t=>t.value!==e.value)),l=t.filter((t=>!e.children.some((e=>e.value===t.value))));d.setFieldsValue({categories:l})}else d.setFieldsValue({categories:V.concat([{label:e.label,value:e.value},...e.children.map((e=>({label:e.label,value:e.value})))])});else null!==V&&void 0!==V&&V.some((t=>t.value===e.value))?d.setFieldsValue({categories:V.filter((t=>t.value!==e.value))}):d.setFieldsValue({categories:V.concat([e.parent,{label:e.label,value:e.value}])})};return(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(n.A,{children:(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:4,children:(0,z.jsx)(v.A.Item,{label:h("logo.image"),children:(0,z.jsx)(N.A,{type:"shops/logo",imageList:l,setImageList:s,form:d,multiple:!1,name:"logo_img"})})}),(0,z.jsx)(j.A,{span:4,children:(0,z.jsx)(v.A.Item,{label:h("background.image"),children:(0,z.jsx)(N.A,{type:"shops/background",imageList:o,setImageList:r,form:d,multiple:!1,name:"background_img"})})}),(0,z.jsx)(j.A,{span:10,children:(0,z.jsx)(v.A.Item,{label:h("status.note"),name:"status_note",children:(0,z.jsx)(w.A,{rows:4})})}),(0,z.jsx)(j.A,{span:4,children:(0,z.jsx)(v.A.Item,{name:"status",label:h("status"),children:(0,z.jsx)(y.A,{disabled:!0})})})]})})}),(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(n.A,{title:h("general"),children:(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:12,children:T.map(((e,t)=>(0,z.jsx)(v.A.Item,{label:h("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===P,message:h("required")},{min:2,message:h("title.required")}],hidden:e.locale!==P,children:(0,z.jsx)(y.A,{})},"title"+t)))}),(0,z.jsx)(j.A,{span:12,children:T.map(((e,t)=>(0,z.jsx)(v.A.Item,{label:h("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===P,message:h("required")},{min:3,message:h("required")}],hidden:e.locale!==P,children:(0,z.jsx)(w.A,{rows:4})},"desc"+t)))}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{label:h("phone"),name:"phone",rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(f.A,{min:0,className:"w-100"})})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{label:h("shop.tags"),name:"tags",rules:[{required:!1,message:h("required")}],children:(0,z.jsx)(k.G,{mode:"multiple",fetchOptions:async function(e){const t={search:e};return I.A.getAllSeller(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:(null===(t=e.translation)||void 0===t?void 0:t.title)||"no name",value:e.id}}))}))},style:{minWidth:150}})})}),(0,z.jsx)(j.A,{span:8,hidden:!0,children:(0,z.jsx)(v.A.Item,{label:h("seller"),name:"user",rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(y.A,{})})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{label:h("categories"),name:"categories",rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(H.v,{treeCheckable:!0,tagRender:e=>{const{label:t,onClose:l}=e;return(0,z.jsx)(x.A,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClose:l,style:{marginRight:3},children:t})},showCheckedStrategy:B,treeCheckStrictly:!0,refetch:!0,onSelect:(e,t)=>G(t),onDeselect:(e,t)=>G(t),fetchOptions:async function(e){const t={search:e,type:"shop",active:1,lang:P};return C.A.selectPaginate(t).then((e=>{let{data:t}=e;return t.map((e=>{var t,l,a;return{label:(null===(t=e.translation)||void 0===t?void 0:t.title)||"no name",value:e.id,disabled:0===(null===(l=e.children)||void 0===l?void 0:l.length),children:null===(a=e.children)||void 0===a?void 0:a.map((t=>{var l,a;return{label:null===(l=t.translation)||void 0===l?void 0:l.title,value:t.id,parent:{label:(null===(a=e.translation)||void 0===a?void 0:a.title)||"no name",value:e.id}}}))}}))}))}})})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{name:"emailStatuses",label:h("order.statuses.for.email.notifications"),children:(0,z.jsx)(b.A,{mode:"multiple",options:g})})}),!(null===Q||void 0===Q||!Q.length)&&(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{label:h("uploaded.documents.for.verification"),children:(0,z.jsx)(p.A,{gap:"4px 0",wrap:!0,children:null===Q||void 0===Q?void 0:Q.map((e=>(0,z.jsx)("a",{href:null===e||void 0===e?void 0:e.path,target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)(x.A,{icon:(0,z.jsx)(O.A,{}),children:null===e||void 0===e?void 0:e.title})})))})})})]})})}),(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(n.A,{title:h("qr.menu.settings"),children:(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:6,children:(0,z.jsx)(v.A.Item,{name:"wifi_name",label:h("shop.wifi.name"),children:(0,z.jsx)(y.A,{className:"w-100"})})}),(0,z.jsx)(j.A,{span:6,children:(0,z.jsx)(v.A.Item,{name:"wifi_password",label:h("shop.wifi.password"),children:(0,z.jsx)(y.A,{className:"w-100"})})}),(0,z.jsx)(j.A,{span:6,children:(0,z.jsx)(v.A.Item,{label:h("order.payment"),name:"order_payment",rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(b.A,{options:R})})}),(0,z.jsx)(j.A,{children:(0,z.jsx)(v.A.Item,{name:"new_order_after_payment",label:h("new.order.after.payment"),valuePropName:"checked",children:(0,z.jsx)(_.A,{})})})]})})}),(0,z.jsx)(j.A,{span:8,children:(0,z.jsx)(n.A,{title:h("delivery"),children:(0,z.jsxs)(A.A,{gutter:8,children:[(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{name:"price",label:h("min.price"),rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(f.A,{className:"w-100"})})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{name:"price_per_km",label:h("price.per.km"),rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(f.A,{className:"w-100"})})})]})})}),(0,z.jsx)(j.A,{span:8,children:(0,z.jsx)(n.A,{title:h("delivery.time"),children:(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{name:"delivery_time_type",label:h("delivery_time_type"),rules:[{required:!0,message:h("required")}],children:(0,z.jsxs)(b.A,{className:"w-100",children:[(0,z.jsx)(b.A.Option,{value:"minute",label:h("minutes")}),(0,z.jsx)(b.A.Option,{value:"hour",label:h("hour")})]})})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{name:"delivery_time_from",label:h("delivery_time_from"),rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(f.A,{className:"w-100"})})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{name:"delivery_time_to",label:h("delivery_time_to"),rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(f.A,{className:"w-100"})})})]})})}),(0,z.jsx)(j.A,{span:8,children:(0,z.jsx)(n.A,{title:h("order.info"),children:(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{label:h("min.amount"),name:"min_amount",rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(f.A,{min:0,className:"w-100"})})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)(v.A.Item,{label:h("tax"),name:"tax",rules:[{required:!0,message:h("required")}],children:(0,z.jsx)(f.A,{min:0,addonAfter:"%",className:"w-100"})})})]})})}),(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(n.A,{title:h("address"),children:(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:12,children:T.map(((e,t)=>(0,z.jsx)(v.A.Item,{label:h("address"),name:"address[".concat(e.locale,"]"),rules:[{required:e.locale===P,message:h("required")}],hidden:e.locale!==P,children:(0,z.jsx)(b.A,{allowClear:!0,searchValue:Y,showSearch:!0,autoClearSearchValue:!0,loading:J,options:null===Z||void 0===Z?void 0:Z.map((e=>({label:e.description,value:e.description}))),onSearch:e=>{E(e),e.length>0&&W({input:e})},onSelect:async e=>{const t=await(0,M.A)(e);m({lat:null===t||void 0===t?void 0:t.geometry.location.lat,lng:null===t||void 0===t?void 0:t.geometry.location.lng})}})},"address"+t)))}),(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(S.A,{location:u,setLocation:m,setAddress:e=>d.setFieldsValue({["address[".concat(P,"]")]:e})})})]})})})]})};var V=l(29597);const P=e=>{var t,l,s,n,r,u,m,h,x;let{next:A}=e;const{t:j}=(0,c.B)(),[y]=v.A.useForm(),f=(0,i.wA)(),{activeMenu:b}=(0,i.d4)((e=>e.menu),i.bN),{settings:_}=(0,i.d4)((e=>e.globalSettings),i.bN),[k,w]=(0,a.useState)(null!==b&&void 0!==b&&null!==(t=b.data)&&void 0!==t&&t.location?{lat:parseFloat(null===b||void 0===b||null===(l=b.data)||void 0===l||null===(s=l.location)||void 0===s?void 0:s.latitude),lng:parseFloat(null===b||void 0===b||null===(n=b.data)||void 0===n||null===(r=n.location)||void 0===r?void 0:r.longitude)}:(0,V.A)(_)),[S,C]=(0,a.useState)(!1),{myShop:N}=(0,i.d4)((e=>e.myShop),i.bN),[I,H]=(0,a.useState)(null!==(u=b.data)&&void 0!==u&&u.logo_img?[null===(m=b.data)||void 0===m?void 0:m.logo_img]:[]),[q,F]=(0,a.useState)(null!==(h=b.data)&&void 0!==h&&h.background_img?[null===(x=b.data)||void 0===x?void 0:x.background_img]:[]),M=(0,a.useMemo)((()=>L.HV.map((e=>({label:j(e),value:e,key:e})))),[]);(0,a.useEffect)((()=>()=>{const e=y.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),f((0,o.Ok)({activeMenu:b,data:{...b.data,...e}}))}),[]);return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(v.A,{form:y,name:"basic",layout:"vertical",onFinish:e=>{var t,l,a,s,n;C(!0);const i=null!==e&&void 0!==e&&null!==(t=e.emailStatuses)&&void 0!==t&&t.length?Object.assign({},...null===e||void 0===e||null===(l=e.emailStatuses)||void 0===l?void 0:l.map(((e,t)=>({["email_statuses[".concat(t,"]")]:(null===e||void 0===e?void 0:e.value)||e})))):[],r={...e,"images[0]":null===(a=I[0])||void 0===a?void 0:a.name,"images[1]":null===(s=q[0])||void 0===s?void 0:s.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((e=>e.value)),user_id:e.user.value,visibility:Number(e.visibility),"location[latitude]":k.lat,"location[longitude]":k.lng,user:void 0,delivery_time:0,type:"shop"===N.type?"shop":"restaurant",tags:e.tags.map((e=>e.value)),wifi_name:(null===e||void 0===e?void 0:e.wifi_name)||"",wifi_password:(null===e||void 0===e?void 0:e.wifi_password)||"",order_payment:(null===e||void 0===e||null===(n=e.order_payment)||void 0===n?void 0:n.value)||(null===e||void 0===e?void 0:e.order_payment)||void 0,...i,emailStatuses:void 0,new_order_after_payment:null!==e&&void 0!==e&&e.new_order_after_payment?1:0};null===r||void 0===r||delete r.background_img,null===r||void 0===r||delete r.logo_img,null===r||void 0===r||delete r.emailStatuses,function(e,t){d.A.update(t).then((()=>{f((0,o.Ok)({activeMenu:b,data:e})),A()})).finally((()=>C(!1)))}(e,r)},initialValues:{visibility:!0,status:"new",...b.data},children:[(0,z.jsx)(D,{logoImage:I,setLogoImage:H,backImage:q,setBackImage:F,form:y,location:k,setLocation:w,emailStatusOptions:M}),(0,z.jsx)(p.A,{children:(0,z.jsx)(g.A,{type:"primary",htmlType:"submit",loading:S,children:j("next")})})]})})};var T=l(5713),Y=l(59051),E=l.n(Y),Q=l(82371);const Z={getById:e=>Q.A.get("dashboard/seller/shop-working-days/".concat(e)),create:e=>Q.A.post("dashboard/seller/shop-working-day",e,{}),update:(e,t)=>Q.A.put("dashboard/seller/shop-working-days/".concat(e),t,{}),delete:e=>Q.A.delete("dashboard/seller/shop-working-days",{params:e})},W={getById:e=>Q.A.get("dashboard/seller/shop-closed-dates/".concat(e)),create:e=>Q.A.post("dashboard/seller/shop-closed-dates",e,{}),update:(e,t)=>Q.A.put("dashboard/seller/shop-closed-dates/".concat(e),t,{}),delete:e=>Q.A.delete("dashboard/seller/shop-closed-dates",{params:e})};var J=l(28429),R=l(34422),G=l(9213),K=l(13239),U=l(94118),$=l(73242),X=l(50384);const ee=e=>{let{next:t,prev:l}=e;const[s]=v.A.useForm(),{t:r}=(0,c.B)(),[d,u]=(0,a.useState)([]),[h,y]=(0,a.useState)(new Array(7).fill(!1)),[f,b]=(0,a.useState)(!1),[k,w]=(0,a.useState)(!1),{myShop:S}=(0,i.d4)((e=>e.myShop),i.bN),C=(0,J.Zp)(),N=(0,i.wA)(),I=[{from:new Date(1900,4,18),to:new Date(E()().subtract(1,"days"))}],{activeMenu:H}=(0,i.d4)((e=>e.menu),i.bN),[q,F]=(0,a.useState)(!0);(0,a.useEffect)((()=>{s.setFieldsValue({working_days:R.Q}),S.uuid&&(w(!0),W.getById(S.uuid).then((e=>{u(e.data.closed_dates.filter((e=>e.day>E()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})),Z.getById(S.uuid).then((e=>{y(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&s.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:E()(e.from,"HH:mm:ss"),to:E()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>w(!1))))}),[]);const M=d&&d.length>0?(0,z.jsxs)(A.A,{children:[(0,z.jsx)(x.A,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:r("Your.existing.vacations")}),(0,z.jsxs)(j.A,{span:24,className:"mt-2",children:[d.slice(0,q?1:d.length).map(((e,t)=>(0,z.jsxs)(p.A,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,z.jsx)(j.A,{span:24,style:{fontSize:14,marginTop:"8px"},children:E()(e).format("YYYY-MM-DD")}),(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(x.A,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:()=>{return t=e,u(d.filter((e=>e!==t)));var t},children:r("remove")})})]},t))),(0,z.jsx)(g.A,{className:"mt-3 w-100",onClick:()=>{F(!q)},children:q?(0,z.jsx)(X.U29,{}):(0,z.jsx)(X.ZXT,{})})]})]}):(0,z.jsx)(x.A,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."}),L=(e,t)=>{const l=[];for(let a=e;a<t;a++)l.push(a);return l},O=()=>({disabledHours:()=>L(0,1),disabledMinutes:()=>L(0,0),disabledSeconds:()=>L(0,60)});return(0,z.jsx)(z.Fragment,{children:k?(0,z.jsx)(m.A,{}):(0,z.jsx)(v.A,{form:s,layout:"vertical",onFinish:e=>{b(!0);const t={dates:d?d.map((e=>E()(e).format("YYYY-MM-DD"))):void 0},l={dates:e.working_days.map((e=>({day:e.title,from:E()(e.from?e.from:"00").format("HH-mm"),to:E()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))},a="my-shop";W.update(S.uuid,t).then((()=>{N((0,o.EK)({...H,nextUrl:a})),C("/".concat(a)),N((0,$.v)())})).finally((()=>b(!1))),0!==e.working_days.length&&Z.update(S.uuid,l).then((()=>{N((0,o.EK)({...H,nextUrl:a})),C("/".concat(a)),N((0,$.v)())})).finally((()=>b(!1)))},children:(0,z.jsxs)(A.A,{children:[(0,z.jsx)(j.A,{span:13,children:(0,z.jsx)(n.A,{title:r("restaurant.working.days"),children:(0,z.jsx)(A.A,{gutter:8,children:(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(v.A.List,{name:"working_days",children:e=>(0,z.jsx)("div",{children:e.map(((e,t)=>(0,z.jsxs)(A.A,{gutter:12,align:"center",children:[(0,z.jsx)(j.A,{span:7,children:(0,z.jsx)(v.A.Item,{name:[t,"day"],children:(0,z.jsx)("span",{children:r(R.Q[t].title)})})}),h[e.key]?(0,z.jsx)(j.A,{span:13,className:"mt-2",children:(0,z.jsx)("span",{children:r("shop.closed")})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.A,{span:7,children:(0,z.jsx)(v.A.Item,{rules:[{required:!1===h[e.key]}],name:[t,"from"],children:(0,z.jsx)(T.A,{disabledTime:O,picker:"time",placeholder:r("start.time")})})}),(0,z.jsx)(j.A,{span:6,children:(0,z.jsx)(v.A.Item,{rules:[{required:!1===h[e.key]}],name:[t,"to"],children:(0,z.jsx)(T.A,{disabledTime:O,picker:"time",placeholder:r("end.time")})})})]}),(0,z.jsx)(j.A,{span:4,children:(0,z.jsx)(v.A.Item,{name:[t,"disabled"],valuePropName:"checked",children:(0,z.jsx)(_.A,{checkedChildren:(0,z.jsx)(K.A,{}),unCheckedChildren:(0,z.jsx)(U.A,{}),checked:h[e.key],onChange:()=>(e=>{const t=[...h];t[e]=!h[e],y(t)})(e.key)})})})]},e.key)))})})})})})}),(0,z.jsx)(j.A,{span:11,children:(0,z.jsxs)(n.A,{title:r("restaurant.closed.days"),children:[(0,z.jsx)("p",{children:"If you can't answer the buyer's questions in time and want to share this information with your buyers, you can add the dates here."}),(0,z.jsx)(v.A.Item,{rules:[{required:!1,message:r("required")}],children:(0,z.jsx)(G.hv,{className:"datepicker",mode:"multiple",disabled:I,min:1,selected:d,onSelect:u,footer:M,showOutsideDays:!0})})]})}),(0,z.jsx)(j.A,{span:24,children:(0,z.jsxs)(p.A,{children:[(0,z.jsx)(g.A,{type:"primary",htmlType:"submit",loading:f,children:r("next")}),(0,z.jsx)(g.A,{htmlType:"submit",onClick:()=>l(),children:r("prev")})]})})]})})})};var te=l(70948),le=l(51359);const ae={getById:e=>Q.A.get("rest/shop/delivery-zone/".concat(e)),create:e=>Q.A.post("dashboard/seller/delivery-zones",e,{})};var se=l(49348),ne=l(41397);const ie=e=>{let{next:t,prev:l}=e;const{t:s}=(0,c.B)(),[o]=v.A.useForm(),{settings:r}=(0,i.d4)((e=>e.globalSettings)),{activeMenu:d}=(0,i.d4)((e=>e.menu),i.bN),{myShop:u}=(0,i.d4)((e=>e.myShop),i.bN),h=(0,a.useMemo)((()=>{var e,t;return(0,ne.isArray)(null===r||void 0===r?void 0:r.default_delivery_zone)&&null!==r&&void 0!==r&&null!==(e=r.default_delivery_zone)&&void 0!==e&&e.length?null===r||void 0===r||null===(t=r.default_delivery_zone)||void 0===t?void 0:t.map((e=>({lng:null===e||void 0===e?void 0:e[0],lat:null===e||void 0===e?void 0:e[1]}))):[]}),[null===r||void 0===r?void 0:r.default_delivery_zone]),[x,y]=(0,a.useState)(h),[f,b]=(0,a.useState)(!1),[_,k]=(0,a.useState)(!1),[w,S]=(0,a.useState)(null);return(0,a.useEffect)((()=>{d.data&&(k(!0),ae.getById(null===u||void 0===u?void 0:u.id).then((e=>{var t,l,a,s;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(l=t.address)&&void 0!==l&&l.length&&y(null===(a=e.data)||void 0===a||null===(s=a.address)||void 0===s?void 0:s.map((e=>({lat:e[0],lng:e[1]}))))})).finally((()=>{k(!1)})))}),[d.data]),(0,z.jsx)(v.A,{form:o,name:"map",layout:"vertical",onFinish:()=>{if(x.length<3)return void se.oR.warning(s("place.selected.map"));if(!w)return void se.oR.warning(s("place.selected.map"));const e={shop_id:d.data.id,address:null===x||void 0===x?void 0:x.map((e=>({0:null===e||void 0===e?void 0:e.lat,1:null===e||void 0===e?void 0:e.lng})))};b(!0),ae.create(e).then((()=>{t()})).finally((()=>{b(!1)}))},initialValues:{},children:_?(0,z.jsx)(m.A,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(A.A,{children:(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(n.A,{title:s("delivery.zone"),children:(0,z.jsxs)(A.A,{gutter:12,children:[(0,z.jsx)(j.A,{span:24,className:"mb-3",children:(0,z.jsxs)(p.A,{children:[(0,z.jsx)(X.h6Q,{size:25}),(0,z.jsx)("p",{children:"Click this icon to start pin points in the map and connect them to draw a zone . Minimum 3 points required"})]})}),(0,z.jsx)(j.A,{span:12,children:(0,z.jsx)("img",{src:le,alt:"map gif",style:{object:"contain"}})}),(0,z.jsx)(j.A,{span:24,children:(0,z.jsx)(te.A,{triangleCoords:x,settriangleCoords:y,setMerge:S})})]})})})}),(0,z.jsxs)(p.A,{children:[(0,z.jsx)(g.A,{type:"primary",htmlType:"submit",loading:f,children:s("next")}),(0,z.jsx)(g.A,{htmlType:"submit",onClick:()=>l(),children:s("prev")})]})]})})},{Step:oe}=s.A,re=[{title:"shop",content:"First-content"},{title:"map",content:"Second-content"},{title:"delivery",content:"Third-content"}];function de(){var e;const{t:t}=(0,c.B)(),l=(0,i.wA)(),v=(0,u.s)(),p=Number((null===(e=v.values)||void 0===e?void 0:e.step)||0),{activeMenu:g}=(0,i.d4)((e=>e.menu),i.bN),{languages:h}=(0,i.d4)((e=>e.formLang),i.bN),[x,A]=(0,a.useState)(!1),j=e=>({items:e,uid:e,url:e,name:e});function y(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,l=h.map((e=>{var l,a,s;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,["description[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description,["address[".concat(e.locale,"]")]:null===(s=t.find((t=>t.locale===e.locale)))||void 0===s?void 0:s.address}}));return Object.assign({},...l)}(0,a.useEffect)((()=>{g.refetch&&(A(!0),d.A.get().then((e=>{var a,s,n,i,r,d,c,u,m,v,p,h,x,A;const f={...e.data,...y(e.data),logo_img:j(e.data.logo_img),background_img:j(e.data.background_img),user:{label:e.data.seller.firstname+" "+(e.data.seller.lastname||""),value:e.data.seller.id},delivery_time_from:(null===(a=e.data)||void 0===a?void 0:a.delivery_time.from)||0,delivery_time_to:(null===(s=e.data)||void 0===s?void 0:s.delivery_time.to)||0,delivery_time_type:null===(n=e.data)||void 0===n?void 0:n.delivery_time.type,price:(null===(i=e.data)||void 0===i?void 0:i.price)||0,price_per_km:(null===(r=e.data)||void 0===r?void 0:r.price_per_km)||0,min_amount:(null===(d=e.data)||void 0===d?void 0:d.min_amount)||0,tax:(null===(c=e.data)||void 0===c?void 0:c.tax)||0,percentage:(null===(u=e.data)||void 0===u?void 0:u.percentage)||0,categories:null===(m=e.data)||void 0===m||null===(v=m.categories)||void 0===v?void 0:v.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id}})),tags:null===(p=e.data)||void 0===p||null===(h=p.tags)||void 0===h?void 0:h.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id}})),emailStatuses:null===e||void 0===e||null===(x=e.data)||void 0===x||null===(A=x.email_statuses)||void 0===A?void 0:A.map((e=>({label:t(e),value:e,key:e})))};l((0,o.Ok)({activeMenu:g,data:f}))})).finally((()=>{A(!1),l((0,o.km)(g))})))}),[g.refetch]);const f=()=>{const e=p+1;v.set("step",e)},b=()=>{const e=p-1;v.set("step",e)};return(0,z.jsxs)(n.A,{title:t("shop.edit"),extra:(0,z.jsx)(r.A,{}),children:[(0,z.jsx)(s.A,{current:p,onChange:e=>{l((0,o.Ok)({activeMenu:g,data:{...g.data,step:e}})),v.set("step",e)},children:re.map((e=>(0,z.jsx)(oe,{title:t(e.title)},e.title)))}),x?(0,z.jsx)(m.A,{}):(0,z.jsxs)("div",{className:"steps-content",children:["First-content"===re[p].content&&(0,z.jsx)(P,{next:f,loading:x}),"Second-content"===re[p].content&&(0,z.jsx)(ie,{prev:b,next:f}),"Third-content"===re[p].content&&(0,z.jsx)(ee,{prev:b})]})]})}},51359:(e,t,l)=>{"use strict";e.exports=l.p+"static/media/map.f2e0b3013d676ba09c88.gif"},42634:()=>{}}]);