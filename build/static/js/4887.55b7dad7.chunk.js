(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4887],{85023:(e,l,i)=>{"use strict";i.d(l,{D:()=>t});var n=i(9950),d=i(99674),o=i(90650),s=i(44414);const t=e=>{let{fetchOptions:l,refetch:i=!1,...t}=e;const[a,r]=(0,n.useState)(!1),[u,c]=(0,n.useState)([]);return(0,s.jsx)(d.A,{labelInValue:!0,filterOption:!1,notFoundContent:a?(0,s.jsx)(o.A,{size:"small"}):"no results",...t,options:a?[]:u,onFocus:()=>{u.length&&!i||(r(!0),l().then((e=>{c(e),r(!1)})))}})}},88810:(e,l,i)=>{"use strict";i.d(l,{A:()=>o});var n=i(72243),d=i(44414);const o=e=>{let{image:l,row:i,size:o=100}=e;return(0,d.jsx)(n.A,{src:l||"https://via.placeholder.com/150",alt:"img_gallery",width:o,height:o,className:"rounded border",preview:!0,placeholder:!l,style:{objectFit:"contain"}},l+(null===i||void 0===i?void 0:i.id))}},80905:(e,l,i)=>{"use strict";i.d(l,{j:()=>r});var n=i(9950),d=i(95491),o=i.n(d),s=i(99674),t=i(90650),a=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,hasMore:d,refetchOnFocus:r=!1,...u}=e;const[c,v]=(0,n.useState)(!1),[p,h]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[y,j]=(0,n.useState)(null),[g,A]=(0,n.useState)(1),b=(0,n.useMemo)((()=>o()((e=>{h([]),j(e),v(!0),l({search:e}).then((e=>{h(e),A(2),v(!1)})).finally((()=>x(!1)))}),i)),[l,i,g]);return(0,a.jsxs)(s.A,{showSearch:!0,allowClear:!0,onPopupScroll:async e=>{const i=e.target;m||i.scrollTop+i.offsetHeight!==i.scrollHeight||d&&(x(!0),l({search:y,page:g}).then((e=>{A((e=>e+1)),h([...p,...e])})).finally((()=>x(!1))))},labelInValue:!0,filterOption:!1,onSearch:b,notFoundContent:c?(0,a.jsx)(t.A,{size:"small"}):"no results",onFocus:()=>{r?b(""):null!==p&&void 0!==p&&p.length||b("")},...u,children:[p.map(((e,l)=>(0,a.jsx)(s.A.Option,{value:e.value,children:e.label},l))),m&&(0,a.jsx)(s.A.Option,{children:(0,a.jsx)(t.A,{size:"small"})})]})}},78498:(e,l,i)=>{"use strict";i.d(l,{A:()=>x});var n=i(9950),d=i(97239);const o=i.p+"static/media/pin.0e41858db80c699cd8a2.png";var s=i(96011),t=i.n(s),a=i(63620);async function r(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.CJ,i={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:l};return t().get("https://maps.googleapis.com/maps/api/geocode/json",{params:i}).then((e=>{var l;let{data:i}=e;return null===(l=i.results[0])||void 0===l?void 0:l.formatted_address})).catch((e=>"not found"))}var u=i(39174),c=i(49348),v=i(70030),p=i(6566),h=i(44414);const m=(0,p.A)();const x=(0,d.GoogleApiWrapper)({apiKey:m,libraries:["places","geometry"]})((function(e){var l,i;const[s,t]=(0,n.useState)(),{t:a}=(0,v.B)(),p=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const l={lat:e.coords.latitude,lng:e.coords.longitude};t(l)}),(function(e){c.oR.warning(a("turn.on.gps"))}))};(0,n.useEffect)((()=>{p()}),[]);const x=[{lat:Number(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.lat)||0,lng:Number(null===e||void 0===e||null===(i=e.location)||void 0===i?void 0:i.lng)||0}];for(var y=new e.google.maps.LatLngBounds,j=0;j<x.length;j++)y.extend(x[j]);return(0,h.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,h.jsx)("button",{className:"map-button",type:"button",onClick:()=>{p(),s&&(async l=>{const i={lat:null===l||void 0===l?void 0:l.lat,lng:null===l||void 0===l?void 0:l.lng};e.setLocation(i);const n=await r(i,m);e.setAddress(n)})(s)},children:(0,h.jsx)(u.uFi,{})}),(0,h.jsx)(d.Map,{cursor:"pointer",onClick:async(l,i,n)=>{const{latLng:d}=n,o={lat:d.lat(),lng:d.lng()};e.setLocation(o);const s=await r(o,m);e.setAddress(s)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,h.jsx)(d.Marker,{position:e.location,icon:{url:o,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},1201:(e,l,i)=>{"use strict";i.d(l,{A:()=>r});i(9950);var n=i(70030),d=i(88542);const o=i.p+"static/media/noproductsfound.1cec73868b5fd048b865.riv",s=i.p+"static/media/noresult.ac4af107751f94856a9c.riv",t=i.p+"static/media/nosell.32cb2c2cc548a15c820d.riv";var a=i(44414);const r=function(e){let{id:l="noresult",text:i=""}=e;const{t:r}=(0,n.B)(),u={src:{noproductsfound:o,noresult:s,nosell:t}[l],artboard:"New Artboard",autoplay:!0},{RiveComponent:c}=(0,d.useRive)(u);return(0,a.jsxs)("div",{className:"animation-canvas",children:[(0,a.jsx)("div",{style:{width:"100%",height:200},children:(0,a.jsx)(c,{})}),(0,a.jsx)("div",{className:"text text-center",children:r(i)})]})}},8297:(e,l,i)=>{"use strict";i.d(l,{A:()=>a});var n=i(9950),d=i(55902),o=i(41397),s=i(60767),t=i(44414);function a(e){let{handleChange:l,defaultValue:i,resetSearch:a,...r}=e;const[u,c]=(0,n.useState)(i),v=(0,n.useMemo)((()=>(0,o.debounce)((e=>{l(e)}),800)),[l]);return(0,n.useEffect)((()=>{c(i)}),[a,i]),(0,t.jsx)(d.A,{value:u,onChange:e=>{c(e.target.value),v(e.target.value)},prefix:(0,t.jsx)(s.A,{}),...r})}},47992:(e,l,i)=>{"use strict";i.d(l,{G:()=>r});var n=i(9950),d=i(95491),o=i.n(d),s=i(99674),t=i(90650),a=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:d,...r}=e;const[u,c]=(0,n.useState)(!1),[v,p]=(0,n.useState)([]),h=(0,n.useMemo)((()=>o()((e=>{p([]),c(!0),l(e).then((e=>{p(e),c(!1)}))}),i)),[l,i]);return(0,a.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),d&&d()},notFoundContent:u?(0,a.jsx)(t.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{h("")}})}},66432:(e,l,i)=>{"use strict";i.d(l,{A:()=>d});var n=i(74635);const d=e=>{var l;return null!==e&&void 0!==e&&e.id?{label:(null!==e&&void 0!==e&&e.translation?null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title:null===e||void 0===e?void 0:e.title)||(0,n.t)("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}:null}},44851:(e,l,i)=>{"use strict";i.d(l,{A:()=>s});var n=i(96011),d=i.n(n),o=i(63620);async function s(e){let l={address:e,key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CJ};return d().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{let{data:l}=e;return l.results[0]})).catch((e=>"not found"))}},29597:(e,l,i)=>{"use strict";i.d(l,{A:()=>n});i(63620);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},22576:(e,l,i)=>{"use strict";function n(e,l){for(var i=[],n=[],d="",o=0;o<(null===(s=e.stocks)||void 0===s?void 0:s.length);o++){var s,t;d="";for(var a=0;a<(null===(r=e.stocks[o].extras)||void 0===r?void 0:r.length);a++){var r,u=Object.assign({},e.stocks[o].extras[a]),c=i.findIndex((e=>e.id==u.id));-1==c?(u.level=a,u.up=[d],i.push(u),d+=u.id.toString()):(i[c].up.push(d),d+=u.id.toString())}var v={id:e.stocks[o].id,extras:d,price:e.stocks[o].price,quantity:e.stocks[o].quantity,countable_id:e.stocks[o].countable_id,discount:e.stocks[o].discount,tax:e.stocks[o].tax,total_price:e.stocks[o].total_price,bonus:e.stocks[o].bonus,addons:(null===(t=e.stock)||void 0===t?void 0:t.addons)||e.stocks[o].addons};for(let e=0;e<(null===(p=v.addons)||void 0===p?void 0:p.length);e++){var p;for(let i=0;i<(null===l||void 0===l?void 0:l.length);i++){var h,m,x;v.addons[e].addon_id===((null===(h=l[i].stock)||void 0===h||null===(m=h.product)||void 0===m?void 0:m.id)||(null===(x=l[i].product)||void 0===x?void 0:x.id))&&(v.addons[e].product.quantity=l[i].quantity)}}n.push(v)}return{stock:n,extras:i}}function d(e,l,i){for(var n=""==e?[]:e.split(","),d=[],o=[],s=0;s<=n.length;s++){s-1>=0&&(o[o.length]=n[s-1].toString()),(t=l.filter((e=>{if(new Set(e.up).has(o.join("")))return e}))).length>0&&d.push(t)}s=0;if(o.length<d.length)for(;s<l.length;){var t;if(o[o.length]=d[d.length-1][0].id.toString(),0==(t=l.filter((e=>{if(new Set(e.up).has(o.join("")))return e}))).length)break;d.push(t),s++}var a=i.findIndex((e=>e.extras==o.join("")));return{stock:i[a],extras:d}}i.d(l,{A:()=>d,w:()=>n})},49602:(e,l,i)=>{"use strict";function n(e){var l;const i=null===e||void 0===e||null===(l=e.extras)||void 0===l?void 0:l.find((e=>"image"===e.group.type));return i?i.value:""}i.d(l,{A:()=>n})},6566:(e,l,i)=>{"use strict";i.d(l,{A:()=>o});var n=i(83291),d=i(63620);const o=()=>{var e,l;const{google_map_key:i}=null===(e=n.M.getState())||void 0===e||null===(l=e.globalSettings)||void 0===l?void 0:l.settings;return i||d.CJ}},53774:(e,l,i)=>{"use strict";i.d(l,{A:()=>d});var n=i(83291);function d(){var e,l;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;const s=null===(e=n.M.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,t=Number(i).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),a=d||(null===s||void 0===s?void 0:s.symbol)||"$";return"after"===(o||(null===s||void 0===s?void 0:s.position)||"before")?"".concat(t," ").concat(a):"".concat(a," ").concat(t)}},28249:(e,l,i)=>{"use strict";function n(e,l){var i;const n=(null===l||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title)||"pcs";if(!e)return 0;switch(null===l||void 0===l?void 0:l.position){case"after":return e+" "+n;case"before":return n+" "+e}}i.d(l,{A:()=>n})},67366:(e,l,i)=>{"use strict";function n(e){return e.cartItems.filter((l=>l.bag_id===e.currentBag))}function d(e){return e.data.find((l=>l.bag_id===e.currentBag))}i.d(l,{Xd:()=>d,je:()=>n})},74827:(e,l,i)=>{"use strict";i.d(l,{A:()=>d});var n=i(82371);const d={getAll:e=>n.A.get("rest/brands/paginate",{params:e}),getById:(e,l)=>n.A.get("rest/brands/".concat(e),{params:l})}},78457:(e,l,i)=>{"use strict";i.d(l,{A:()=>d});var n=i(82371);const d={getAll:e=>n.A.get("dashboard/seller/categories/paginate",{params:e}),getById:(e,l)=>n.A.get("dashboard/seller/categories/".concat(e),{params:l}),search:e=>n.A.get("dashboard/seller/categories/search",{params:e}),paginateSelect:e=>n.A.get("dashboard/seller/categories/select-paginate",{params:e})}},53992:(e,l,i)=>{"use strict";i.d(l,{A:()=>d});var n=i(82371);const d={checkCoupon:e=>n.A.post("rest/coupons/check",e),checkCashback:e=>n.A.post("rest/cashback/check",e)}},11024:(e,l,i)=>{"use strict";i.r(l),i.d(l,{default:()=>Re});var n=i(9950),d=i(68832),o=i(87094),s=i(41988),t=i(23263),a=i(47992),r=i(74827),u=i(78457),c=i(88986),v=i(91854),p=i(92979),h=i(8297),m=i(70030),x=i(44414);const y=()=>{const{t:e}=(0,m.B)(),l=(0,v.wA)(),[i,d]=(0,n.useState)(null),[y,j]=(0,n.useState)(null),[g,A]=(0,n.useState)(null),{myShop:b}=(0,v.d4)((e=>e.myShop),v.bN);return(0,c.A)((()=>{const e={brand_id:null===i||void 0===i?void 0:i.value,category_id:null===y||void 0===y?void 0:y.value,search:g,active:1,status:"published"};l((0,p.EN)(e))}),[i,y,g]),(0,x.jsx)(t.A,{children:(0,x.jsxs)(o.A,{gutter:12,children:[(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(h.A,{className:"w-100",placeholder:e("search"),handleChange:A})}),(0,x.jsx)(s.A,{span:"shop"===b.type?6:12,children:(0,x.jsx)(a.G,{className:"w-100",placeholder:e("select.category"),fetchOptions:async function(e){const l={search:0===(null===e||void 0===e?void 0:e.length)?null:e,type:"main"};return u.A.search(l).then((e=>e.data.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:e.id}}))))},onChange:e=>j(e),value:y})}),"shop"===b.type?(0,x.jsx)(s.A,{span:6,children:(0,x.jsx)(a.G,{className:"w-100",placeholder:e("select.brand"),fetchOptions:async function(e){const l={search:0===(null===e||void 0===e?void 0:e.length)?null:e};return r.A.getAll(l).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e.id})))))},onChange:e=>d(e),value:i})}):void 0]})})};var j=i(90650),g=i(7785),A=i(55995),b=i(8750),f=i(69554),_=i(74623),k=i(49348),N=i(53496),w=i(67366),q=i(50384),S=i(1201),C=i(28429),I=i(20380),F=i(48538),z=i(72243),M=i(91524),B=i(80737),V=i(53387),T=i(91348),R=i(53774),D=i(2794),E=i(28249),H=i(49602),Y=i(22576),O=i(67231),P=i(52765);const Z=e=>{var l,i;let{showExtras:n,addonCalculate:d,selectedValues:o,handleChange:s}=e;return(0,x.jsx)(B.A,{direction:"vertical",size:"middle",children:null===(l=n.stock)||void 0===l||null===(i=l.addons)||void 0===i?void 0:i.filter((e=>{var l,i;return!!e.product&&!(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(i=l.stock)||void 0===i||!i.quantity)})).map((e=>{var l,i;const n=o.includes(String(e.addon_id));return(0,x.jsxs)("div",{children:[(0,x.jsx)(P.A,{id:String(e.id),name:String(e.id),checked:n,onChange:()=>s(e)}),(0,x.jsxs)("label",{htmlFor:String(e.id),children:[n&&(0,x.jsxs)(B.A,{size:0,children:[(0,x.jsx)(F.A,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,x.jsx)(T.A,{}),disabled:1===e.product.quantity,onClick:l=>{l.stopPropagation(),d(e.addon_id,e.product.quantity-1)}}),(0,x.jsx)("span",{className:"ml-2",children:e.product.quantity||e.product.min_qty}),(0,x.jsx)(F.A,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,x.jsx)(b.A,{}),onClick:l=>{l.stopPropagation(),d(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,x.jsx)("span",{className:"ml-2",children:null===(l=e.product)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title})]})]},e.id)}))})};function X(e){var l,i,d,t,a;let{extrasModal:r,setExtrasModal:u}=e;const[p,h]=(0,n.useState)(!1),[y,g]=(0,n.useState)({}),{t:A}=(0,m.B)(),[_,N]=(0,n.useState)({}),w=(0,v.wA)(),[q,S]=(0,n.useState)([]),[C,P]=(0,n.useState)([]),[X,L]=(0,n.useState)([]),[G,J]=(0,n.useState)([]),[Q,K]=(0,n.useState)([]),[W,U]=(0,n.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),[$,ee]=(0,n.useState)((null===r||void 0===r?void 0:r.quantity)||(null===y||void 0===y?void 0:y.quantity)||(null===y||void 0===y?void 0:y.min_qty)||1),{currentBag:le,currency:ie}=(0,v.d4)((e=>e.cart),v.bN);const ne=()=>u(!1);function de(e){return(null===G||void 0===G?void 0:G.reduce(((e,l)=>{var i,n,d,o;return e+((null===l||void 0===l||null===(i=l.product)||void 0===i||null===(n=i.stock)||void 0===n?void 0:n.price)||0)*((null===l||void 0===l||null===(d=l.product)||void 0===d?void 0:d.quantity)||(null===l||void 0===l||null===(o=l.product)||void 0===o?void 0:o.min_qty)||1)}),0))+(null===W||void 0===W?void 0:W.stock)?null===W||void 0===W?void 0:W.stock[e||"price"]:0*$}return(0,c.A)((()=>{const e=W.stock.addons.filter((e=>Q.includes(String(e.addon_id))));J(e)}),[Q]),(0,n.useEffect)((()=>{null!==W&&void 0!==W&&W.stock&&N({...W.stock,extras:X})}),[W]),(0,n.useEffect)((()=>{h(!0),O.A.getById(r.uuid).then((e=>{var l;let{data:i}=e;g(i);const n=(0,Y.w)(i,null===r||void 0===r?void 0:r.addons);var d;(S(n.extras),ee(r.quantity||i.quantity||i.min_qty),P(n.stock),U((0,Y.A)(X,n.extras,n.stock)),null===(l=(0,Y.A)("",n.extras,n.stock).extras)||void 0===l||l.forEach((e=>{L((l=>[...l,e[0]]))})),null!==r&&void 0!==r&&r.addons)&&K((null===r||void 0===r||null===(d=r.addons)||void 0===d?void 0:d.map((e=>{var l;return String((null===e||void 0===e||null===(l=e.countable)||void 0===l?void 0:l.id)||e.countable_id)})))||[])})).finally((()=>h(!1)))}),[r.uuid]),(0,x.jsx)(I.A,{visible:!!y,title:y.name,onCancel:ne,footer:[(0,x.jsx)(F.A,{icon:(0,x.jsx)(V.A,{}),type:"primary",onClick:()=>{const e=G.map((e=>{var l,i;return{...e,stockID:e.product.stock.id,quantity:(null===e||void 0===e||null===(l=e.product)||void 0===l?void 0:l.quantity)||(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.min_qty)||1}})),l={...y,stock:_,quantity:$,id:_.id,img:(0,H.A)(_)||y.img,bag_id:le,stockID:_,addons:e};l.quantity>_.quantity?k.oR.warning("".concat(A("you.cannot.order.more.than")," ").concat(_.quantity)):(w((0,D.bE)(l)),u(null))},children:A("add")},"add-product"),(0,x.jsx)(F.A,{type:"default",onClick:ne,children:A("cancel")},"cancel-product")],children:(0,x.jsxs)(j.A,{spinning:p,children:[(0,x.jsxs)(o.A,{gutter:24,children:[(0,x.jsx)(s.A,{span:8,children:(0,x.jsx)(z.A,{src:(0,f.A)((0,H.A)(_)||y.img),alt:y.name,height:200,style:{objectFit:"contain"}})}),(0,x.jsx)(s.A,{span:16,children:(0,x.jsxs)(M.A,{title:null===(l=y.translation)||void 0===l?void 0:l.title,children:[(0,x.jsxs)(M.A.Item,{label:A("price"),span:3,children:[(0,x.jsx)("div",{className:null!==_&&void 0!==_&&_.discount?"strike":"",children:(0,R.A)(de(),null===ie||void 0===ie?void 0:ie.symbol,null===ie||void 0===ie?void 0:ie.position)}),!(null===_||void 0===_||!_.discount)&&(0,x.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,R.A)(de("total_price"),null===ie||void 0===ie?void 0:ie.symbol,null===ie||void 0===ie?void 0:ie.position)})]}),(0,x.jsx)(M.A.Item,{label:A("in.stock"),span:3,children:(0,E.A)(null!==(i=null===_||void 0===_?void 0:_.quantity)&&void 0!==i?i:0,y.unit)}),(0,x.jsx)(M.A.Item,{label:A("tax"),span:3,children:(0,R.A)(null===_||void 0===_?void 0:_.tax,null===ie||void 0===ie?void 0:ie.symbol,null===ie||void 0===ie?void 0:ie.position)})]})})]}),null===W||void 0===W||null===(d=W.extras)||void 0===d?void 0:d.map(((e,l)=>(0,x.jsx)("div",{className:"extra-group",children:(0,x.jsx)(B.A,{className:"extras-select",wrap:!0,children:e.map((e=>(0,x.jsx)("span",{className:"extras-text rounded ".concat(X.find((l=>l.id===e.id))?"selected":""),onClick:()=>(e=>{var l;const i=X.findIndex((l=>l.extra_group_id===e.extra_group_id));let n=X;i>-1&&(n=n.slice(0,i)),n.push(e);const d=n.map((e=>e.id)).join(",");var o=(0,Y.A)(d,q,C);U(o),null===(l=o.extras)||void 0===l||l.forEach((l=>{const i=X.findIndex((i=>l[0].extra_group_id!=e.extra_group_id?i.extra_group_id===l[0].extra_group_id:i.extra_group_id===e.extra_group_id));if(l[0].level>=e.level){var d=l[0].extra_group_id!=e.extra_group_id?l[0]:e;-1==i?n.push(d):n[i]=d}})),L(n)})(e),children:e.value})))},"extra-group"+l)}))),(0,x.jsx)(Z,{showExtras:W,selectedValues:Q,handleChange:e=>{const l=String(e.addon_id);Q.includes(l)?K((e=>e.filter((e=>e!==l)))):K((e=>[...e,l]))},addonCalculate:function(e,l){U((i=>({...i,stock:{...i.stock,addons:i.stock.addons.map((i=>i.addon_id===e?{...i,product:{...i.product,quantity:l}}:i))}}))),J((i=>i.map((i=>i.addon_id===e?{...i,product:{...i.product,quantity:l}}:i))))}}),(0,x.jsx)(o.A,{gutter:12,className:"mt-3",children:(0,x.jsx)(s.A,{span:24,children:(0,x.jsxs)(B.A,{children:[(0,x.jsx)(F.A,{type:"primary",icon:(0,x.jsx)(T.A,{}),onClick:function(){1!==$&&($<=y.min_qty||ee((e=>e-1)))}}),($||1)*((null===y||void 0===y?void 0:y.interval)||1),null===y||void 0===y||null===(t=y.unit)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title,(0,x.jsx)(F.A,{type:"primary",icon:(0,x.jsx)(b.A,{}),onClick:function(){$!==(null===y||void 0===y?void 0:y.quantity)&&$!==y.max_qty&&ee((e=>e+1))}})]})})})]})})}function L(){var e;const{t:l}=(0,m.B)(),i={lg:8,xl:6,xxl:6},[d,a]=(0,n.useState)(null),r=(0,v.wA)(),{products:u,loading:c,meta:h,params:y}=(0,v.d4)((e=>e.product),v.bN),{activeMenu:I}=(0,v.d4)((e=>e.menu),v.bN),{currency:F}=(0,v.d4)((e=>e.cart),v.bN),z=(0,v.d4)((e=>(0,w.Xd)(e.cart))),{before_order_phone_required:M}=(0,v.d4)((e=>e.globalSettings.settings),v.bN),B=(0,C.zy)(),V=null===B||void 0===B||null===(e=B.state)||void 0===e?void 0:e.delivery_type;(0,n.useEffect)((()=>{I.refetch&&(r((0,p.EN)({perPage:12,currency_id:null===F||void 0===F?void 0:F.id,status:"published",active:1})),r((0,N.kK)({})),r((0,_.km)(I)))}),[I.refetch]);return(0,x.jsxs)("div",{className:"px-2",children:[c?(0,x.jsx)(j.A,{className:"d-flex justify-content-center my-5"}):(0,x.jsx)(o.A,{gutter:12,className:"mt-4 product-card",children:0===u.length?(0,x.jsx)(s.A,{span:24,children:(0,x.jsx)(S.A,{id:"nosell"})}):u.map(((e,d)=>{var o;return(0,n.createElement)(s.A,{...i,key:d},(0,x.jsxs)(t.A,{className:"products-col",cover:(0,x.jsx)("img",{alt:e.name,src:(0,f.A)(e.img)}),onClick:()=>(e=>{var i,n,d,o,s,t,r,u,c;if(F||V){if("dine_in"===(null===z||void 0===z||null===(i=z.deliveries)||void 0===i?void 0:i.value)){var v,p;if(null===z||void 0===z||null===(v=z.deliveryZone)||void 0===v||!v.value)return void k.oR.warning(l("please.select.delivery.zone"));if(null===z||void 0===z||null===(p=z.table)||void 0===p||!p.value)return void k.oR.warning(l("please.select.table"))}"delivery"!==(null===z||void 0===z||null===(n=z.deliveries)||void 0===n?void 0:n.value)||null!==z&&void 0!==z&&null!==(d=z.user)&&void 0!==d&&d.value?"delivery"!==(null===z||void 0===z||null===(o=z.deliveries)||void 0===o?void 0:o.value)||null!==z&&void 0!==z&&z.phone||"1"!==M?"delivery"===(null===z||void 0===z||null===(s=z.deliveries)||void 0===s?void 0:s.value)&&Number(null===z||void 0===z?void 0:z.phone)<0?k.oR.warning(l("invalid.phone.number")):"delivery"!==(null===z||void 0===z||null===(t=z.deliveries)||void 0===t?void 0:t.value)||null!==z&&void 0!==z&&z.address||V?null!==z&&void 0!==z&&z.paymentType||V?"delivery"!==(null===z||void 0===z||null===(r=z.deliveries)||void 0===r?void 0:r.value)||z.deliveries||V?"delivery"!==(null===z||void 0===z||null===(u=z.deliveries)||void 0===u?void 0:u.value)||null!==z&&void 0!==z&&z.delivery_date||V?"delivery"!==(null===z||void 0===z||null===(c=z.deliveries)||void 0===c?void 0:c.value)||null!==z&&void 0!==z&&z.delivery_time||V?a(e):k.oR.warning(l("please.select.delivery.time")):k.oR.warning(l("please.select.delivery.date")):k.oR.warning(l("please.select.delivery")):k.oR.warning(l("please.select.payment.type")):k.oR.warning(l("please.select.address")):k.oR.warning(l("please.enter.phone")):k.oR.warning(l("please.select.user"))}else k.oR.warning(l("please.select.currency"))})(e),children:[(0,x.jsx)(A.A,{title:e.name,description:null===(o=e.stock)||void 0===o?void 0:o.price}),(0,x.jsx)("div",{className:"preview",children:(0,x.jsx)(b.A,{})}),e.stocks.map((e=>{var l,i;return(0,x.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,x.jsx)(q.ob7,{})," ",null===(l=e.bonus)||void 0===l?void 0:l.value,"+",null===(i=e.bonus)||void 0===i?void 0:i.bonus_quantity]})}))]},e.id))}))}),d&&(0,x.jsx)(X,{extrasModal:d,setExtrasModal:a}),(0,x.jsx)("div",{className:"d-flex justify-content-end my-5",children:(0,x.jsx)(g.A,{total:h.total,current:y.page,pageSize:12,showSizeChanger:!1,onChange:function(e){r((0,p.EN)({perPage:12,page:e,status:"published",active:1}))},active:1})})]})}var G=i(59233),J=i(56952),Q=i(99674),K=i(47965),W=i(94118),U=i(49433),$=i(66209),ee=i(41397),le=i(85023),ie=i(17491),ne=i(59051),de=i.n(ne),oe=i(5713),se=i(82371);const te={getAll:e=>se.A.get("dashboard/seller/user-addresses",{params:e}),create:e=>se.A.post("dashboard/seller/user-addresses",e)};var ae=i(80905),re=i(66432),ue=i(93394),ce=i(91422),ve=i(78498),pe=i(29597),he=i(84619),me=i(44851),xe=i(63620);function ye(e){let{uuid:l,handleCancel:i,parentForm:d}=e;const{t:o}=(0,m.B)(),[s]=G.A.useForm(),t=(0,v.wA)(),a=(0,v.d4)((e=>(0,w.Xd)(e.cart))),{currentBag:r}=(0,v.d4)((e=>e.cart),v.bN),{settings:u}=(0,v.d4)((e=>e.globalSettings),v.bN),[c,p]=(0,n.useState)((()=>{if(d){const{location:e}=d.getFieldsValue();return null!==e&&void 0!==e&&e[0]?{lat:null===e||void 0===e?void 0:e[0],lng:null===e||void 0===e?void 0:e[1]}:(0,pe.A)(u)}return a.address?{lat:a.address.lat,lng:a.address.lng}:(0,pe.A)(u)})),[h,y]=(0,n.useState)(""),{placePredictions:j,getPlacePredictions:g,isPlacePredictionsLoading:A}=(0,he.A)({apiKey:xe.CJ,libraries:["places","geocode"]});return(0,n.useEffect)((()=>{if(d){const e=d.getFieldsValue();s.setFieldsValue({address:e.address.address})}else s.setFieldsValue({address:a.address.address||null})}),[r]),(0,x.jsx)(I.A,{visible:!!l,title:o("create.address"),onCancel:i,footer:[(0,x.jsx)(F.A,{type:"primary",onClick:()=>s.submit(),children:o("save")},"saveBtn"),(0,x.jsx)(F.A,{type:"default",onClick:i,children:o("cancel")},"cancelBtn")],children:(0,x.jsxs)(G.A,{layout:"vertical",name:"user-address",form:s,onFinish:e=>{const l={...e,active:1,lat:c.lat,lng:c.lng};d?d.setFieldsValue({address:{address:null===e||void 0===e?void 0:e.address},location:[c.lat,c.lng]}):t((0,D.Td)({address:l,bag_id:r})),i()},children:[(0,x.jsx)(G.A.Item,{name:"address",label:o("address"),rules:[{required:!0,message:o("required")}],children:(0,x.jsx)(Q.A,{allowClear:!0,searchValue:h,showSearch:!0,autoClearSearchValue:!0,loading:A,options:null===j||void 0===j?void 0:j.map((e=>({label:e.description,value:e.description}))),onSearch:e=>{y(e),e.length>0&&g({input:e})},onSelect:async e=>{const l=await(0,me.A)(e);p({lat:null===l||void 0===l?void 0:l.geometry.location.lat,lng:null===l||void 0===l?void 0:l.geometry.location.lng})}})}),(0,x.jsx)(G.A.Item,{label:o("map"),children:(0,x.jsx)(ve.A,{location:c,setLocation:p,setAddress:e=>s.setFieldsValue({address:e})})})]})})}var je=i(55902);const ge=function(e){let{visible:l,handleCancel:i}=e;const{t:d}=(0,m.B)(),[t]=G.A.useForm(),[a,r]=(0,n.useState)(!1),[u,c]=(0,n.useState)(null),[p,h]=(0,n.useState)(!1),y=(0,v.d4)((e=>(0,w.Xd)(e.cart)));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.A,{visible:l,title:d("create.address"),onCancel:i,footer:[(0,x.jsx)(F.A,{type:"primary",onClick:()=>t.submit(),loading:p,children:d("save")},"saveBtn"),(0,x.jsx)(F.A,{type:"default",onClick:i,children:d("cancel")},"cancelBtn")],children:(0,x.jsx)(G.A,{layout:"vertical",form:t,onFinish:e=>{var l;h(!0);const n={user_id:null===(l=y.user)||void 0===l?void 0:l.value,active:1,...e};te.create(n).then((()=>{k.oR.success(d("successfully.added")),i()})).catch((e=>c(e.response.data.params))).finally((()=>h(!1)))},children:(0,x.jsxs)(o.A,{gutter:24,children:[(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"firstname",label:d("firstname"),rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(je.A,{})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"lastname",label:d("lastname"),rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(je.A,{})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"title",label:d("title"),rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(je.A,{})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{label:d("phone.number"),name:"phone",rules:[{validator:(e,l)=>l<0?Promise.reject(new Error(d("must.be.positive"))):Promise.resolve()}],children:(0,x.jsx)(J.A,{className:"w-100",addonBefore:"+",parser:e=>parseInt(e,10)})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"street_house_number",label:d("home.number"),rules:[{required:!0,message:d("required")},{type:"number",max:99999999,message:d("max.length.8")}],children:(0,x.jsx)(J.A,{placeholder:d("home.number"),className:"w-100",min:0})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"zipcode",label:d("zip.code"),rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(je.A,{placeholder:d("zip.code"),className:"w-100",maxLength:15})})}),(0,x.jsxs)(s.A,{span:24,children:[(0,x.jsx)(G.A.Item,{name:["address","address"],label:d("address"),rules:[{required:!0,message:""}],onClick:()=>{r(!0)},children:(0,x.jsx)(je.A,{autoComplete:"off",placeholder:d("address")})}),(0,x.jsx)(G.A.Item,{name:["location",0],hidden:!0}),(0,x.jsx)(G.A.Item,{name:["location",1],hidden:!0})]}),(0,x.jsx)(s.A,{span:24,children:(0,x.jsx)(G.A.Item,{name:"additional_details",label:d("details"),children:(0,x.jsx)(je.A,{})})})]})})}),a&&(0,x.jsx)(ye,{uuid:a,handleCancel:()=>r(null),parentForm:t})]})},Ae=e=>{var l,i,d,r,u;let{form:p}=e;const{t:h}=(0,m.B)(),y=(0,v.wA)(),j=(0,v.d4)((e=>(0,w.Xd)(e.cart))),{myShop:g}=(0,v.d4)((e=>e.myShop),v.bN),{currentBag:A}=(0,v.d4)((e=>e.cart),v.bN),b=null===g||void 0===g||null===(l=g.shop_closed_date)||void 0===l?void 0:l.map((e=>e.day)),[f,_]=(0,n.useState)(null),[N,q]=(0,n.useState)(!1),[S,C]=(0,n.useState)({deliveryZone:!1,table:!1}),I=(0,n.useRef)([]);(0,c.A)((()=>{null!==g&&void 0!==g&&g.id&&p.setFieldsValue({deliveryZone:null===j||void 0===j?void 0:j.deliveryZone,table:null===j||void 0===j?void 0:j.table})}),[A]);const z=[{label:h("dine.in"),value:"dine_in",key:2},{label:h("delivery"),value:"delivery",key:1},{label:h("pickup"),value:"pickup",key:0}];return(0,x.jsxs)(t.A,{className:A?"":"tab-card",children:[(0,x.jsxs)(o.A,{gutter:12,children:[(0,x.jsx)(s.A,{span:24,children:(0,x.jsx)(G.A.Item,{name:"delivery",label:h("delivery"),rules:[{required:!0,message:h("required")}],children:(0,x.jsx)(Q.A,{placeholder:h("delivery.type"),options:z,labelInValue:!0,onSelect:e=>y((0,D.Td)({delivery_fee:e.value,bag_id:A})),onChange:e=>{var l;return y((0,D.Td)({deliveries:e,address:"",bag_id:A,paymentType:"dine_in"===(null===e||void 0===e?void 0:e.value)||"pickup"===(null===e||void 0===e?void 0:e.value)?"cash"===(null===j||void 0===j||null===(l=j.paymentType)||void 0===l?void 0:l.value)?null===j||void 0===j?void 0:j.paymentType:void 0:null===j||void 0===j?void 0:j.paymentType}))}})})}),"dine_in"===(null===j||void 0===j||null===(i=j.deliveries)||void 0===i?void 0:i.value)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"deliveryZone",label:h("delivery.zone"),rules:[{required:!0,message:h("required")}],children:(0,x.jsx)(ae.j,{className:"w-100",hasMore:null===S||void 0===S?void 0:S.deliveryZone,placeholder:h("select.delivery.zone"),fetchOptions:async e=>{let{search:l,page:i=1}=e;const n={search:null!==l&&void 0!==l&&l.length?l:void 0,shop_id:null===g||void 0===g?void 0:g.id,page:i};return await ue.A.getAll(n).then((e=>{var l;return C((l=>{var i;return{...l,deliveryZone:!(null===e||void 0===e||null===(i=e.links)||void 0===i||!i.next)}})),null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>(0,re.A)(e)))}))},onChange:e=>{y((0,D.Td)({bag_id:A,deliveryZone:e,table:null})),p.setFieldsValue({table:null})},value:null===j||void 0===j?void 0:j.deliveryZone,disabled:!(null!==g&&void 0!==g&&g.id)})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"table",label:h("table"),rules:[{required:!0,message:h("required")}],children:(0,x.jsx)(ae.j,{className:"w-100",hasMore:null===S||void 0===S?void 0:S.table,placeholder:h("select.table"),fetchOptions:async e=>{var l;let{search:i,page:n=1}=e;const d={search:null!==i&&void 0!==i&&i.length?i:void 0,shop_section_id:(null===j||void 0===j||null===(l=j.deliveryZone)||void 0===l?void 0:l.value)||void 0,shop_id:null===g||void 0===g?void 0:g.id,page:n};return await ce.A.getAll(d).then((e=>{var l;return C((l=>{var i;return{...l,table:!(null===e||void 0===e||null===(i=e.links)||void 0===i||!i.next)}})),null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>({label:(null===e||void 0===e?void 0:e.name)||h("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},onChange:e=>{y((0,D.Td)({bag_id:A,table:e}))},refetchOnFocus:!0,value:null===j||void 0===j?void 0:j.table,disabled:!(null!==j&&void 0!==j&&null!==(d=j.deliveryZone)&&void 0!==d&&d.value)})})})]}),1===(null===j||void 0===j||null===(r=j.deliveries)||void 0===r?void 0:r.key)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.A,{span:21,children:(0,x.jsx)(G.A.Item,{name:"deliveryAddress",label:h("address"),rules:[{required:!0,message:h("address")}],children:(0,x.jsx)(a.G,{fetchOptions:e=>{const l={search:e,perPage:10,page:1};return te.getAll(l).then((e=>{let{data:l}=e;return I.current=l,null===l||void 0===l?void 0:l.map((e=>{var l;return{label:(null===e||void 0===e?void 0:e.title)||(null===(l=e.address)||void 0===l?void 0:l.address),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:h("select.address"),allowClear:!1,onChange:e=>{var l,i,n;if(void 0===e)return y((0,D.Td)({bag_id:A,address:""}));const d=I.current.find((l=>l.id===e.value)),o={address:null===d||void 0===d||null===(l=d.address)||void 0===l?void 0:l.address,active:1,lat:null===d||void 0===d?void 0:d.location[0],lng:null===d||void 0===d?void 0:d.location[1]};y((0,D.Td)({address:o,deliveryAddress:{value:(null===d||void 0===d?void 0:d.title)||(null===d||void 0===d||null===(i=d.address)||void 0===i?void 0:i.address),label:(null===d||void 0===d?void 0:d.title)||(null===d||void 0===d||null===(n=d.address)||void 0===n?void 0:n.address)},bag_id:A}))},autoComplete:"none"})})}),(0,x.jsx)(s.A,{span:3,children:(0,x.jsx)(G.A.Item,{label:" ",children:(0,x.jsx)(F.A,{icon:(0,x.jsx)(V.A,{}),onClick:()=>{j.userUuid?q(!0):k.oR.warning(h("please.select.client"))}})})})]}),"delivery"===(null===j||void 0===j||null===(u=j.deliveries)||void 0===u?void 0:u.value)&&(0,x.jsx)(s.A,{span:24,children:(0,x.jsxs)(o.A,{gutter:12,children:[(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"delivery_date",label:h("delivery.date"),rules:[{required:!0,message:h("required")}],children:(0,x.jsx)(oe.A,{placeholder:h("delivery.date"),className:"w-100",format:"YYYY-MM-DD",allowClear:!1,disabledDate:function(e){const l=null===b||void 0===b?void 0:b.find((l=>l===de()(e).format("YYYY-MM-DD"))),i=de()().add(-1,"days")>=e;return l||i},onChange:e=>{const l=de()(e).format("YYYY-MM-DD");y((0,D.Td)({delivery_date:l,bag_id:A}))}})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{label:"".concat(h("delivery.time")," (").concat(h("up.to"),")"),name:"delivery_time",rules:[{required:!0,message:h("required")}],children:(0,x.jsx)(oe.A,{disabled:!j.delivery_date,picker:"time",placeholder:h("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:()=>({disabledHours:()=>((e,l)=>{const i=parseInt(e),n=parseInt(l),d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];for(let o=i;o<=n;o++)delete d[o];return d})(de()(null===j||void 0===j?void 0:j.delivery_date).format("YYYYMMDD")===de()(new Date).format("YYYYMMDD")?de()(new Date).add(1,"hour").format("HH"):0,24),disabledMinutes:()=>[],disabledSeconds:()=>[]}),onChange:e=>{const l=de()(e).format("HH:mm:ss");y((0,D.Td)({delivery_time:l,bag_id:A}))},allowClear:!1})})})]})})]}),f&&(0,x.jsx)(ye,{uuid:f,handleCancel:()=>_(null)}),N&&(0,x.jsx)(ge,{visible:N,handleCancel:()=>q(!1)})]})};function be(e){let{visible:l,handleCancel:i}=e;const{t:d}=(0,m.B)(),[t]=G.A.useForm(),[a,r]=(0,n.useState)(!1),[u,c]=(0,n.useState)(null);return(0,x.jsx)(I.A,{title:d("add.client"),visible:l,onCancel:i,footer:[(0,x.jsx)(F.A,{type:"primary",onClick:()=>t.submit(),loading:a,children:d("save")},"ok-button"),(0,x.jsx)(F.A,{onClick:i,children:d("cancel")},"cancel-button")],children:(0,x.jsx)(G.A,{layout:"vertical",name:"user-add-form",form:t,onFinish:e=>{const l={...e,role:"user"};r(!0),$.A.create(l).then((()=>{k.oR.success(d("successfully.added")),i()})).catch((e=>c(e.response.data.params))).finally((()=>r(!1)))},children:(0,x.jsxs)(o.A,{gutter:12,children:[(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{label:d("firstname"),name:"firstname",help:null!==u&&void 0!==u&&u.firstname?u.firstname[0]:null,validateStatus:null!==u&&void 0!==u&&u.firstname?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(je.A,{})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{label:d("lastname"),name:"lastname",help:null!==u&&void 0!==u&&u.lastname?u.lastname[0]:null,validateStatus:null!==u&&void 0!==u&&u.lastname?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(je.A,{})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{label:d("phone"),name:"phone",help:null!==u&&void 0!==u&&u.phone?u.phone[0]:null,validateStatus:null!==u&&void 0!==u&&u.phone?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(J.A,{min:0,className:"w-100"})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{label:d("email"),name:"email",help:null!==u&&void 0!==u&&u.email?u.email[0]:null,validateStatus:null!==u&&void 0!==u&&u.email?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,x.jsx)(je.A,{type:"email"})})})]})})})}function fe(){var e,l,i,d,r;const{t:u}=(0,m.B)(),[p]=G.A.useForm(),h=(0,v.wA)(),{currencies:y,loading:g}=(0,v.d4)((e=>e.currency),v.bN),{currentBag:A,bags:f,currency:_}=(0,v.d4)((e=>e.cart),v.bN),k=(0,C.zy)(),N=null===k||void 0===k||null===(e=k.state)||void 0===e?void 0:e.delivery_type,{before_order_phone_required:q}=(0,v.d4)((e=>e.globalSettings.settings),v.bN),S=(0,v.d4)((e=>(0,w.Xd)(e.cart))),[I,z]=(0,n.useState)([]),[M,V]=(0,n.useState)(null);(0,c.A)((()=>{var e;"dine_in"===(null===S||void 0===S||null===(e=S.deliveries)||void 0===e?void 0:e.value)&&p.setFieldsValue({payment_type:null===S||void 0===S?void 0:S.paymentType})}),[null===S||void 0===S||null===(l=S.deliveries)||void 0===l?void 0:l.value,A]);return(0,n.useEffect)((()=>{if(_){const e={label:"".concat(null===_||void 0===_?void 0:_.title," (").concat(null===_||void 0===_?void 0:_.symbol,")"),value:_.id};h((0,D.Td)({formCurrency:e,bag_id:A})),p.setFieldsValue({currency:e})}else{const e=y.find((e=>e.default)),l={label:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")"),value:e.id};h((0,D.Td)({currentCurrency:e,bag_id:A})),h((0,D.MN)(e)),p.setFieldsValue({currency:l})}}),[]),(0,n.useEffect)((()=>{p.setFieldsValue({user:S.user||null,payment_type:S.paymentType||null,address:S.address.address||null,deliveryAddress:S.deliveryAddress,delivery:S.deliveries||null,delivery_time:null!==S&&void 0!==S&&S.delivery_time?de()("".concat(null===S||void 0===S?void 0:S.delivery_date," ").concat(null===S||void 0===S?void 0:S.delivery_time)):null,delivery_date:null!==S&&void 0!==S&&S.delivery_date?de()(null===S||void 0===S?void 0:S.delivery_date):null,phone:(null===S||void 0===S?void 0:S.phone)||null})}),[A,S]),(0,x.jsxs)("div",{className:"order-tabs",children:[(0,x.jsxs)("div",{className:"tabs-container",children:[(0,x.jsx)("div",{className:"tabs",children:f.map((e=>(0,x.jsx)("div",{className:e===A?"tab active":"tab",onClick:()=>h((0,D.s2)(e)),children:(0,x.jsxs)(B.A,{children:[(0,x.jsx)(K.A,{}),(0,x.jsxs)("span",{children:[u("bag")," - ",e+1]}),!!e&&e===A&&(0,x.jsx)(W.A,{onClick:l=>((e,l)=>{e.preventDefault(),e.stopPropagation(),h((0,D.vX)(l))})(l,e),className:"close-button",size:12})]})},"tab"+e)))}),(0,x.jsx)(F.A,{size:"small",type:"primary",shape:"circle",icon:(0,x.jsx)(b.A,{}),className:"tab-add-button",onClick:()=>h((0,D.e3)())})]}),(0,x.jsxs)(G.A,{layout:"vertical",name:"pos-form",form:p,children:[!N&&(0,x.jsx)(Ae,{form:p}),(0,x.jsxs)(t.A,{children:[g&&(0,x.jsx)("div",{className:"loader",children:(0,x.jsx)(j.A,{})}),(0,x.jsxs)(o.A,{gutter:6,style:{marginBottom:15},children:["delivery"===(null===S||void 0===S||null===(i=S.deliveries)||void 0===i?void 0:i.value)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.A,{span:21,children:(0,x.jsx)(G.A.Item,{name:"user",label:u("user"),rules:[{required:!0,message:""}],className:"w-100",children:(0,x.jsx)(a.G,{placeholder:u("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10};return $.A.getAll(l).then((e=>{let{data:l}=e;return z(l),function(e){if(!e)return;return(0,ee.isArray)(e)?e.map((e=>({label:"".concat((null===e||void 0===e?void 0:e.firstname)||""," ").concat((null===e||void 0===e?void 0:e.lastname)||""),value:null===e||void 0===e?void 0:e.id}))):{label:"".concat((null===e||void 0===e?void 0:e.firstname)||""," ").concat((null===e||void 0===e?void 0:e.lastname)||""),value:null===e||void 0===e?void 0:e.id}}(l)}))},onSelect:function(e){const l=I.find((l=>(null===l||void 0===l?void 0:l.id)===(null===e||void 0===e?void 0:e.value)));h((0,D.Td)({user:e,userUuid:null===l||void 0===l?void 0:l.uuid,bag_id:A,phone:null===l||void 0===l?void 0:l.phone,userOBJ:l})),p.setFieldsValue({address:null,phone:null===l||void 0===l?void 0:l.phone})},onClear:()=>{p.setFieldsValue({phone:null,user:null})}})})}),(0,x.jsx)(s.A,{span:3,children:(0,x.jsx)(G.A.Item,{label:" ",children:(0,x.jsx)(F.A,{icon:(0,x.jsx)(U.A,{}),onClick:()=>{V(!0)}})})})]}),"delivery"===(null===S||void 0===S||null===(d=S.deliveries)||void 0===d?void 0:d.value)&&"1"===q&&(0,x.jsx)(s.A,{span:24,children:(0,x.jsx)(G.A.Item,{name:"phone",rules:[{required:!0,message:u("required")},{validator(e,l){if(l<0)return Promise.reject(new Error(u("must.be.positive")))}}],children:(0,x.jsx)(J.A,{className:"w-100",placeholder:u("phone.number"),disabled:null===S||void 0===S||null===(r=S.userOBJ)||void 0===r?void 0:r.phone,onChange:e=>h((0,D.Td)({phone:e,bag_id:A}))})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{name:"currency",label:u("currency"),rules:[{required:!0,message:u("required")}],children:(0,x.jsx)(Q.A,{placeholder:u("select.currency"),onSelect:function(e){const l=y.find((l=>l.id===e.value));h((0,D.MN)(l))},labelInValue:!0,disabled:!0,children:null===y||void 0===y?void 0:y.map(((e,l)=>(0,x.jsx)(Q.A.Option,{value:null===e||void 0===e?void 0:e.id,children:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")")},l)))})})}),(0,x.jsx)(s.A,{span:12,children:(0,x.jsx)(G.A.Item,{label:u("payment.type"),name:"payment_type",rules:[{required:!0,message:u("required")}],children:(0,x.jsx)(le.D,{fetchOptions:async function(){return ie.A.getAll().then((e=>null===e||void 0===e?void 0:e.data.filter((e=>{var l,i;return"dine_in"===(null===S||void 0===S||null===(l=S.deliveries)||void 0===l?void 0:l.value)||"pickup"===(null===S||void 0===S||null===(i=S.deliveries)||void 0===i?void 0:i.value)?"cash"===e.tag:"cash"===e.tag||"wallet"===e.tag})).map((e=>({label:u(e.tag)||u("N/A"),value:null===e||void 0===e?void 0:e.tag,key:null===e||void 0===e?void 0:e.id})))))},className:"w-100",placeholder:u("select.payment.type"),onSelect:e=>{h((0,D.Td)({paymentType:e,bag_id:A}))},refetch:!0})})})]})]})]}),M&&(0,x.jsx)(be,{visible:M,handleCancel:()=>V(!1)})]})}var _e=i(44070),ke=i(13239),Ne=i(57056),we=i(53992),qe=i(92270),Se=i(21215),Ce=i.n(Se),Ie=i(88810),Fe=i(12203),ze=i(12916),Me=i(86245),Be=i(37279);const Ve=e=>{var l,i,d,o,s,a,r,u,c,v,p,h,y,g,A,b,f,_,k,N;let{orderId:w,handleClose:q}=e;const{t:S}=(0,m.B)(),[C,z]=(0,n.useState)(!1),[M,V]=(0,n.useState)(null),[T,D]=(0,n.useState)([]);return(0,n.useEffect)((()=>{w&&(z(!0),Ne.A.getById(w).then((e=>{V(e.data);const l=e.data.details.map((e=>({...e,...e.stock.extras,numberQuantity:e.quantity,numberTax:e.tax})));D(l)})).finally((()=>z(!1))))}),[]),(0,x.jsx)(I.A,{visible:!!w,title:"Order created successfully",onOk:q,onCancel:q,footer:[(0,x.jsx)(F.A,{onClick:q,children:S("back")}),(0,x.jsxs)(F.A,{type:"primary",onClick:()=>window.print(),children:[(0,x.jsx)(Be.A,{type:"printer"}),(0,x.jsx)("span",{className:"ml-1",children:S("print")})]})],style:{minWidth:"80vw"},children:(0,x.jsx)("div",{className:"py-4",children:C?(0,x.jsx)("div",{className:"w-100 text-center",children:(0,x.jsx)(j.A,{})}):(0,x.jsxs)(t.A,{title:"".concat(S("order.details")," ").concat(null!==M&&void 0!==M&&M.id?"#".concat(null===M||void 0===M?void 0:M.id):""),className:"order-details",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h2",{className:"mb-1 font-weight-semibold",children:[S("invoice")," #",null===M||void 0===M?void 0:M.id]}),(0,x.jsx)("p",{children:de()(null===M||void 0===M?void 0:M.created_at).format("YYYY-MM-DD")}),(0,x.jsx)("address",{children:(0,x.jsxs)("p",{children:[(0,x.jsxs)("span",{children:[S("delivery.type"),": ",null===M||void 0===M?void 0:M.delivery_type]}),(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[S("otp"),": ",null!==(l=null===M||void 0===M?void 0:M.otp)&&void 0!==l?l:S("N/A")]}),!(null===M||void 0===M||!M.table)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[S("table"),": ",(null===M||void 0===M||null===(i=M.table)||void 0===i?void 0:i.name)||S("N/A")]})]}),!(null===M||void 0===M||null===(d=M.address)||void 0===d||!d.address)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[S("delivery.address"),": ",null===M||void 0===M||null===(o=M.address)||void 0===o?void 0:o.address]})]}),!(null===M||void 0===M||!M.delivery_date_time)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("br",{}),(0,x.jsx)("span",{children:"".concat(S("delivery.date"),": ").concat(null===M||void 0===M?void 0:M.delivery_date," ").concat(null===M||void 0===M?void 0:M.delivery_time)})]}),(null===M||void 0===M?void 0:M.note)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[S("note"),": ",null===M||void 0===M?void 0:M.note]})]})]})})]}),(0,x.jsx)("address",{children:(0,x.jsxs)("p",{children:[(0,x.jsxs)("span",{className:"font-weight-semibold text-dark font-size-md",children:[null===M||void 0===M||null===(s=M.user)||void 0===s?void 0:s.firstname," ",(null===M||void 0===M||null===(a=M.user)||void 0===a?void 0:a.lastname)||""]}),(null===M||void 0===M?void 0:M.phone)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[S("phone"),": ",null===M||void 0===M?void 0:M.phone]})]}),(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[S("email"),": ",null===M||void 0===M||null===(r=M.user)||void 0===r?void 0:r.email]})]})})]}),(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsxs)(Fe.A,{scroll:{x:!0},dataSource:T,pagination:!1,className:"mb-5",children:[(0,x.jsx)(Me.A,{title:"No.",dataIndex:"id"},"id"),(0,x.jsx)(Me.A,{title:S("product"),dataIndex:"stock",render:(e,l)=>{var i,n,d,o;return(0,x.jsxs)(B.A,{wrap:!0,children:[(0,x.jsx)("span",{children:null===e||void 0===e||null===(i=e.product)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title}),(0,x.jsx)("span",{children:null===e||void 0===e||null===(d=e.extras)||void 0===d?void 0:d.map((e=>(0,x.jsx)(ze.A,{children:null===e||void 0===e?void 0:e.value},null===e||void 0===e?void 0:e.id)))}),null===l||void 0===l||null===(o=l.addons)||void 0===o?void 0:o.map((e=>{var l,i,n;return(0,x.jsx)(ze.A,{children:"".concat(null===e||void 0===e||null===(l=e.stock)||void 0===l||null===(i=l.product)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title," x ").concat((null===e||void 0===e?void 0:e.quantity)||1)},e.id)}))]})}},"stock"),(0,x.jsx)(Me.A,{title:S("quantity"),dataIndex:"numberQuantity",render:(e,l)=>{var i,n,d,o;return(0,x.jsx)("span",{children:"".concat(l.quantity," ").concat(null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(n=i.product)||void 0===n||null===(d=n.unit)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title)})}},"numberQuantity"),(0,x.jsx)(Me.A,{title:S("price"),dataIndex:"origin_price",render:e=>{var l,i;return(0,R.A)(e,null===M||void 0===M||null===(l=M.currency)||void 0===l?void 0:l.symbol,null===M||void 0===M||null===(i=M.currency)||void 0===i?void 0:i.position)}},"origin_price"),(0,x.jsx)(Me.A,{title:S("tax"),dataIndex:"numberTax",render:e=>{var l,i;return(0,R.A)(e,null===M||void 0===M||null===(l=M.currency)||void 0===l?void 0:l.symbol,null===M||void 0===M||null===(i=M.currency)||void 0===i?void 0:i.position)}},"numberTax"),(0,x.jsx)(Me.A,{title:S("total.price"),dataIndex:"total_price",render:e=>{var l,i;return(0,R.A)(e,null===M||void 0===M||null===(l=M.currency)||void 0===l?void 0:l.symbol,null===M||void 0===M||null===(i=M.currency)||void 0===i?void 0:i.position)}},"total_price")]}),(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsxs)("div",{className:"text-right ",children:[(0,x.jsxs)("div",{className:"border-bottom",children:[(0,x.jsx)("p",{className:"mb-2",children:"".concat(S("sub.total"),": ").concat((0,R.A)(null===M||void 0===M?void 0:M.details.reduce(((e,l)=>{var i;return e+(null!==(i=l.total_price)&&void 0!==i?i:0)}),0),null===M||void 0===M||null===(u=M.currency)||void 0===u?void 0:u.symbol,null===M||void 0===M||null===(c=M.currency)||void 0===c?void 0:c.position))}),(0,x.jsx)("p",{children:"".concat(S("delivery.price"),": ").concat((0,R.A)(null===M||void 0===M?void 0:M.delivery_fee,null===M||void 0===M||null===(v=M.currency)||void 0===v?void 0:v.symbol,null===M||void 0===M||null===(p=M.currency)||void 0===p?void 0:p.position))}),(0,x.jsx)("p",{children:"".concat(S("shop.tax"),": ").concat((0,R.A)(null===M||void 0===M?void 0:M.tax,null===M||void 0===M||null===(h=M.currency)||void 0===h?void 0:h.symbol,null===M||void 0===M||null===(y=M.currency)||void 0===y?void 0:y.position))}),(0,x.jsx)("p",{children:"".concat(S("service.fee"),": ").concat((0,R.A)(null===M||void 0===M?void 0:M.service_fee,null===M||void 0===M||null===(g=M.currency)||void 0===g?void 0:g.symbol,null===M||void 0===M||null===(A=M.currency)||void 0===A?void 0:A.position))}),!(null===M||void 0===M||!M.coupon)&&(0,x.jsx)("p",{children:"".concat(S("coupon"),": - ").concat((0,R.A)(null===M||void 0===M||null===(b=M.coupon)||void 0===b?void 0:b.price,null===M||void 0===M||null===(f=M.currency)||void 0===f?void 0:f.symbol,null===M||void 0===M||null===(_=M.currency)||void 0===_?void 0:_.position))})]}),(0,x.jsxs)("h2",{className:"font-weight-semibold mt-3",children:[(0,x.jsxs)("span",{className:"mr-1",children:[S("grand.total"),": "]}),(0,R.A)(null===M||void 0===M?void 0:M.total_price,null===M||void 0===M||null===(k=M.currency)||void 0===k?void 0:k.symbol,null===M||void 0===M||null===(N=M.currency)||void 0===N?void 0:N.position)]})]})})]})]})})})};function Te(){var e,l,i;const{t:d}=(0,m.B)(),a=(0,v.wA)(),{cartItems:r,cartShops:u,currentBag:p,total:h,coupons:y,currency:g}=(0,v.d4)((e=>e.cart),v.bN),A=(0,v.d4)((e=>(0,w.je)(e.cart))),N=(0,v.d4)((e=>(0,w.Xd)(e.cart)),v.bN),[q,S]=(0,n.useState)(!1),[I,z]=(0,n.useState)(null),[M,V]=(0,n.useState)(null),[E]=G.A.useForm(),{myShop:H}=(0,v.d4)((e=>e.myShop),v.bN),Y=(0,C.zy)(),O=null===Y||void 0===Y||null===(e=Y.state)||void 0===e?void 0:e.delivery_type,{activeMenu:P}=(0,v.d4)((e=>e.menu),v.bN),Z=e=>{var l;e.quantity!==(null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.quantity)&&e.quantity!==e.max_qty&&a((0,D.sR)({...e,quantity:1}))},X=e=>{1!==e.quantity&&(e.quantity<=e.min_qty||a((0,D.sR)({...e,quantity:-1})))};function L(){const e=function(e){var l,i,n,d,o;const s={products:e.map((e=>{var l,i,n,d;return{quantity:e.quantity,stock_id:e.stockID?null===(l=e.stockID)||void 0===l?void 0:l.id:null===(i=e.stock)||void 0===i?void 0:i.id,addons:null!==e&&void 0!==e&&null!==(n=e.addons)&&void 0!==n&&n.length?null===e||void 0===e||null===(d=e.addons)||void 0===d?void 0:d.map((e=>({quantity:null===e||void 0===e?void 0:e.quantity,stock_id:null===e||void 0===e?void 0:e.stockID}))):void 0}})),currency_id:null===g||void 0===g?void 0:g.id,coupon:null!==y&&void 0!==y&&null!==(l=y[0])&&void 0!==l&&l.verified?null===y||void 0===y||null===(i=y[0])||void 0===i?void 0:i.coupon:void 0,shop_id:H.id,type:null===N||void 0===N||null===(n=N.deliveries)||void 0===n?void 0:n.value,address:{latitude:null===N||void 0===N||null===(d=N.address)||void 0===d?void 0:d.lat,longitude:null===N||void 0===N||null===(o=N.address)||void 0===o?void 0:o.lng}};return Ce().stringify(s,{addQueryPrefix:!0})}(A);S(!0),Ne.A.calculate(e).then((e=>{var l,i;let{data:n}=e;const d=n.data,o=d.stocks.map((e=>({...A.find((l=>l.id===e.id)),...e,...e.stock.countable,stock:e.stock.stock_extras,stocks:e.stock.stock_extras,stockID:e.stock})));a((0,D.Q4)(o));const s={product_total:null===(l=d.stocks)||void 0===l?void 0:l.reduce(((e,l)=>e+(l.total_price||l.price)),0),shop_tax:null!==(i=null===d||void 0===d?void 0:d.total_shop_tax)&&void 0!==i?i:0,order_total:d.total_price,delivery_fee:d.delivery_fee,service_fee:null===d||void 0===d?void 0:d.service_fee,couponPrice:null===d||void 0===d?void 0:d.coupon_price};a((0,D.bH)(s))})).finally((()=>S(!1)))}(0,c.A)((()=>{A.length&&L()}),[g]),(0,c.A)((()=>{A.length?L():a((0,D.t6)())}),[r,p,null===N||void 0===N?void 0:N.address,g,null===N||void 0===N?void 0:N.deliveries,y]);const J=()=>{var e,l,i,n,o,s,t,a,r,c,v,p,m,x,j,A,b,f,_,w,q,C,I;if(!g&&!O)return void k.oR.warning(d("please.select.currency"));if("dine_in"===(null===N||void 0===N||null===(e=N.deliveries)||void 0===e?void 0:e.value)){var F,M;if(null===N||void 0===N||null===(F=N.deliveryZone)||void 0===F||!F.value)return void k.oR.warning(d("please.select.delivery.zone"));if(null===N||void 0===N||null===(M=N.table)||void 0===M||!M.value)return void k.oR.warning(d("please.select.table"))}if("delivery"===(null===N||void 0===N||null===(l=N.deliveries)||void 0===l?void 0:l.value)&&!N.address&&!O)return void k.oR.warning(d("please.select.address"));if("delivery"===(null===N||void 0===N||null===(i=N.deliveries)||void 0===i?void 0:i.value)&&(null===N||void 0===N||!N.delivery_time)&&!O)return void k.oR.warning(d("shop.closed"));if("delivery"===(null===N||void 0===N||null===(n=N.deliveries)||void 0===n?void 0:n.value)&&(null===N||void 0===N||!N.delivery_date)&&!O)return void k.oR.warning(d("please.select.delivery.date"));const B=null===u||void 0===u?void 0:u.flatMap((e=>{var l,i;return{stock_id:null===e||void 0===e||null===(l=e.stockID)||void 0===l?void 0:l.id,quantity:null===e||void 0===e?void 0:e.quantity,bonus:null!==e&&void 0!==e&&e.bonus?null===e||void 0===e?void 0:e.bonus:void 0,addons:null===e||void 0===e||null===(i=e.addons)||void 0===i?void 0:i.map((e=>({stock_id:null===e||void 0===e?void 0:e.id,quantity:null===e||void 0===e?void 0:e.quantity})))}})),V={user_id:null===N||void 0===N||null===(o=N.user)||void 0===o?void 0:o.value,currency_id:null===g||void 0===g?void 0:g.id,rate:null===g||void 0===g?void 0:g.rate,shop_id:null===H||void 0===H?void 0:H.id,delivery_id:null===(s=N.deliveries)||void 0===s?void 0:s.value,coupon:(null===y||void 0===y||null===(t=y[0])||void 0===t?void 0:t.coupon)||void 0,tax:h.order_tax,payment_type:null===(a=N.paymentType)||void 0===a?void 0:a.value,delivery_date:null!==N&&void 0!==N&&N.delivery_date?null===N||void 0===N?void 0:N.delivery_date:void 0,delivery_address_id:null!==N&&void 0!==N&&null!==(r=N.address)&&void 0!==r&&r.address?null===N||void 0===N||null===(c=N.address)||void 0===c?void 0:c.address:void 0,address:null!==(v=N.address)&&void 0!==v&&v.address?{address:null===(p=N.address)||void 0===p?void 0:p.address,office:null,house:null,floor:null}:void 0,location:null!==N&&void 0!==N&&N.address?{latitude:null===(m=N.address)||void 0===m?void 0:m.lat,longitude:null===(x=N.address)||void 0===x?void 0:x.lng}:void 0,delivery_time:null!==N&&void 0!==N&&N.delivery_time?de()(null===N||void 0===N?void 0:N.delivery_time,"HH:mm").format("HH:mm"):void 0,delivery_type:null===N||void 0===N||null===(j=N.deliveries)||void 0===j?void 0:j.value,delivery_type_id:N.deliveries.key,phone:null!==N&&void 0!==N&&N.phone?null===N||void 0===N||null===(A=N.phone)||void 0===A?void 0:A.toString():void 0,table_id:(null===N||void 0===N||null===(b=N.table)||void 0===b?void 0:b.value)||void 0,products:B},T={currency_id:null===g||void 0===g?void 0:g.id,rate:null===g||void 0===g?void 0:g.rate,coupon:(null===y||void 0===y||null===(f=y[0])||void 0===f?void 0:f.coupon)||void 0,tax:h.order_tax,payment_type:null===N||void 0===N||null===(_=N.paymentType)||void 0===_?void 0:_.value,delivery_id:null===(w=N.deliveries)||void 0===w?void 0:w.value,delivery_type:null===N||void 0===N||null===(q=N.deliveries)||void 0===q?void 0:q.value,delivery_type_id:N.deliveries.key,shop_id:H.id,table_id:(null===N||void 0===N||null===(C=N.table)||void 0===C?void 0:C.value)||void 0,products:B},R="delivery"===(null===(I=N.deliveries)||void 0===I?void 0:I.value)?V:T,D={payment_sys_id:N.paymentType.key};S(!0),Ne.A.create(R).then((e=>{!function(e,l){qe.A.create(e,l).then((e=>{(e=>{z(e)})(e.data.id),E.resetFields()})).finally((()=>S(!1)))}(e.data.id,D)})).catch((e=>console.error(e))).finally((()=>S(!1)))};return(0,x.jsxs)(t.A,{children:[q&&(0,x.jsx)("div",{className:"loader",children:(0,x.jsx)(j.A,{})}),(0,x.jsxs)("div",{className:"card-save",children:[u.map((e=>{var l,i,n,t,r,u,c,v,p,h,m,y;return(0,x.jsx)("div",{children:!0!==e.bonus?(0,x.jsx)("div",{className:"custom-cart-container",children:(0,x.jsxs)(o.A,{className:"product-row",children:[(0,x.jsx)(Ie.A,{image:(0,f.A)(null===e||void 0===e?void 0:e.img),row:e}),(0,x.jsx)(s.A,{span:18,className:"product-col",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title}),(0,x.jsx)("br",{}),(0,x.jsx)(B.A,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.map((e=>(0,x.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:e.value})))}),(0,x.jsx)("br",{}),(0,x.jsx)(B.A,{wrap:!0,className:"mt-2",children:null===(n=e.addons)||void 0===n?void 0:n.map((e=>{var l,i;return(0,x.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(l=e.product)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title," x"," ",e.quantity]})}))}),(0,x.jsxs)("div",{className:"product-counter",children:[(0,x.jsx)("span",{children:(0,R.A)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)}),(0,x.jsxs)("div",{className:"count",children:[(0,x.jsx)(F.A,{className:"button-counter",shape:"circle",icon:(0,x.jsx)(T.A,{size:14}),onClick:()=>X(e)}),(0,x.jsxs)("span",{children:[e.countable_quantity*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(t=e.unit)||void 0===t||null===(r=t.translation)||void 0===r?void 0:r.title]}),(0,x.jsx)(F.A,{className:"button-counter",shape:"circle",icon:(0,x.jsx)(b.A,{size:14}),onClick:()=>Z(e)}),(0,x.jsx)(F.A,{className:"button-counter",shape:"circle",onClick:()=>{return l=e,a((0,D.dt)(l));var l},icon:(0,x.jsx)(_e.A,{size:14})})]})]})]})})]})},e.id):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h4",{className:"mt-2",children:d("bonus.product")}),(0,x.jsx)("div",{className:"custom-cart-container",children:(0,x.jsxs)(o.A,{className:"product-row",children:[(0,x.jsx)(Ie.A,{image:(0,f.A)(null===e||void 0===e?void 0:e.img),row:e}),(0,x.jsx)(s.A,{span:18,className:"product-col",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(u=e.stockID)||void 0===u||null===(c=u.product)||void 0===c||null===(v=c.translation)||void 0===v?void 0:v.title}),(0,x.jsx)("br",{}),(0,x.jsx)(B.A,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(p=e.stock)||void 0===p?void 0:p.map((e=>(0,x.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:null===e||void 0===e?void 0:e.value})))}),(0,x.jsx)("br",{}),(0,x.jsx)(B.A,{wrap:!0,className:"mt-2",children:null===(h=e.addons)||void 0===h?void 0:h.map((e=>{var l,i;return(0,x.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(l=e.countable)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title," x"," ",null===e||void 0===e?void 0:e.quantity]})}))}),(0,x.jsxs)("div",{className:"product-counter",children:[(0,x.jsx)("span",{children:(0,R.A)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)}),(0,x.jsxs)("div",{className:"count",children:[(0,x.jsx)(F.A,{className:"button-counter",shape:"circle",icon:(0,x.jsx)(T.A,{size:14}),onClick:()=>X(e),disabled:!0}),(0,x.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.quantity)*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(m=e.unit)||void 0===m||null===(y=m.translation)||void 0===y?void 0:y.title]}),(0,x.jsx)(F.A,{className:"button-counter",shape:"circle",icon:(0,x.jsx)(b.A,{size:14}),onClick:()=>Z(e),disabled:!0})]})]})]})})]})},e.id)]})})})),!(null===u||void 0===u||!u.length)&&(0,x.jsxs)("div",{className:"d-flex my-3",children:[(0,x.jsx)(je.A,{placeholder:d("coupon"),className:"w-100 mr-2",addonAfter:null!==(l=y.find((e=>e.shop_id===u[0].shop_id)))&&void 0!==l&&l.verified?(0,x.jsx)(ke.A,{style:{color:"#18a695"}}):null,defaultValue:null===(i=y.find((e=>e.shop_id===u[0].shop_id)))||void 0===i?void 0:i.coupon,onBlur:e=>{var l;return a((0,D.Im)({coupon:e.target.value,user_id:null===(l=N.user)||void 0===l?void 0:l.value,shop_id:u[0].shop_id,verified:!1}))}}),(0,x.jsx)(F.A,{onClick:()=>function(e){let l=y.find((l=>l.shop_id===e));l&&(V(e),we.A.checkCoupon(l).then((l=>a((0,D.sm)({shop_id:e,price:l.data.price,verified:!0})))).catch((()=>a((0,D.sm)({shop_id:e,price:0,verified:!1})))).finally((()=>V(null))))}(u[0].shop_id),loading:M===u[0].shop_id,children:d("check.coupon")})]}),(0,x.jsx)(o.A,{className:"all-price-row",children:(0,x.jsxs)(s.A,{span:24,className:"col",children:[(0,x.jsxs)("div",{className:"all-price-container",children:[(0,x.jsx)("span",{children:d("sub.total")}),(0,x.jsx)("span",{children:(0,R.A)(h.product_total,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,x.jsxs)("div",{className:"all-price-container",children:[(0,x.jsx)("span",{children:d("coupon")}),(0,x.jsx)("span",{children:(0,R.A)(null===h||void 0===h?void 0:h.couponPrice,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,x.jsxs)("div",{className:"all-price-container",children:[(0,x.jsx)("span",{children:d("shop.tax")}),(0,x.jsx)("span",{children:(0,R.A)(h.shop_tax,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,x.jsxs)("div",{className:"all-price-container",children:[(0,x.jsx)("span",{children:d("delivery.fee")}),(0,x.jsx)("span",{children:(0,R.A)(h.delivery_fee,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,x.jsxs)("div",{className:"all-price-container",children:[(0,x.jsx)("span",{children:d("service.fee")}),(0,x.jsx)("span",{children:(0,R.A)(h.service_fee,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]})]})}),(0,x.jsxs)(o.A,{className:"submit-row",children:[(0,x.jsxs)(s.A,{span:14,className:"col",children:[(0,x.jsx)("span",{children:d("total.amount")}),(0,x.jsx)("span",{children:(0,R.A)(h.order_total,null===g||void 0===g?void 0:g.symbol,null===g||void 0===g?void 0:g.position)})]}),(0,x.jsx)(s.A,{className:"col2",children:(0,x.jsx)(F.A,{type:"primary",onClick:()=>J(),disabled:!u.length,children:d("place.order")})})]})]}),!!I&&(0,x.jsx)(Ve,{orderId:I,handleClose:()=>{z(null),(0,v.vA)((()=>{a((0,D.sX)()),a((0,D.MW)()),a((0,_.Ms)(P))})),0!==p&&a((0,D.vX)(p)),k.oR.success(d("successfully.closed"))}})]})}function Re(){return(0,x.jsx)("div",{className:"pos-system",children:(0,x.jsx)(d.A,{className:"site-layout",children:(0,x.jsxs)(o.A,{gutter:24,children:[(0,x.jsxs)(s.A,{span:15,children:[(0,x.jsx)(y,{}),(0,x.jsx)(L,{})]}),(0,x.jsxs)(s.A,{span:9,children:[(0,x.jsx)(fe,{}),(0,x.jsx)(Te,{})]})]})})})}},91348:(e,l,i)=>{"use strict";i.d(l,{A:()=>a});var n=i(89379),d=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};var s=i(25085),t=function(e,l){return d.createElement(s.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};const a=d.forwardRef(t)},53387:(e,l,i)=>{"use strict";i.d(l,{A:()=>a});var n=i(89379),d=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=i(25085),t=function(e,l){return d.createElement(s.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};const a=d.forwardRef(t)},37279:(e,l,i)=>{"use strict";i.d(l,{A:()=>a});var n=i(89379),d=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};var s=i(25085),t=function(e,l){return d.createElement(s.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};const a=d.forwardRef(t)},86245:(e,l)=>{"use strict";l.A=void 0;var i=function(e){return null};l.A=i},42634:()=>{}}]);