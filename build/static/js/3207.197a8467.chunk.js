"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[3207],{80905:(l,e,n)=>{n.d(e,{j:()=>s});var t=n(9950),o=n(95491),a=n.n(o),i=n(99674),u=n(90650),d=n(44414);const s=l=>{let{fetchOptions:e,debounceTimeout:n=400,hasMore:o,refetchOnFocus:s=!1,...r}=l;const[c,v]=(0,t.useState)(!1),[p,h]=(0,t.useState)([]),[b,m]=(0,t.useState)(!1),[x,g]=(0,t.useState)(null),[f,j]=(0,t.useState)(1),A=(0,t.useMemo)((()=>a()((l=>{h([]),g(l),v(!0),e({search:l}).then((l=>{h(l),j(2),v(!1)})).finally((()=>m(!1)))}),n)),[e,n,f]);return(0,d.jsxs)(i.A,{showSearch:!0,allowClear:!0,onPopupScroll:async l=>{const n=l.target;b||n.scrollTop+n.offsetHeight!==n.scrollHeight||o&&(m(!0),e({search:x,page:f}).then((l=>{j((l=>l+1)),h([...p,...l])})).finally((()=>m(!1))))},labelInValue:!0,filterOption:!1,onSearch:A,notFoundContent:c?(0,d.jsx)(u.A,{size:"small"}):"no results",onFocus:()=>{s?A(""):null!==p&&void 0!==p&&p.length||A("")},...r,children:[p.map(((l,e)=>(0,d.jsx)(i.A.Option,{value:l.value,children:l.label},e))),b&&(0,d.jsx)(i.A.Option,{children:(0,d.jsx)(u.A,{size:"small"})})]})}},33207:(l,e,n)=>{n.r(e),n.d(e,{default:()=>g});var t=n(9950),o=n(28429),a=n(49348),i=n(59233),u=n(23263),d=n(91854),s=n(74623),r=n(70030),c=n(59051),v=n.n(c),p=n(96591),h=n(39095),b=n(81446),m=n(10557),x=n(44414);const g=()=>{const{t:l}=(0,r.B)(),{activeMenu:e}=(0,d.d4)((l=>l.menu),d.bN),n=(0,d.wA)(),[c]=i.A.useForm(),g=(0,o.Zp)(),[f,j]=(0,t.useState)(!1),{id:A}=(0,o.g)();(0,t.useEffect)((()=>()=>{const l=c.getFieldsValue(!0),t={...l,expired_at:JSON.stringify(null===l||void 0===l?void 0:l.expired_at)};n((0,s.Ok)({activeMenu:e,data:t}))}),[]);const _=l=>{j(!0),h.A.getById(l).then((l=>{!function(l){var t,o,a,i,u,d,r,p,h,b,m,x,g,f,A,_,k,y,S,q;const N={...l,expired_at:v()(l.expired_at,"YYYY-MM-DD"),bonusable_id:{label:"".concat(null===l||void 0===l||null===(t=l.bonusable)||void 0===t||null===(o=t.product)||void 0===o||null===(a=o.translation)||void 0===a?void 0:a.title," ").concat(null!==l&&void 0!==l&&null!==(i=l.bonusable)&&void 0!==i&&null!==(u=i.extras)&&void 0!==u&&u.length?" => ".concat(null===l||void 0===l||null===(d=l.bonusable)||void 0===d||null===(r=d.extras)||void 0===r||null===(p=r.map((l=>{var e,n;return"".concat(null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,": ").concat(null===l||void 0===l?void 0:l.value)})))||void 0===p?void 0:p.join(", ")):""),value:null===l||void 0===l||null===(h=l.bonusable)||void 0===h?void 0:h.id,key:null===l||void 0===l||null===(b=l.bonusable)||void 0===b?void 0:b.id},bonus_stock_id:{label:"".concat(null===l||void 0===l||null===(m=l.bonusStock)||void 0===m||null===(x=m.product)||void 0===x||null===(g=x.translation)||void 0===g?void 0:g.title," ").concat(null!==l&&void 0!==l&&null!==(f=l.bonusStock)&&void 0!==f&&null!==(A=f.extras)&&void 0!==A&&A.length?" => ".concat(null===l||void 0===l||null===(_=l.bonusStock)||void 0===_||null===(k=_.extras)||void 0===k||null===(y=k.map((l=>{var e,n;return"".concat(null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,": ").concat(null===l||void 0===l?void 0:l.value)})))||void 0===y?void 0:y.join(", ")):""),value:null===l||void 0===l||null===(S=l.bonusStock)||void 0===S?void 0:S.id,key:null===l||void 0===l||null===(q=l.bonusStock)||void 0===q?void 0:q.id}};c.setFieldsValue({...N}),n((0,s.Ok)({activeMenu:e,data:{...N,expired_at:JSON.stringify(N.expired_at)}})),j(!1)}(l.data)})).finally((()=>{j(!1),n((0,s.km)(e))}))};(0,t.useEffect)((()=>{e.refetch&&_(A)}),[e.refetch]);return(0,x.jsx)(u.A,{title:l("edit.bonus"),className:"h-100",children:f?(0,x.jsx)(b.A,{}):(0,x.jsx)(m.A,{form:c,handleSubmit:t=>{const o={expired_at:v()(t.expired_at).format("YYYY-MM-DD"),status:t.status,type:"count",bonusable_id:t.bonusable_id.value,value:t.value,bonus_stock_id:t.bonus_stock_id.value,bonus_quantity:t.bonus_quantity},i="seller/bonus/product";h.A.update(A,o).then((()=>{a.oR.success(l("successfully.updated")),(0,d.vA)((()=>{n((0,s.EK)({...e,nextUrl:i})),n((0,p.q)({}))})),g("/".concat(i))}))}})})}},10557:(l,e,n)=>{n.d(e,{A:()=>g});var t=n(9950),o=n(59233),a=n(87094),i=n(41988),u=n(56952),d=n(5713),s=n(25933),r=n(48538),c=n(59051),v=n.n(c),p=n(70030),h=n(91854),b=n(67231),m=n(80905),x=n(44414);function g(l){let{form:e,handleSubmit:n}=l;const{t:c}=(0,p.B)(),{activeMenu:g}=(0,h.d4)((l=>l.menu),h.bN),[f,j]=(0,t.useState)(!1),[A,_]=(0,t.useState)({product:!1,bonusProduct:!1});return(0,x.jsxs)(o.A,{name:"product-bonus-form",layout:"vertical",onFinish:l=>{j(!0),n(l).finally((()=>j(!1)))},form:e,initialValues:{status:!0,...g.data,...(()=>{var l,e;if(null===(l=g.data)||void 0===l||!l.expired_at)return{};const n=JSON.parse(null===(e=g.data)||void 0===e?void 0:e.expired_at);return{expired_at:v()(n,"HH:mm:ss")}})()},className:"d-flex flex-column h-100",children:[(0,x.jsxs)(a.A,{gutter:12,children:[(0,x.jsx)(i.A,{span:12,children:(0,x.jsx)(o.A.Item,{label:c("products.stock"),name:"bonusable_id",rules:[{required:!0,message:c("required")}],children:(0,x.jsx)(m.j,{fetchOptions:function(l){let{page:e=1,search:n}=l;const t={page:e,search:null!==n&&void 0!==n&&n.length?n:void 0};return b.A.getStock(t).then((l=>{var e,n;return _({...A,product:(null===l||void 0===l||null===(e=l.meta)||void 0===e?void 0:e.current_page)<(null===l||void 0===l||null===(n=l.meta)||void 0===n?void 0:n.last_page)}),l.data.map((l=>{var e,n,t,o,a;return{label:"".concat(null===l||void 0===l||null===(e=l.product)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title," ").concat(null!==l&&void 0!==l&&null!==(t=l.extras)&&void 0!==t&&t.length?"=> ".concat(null===l||void 0===l||null===(o=l.extras)||void 0===o||null===(a=o.map((l=>{var e,n;return"".concat(null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,": ").concat(null===l||void 0===l?void 0:l.value)})))||void 0===a?void 0:a.join(", ")):""),value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}}))}))},hasMore:A.product,allowClear:!1})})}),(0,x.jsx)(i.A,{span:12,children:(0,x.jsx)(o.A.Item,{label:c("product.quantity"),name:"value",rules:[{required:!0,message:c("required")}],children:(0,x.jsx)(u.A,{className:"w-100"})})}),(0,x.jsx)(i.A,{span:12,children:(0,x.jsx)(o.A.Item,{label:c("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:c("required")}],children:(0,x.jsx)(m.j,{fetchOptions:function(l){let{page:e=1,search:n}=l;const t={page:e,search:null!==n&&void 0!==n&&n.length?n:void 0};return b.A.getStock(t).then((l=>{var e,n;return _({...A,bonusProduct:(null===l||void 0===l||null===(e=l.meta)||void 0===e?void 0:e.current_page)<(null===l||void 0===l||null===(n=l.meta)||void 0===n?void 0:n.last_page)}),l.data.map((l=>{var e,n,t,o,a;return{label:"".concat(null===l||void 0===l||null===(e=l.product)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title," ").concat(null!==l&&void 0!==l&&null!==(t=l.extras)&&void 0!==t&&t.length?"=> ".concat(null===l||void 0===l||null===(o=l.extras)||void 0===o||null===(a=o.map((l=>{var e,n;return"".concat(null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,": ").concat(null===l||void 0===l?void 0:l.value)})))||void 0===a?void 0:a.join(", ")):""),value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}}))}))},hasMore:A.bonusProduct,allowClear:!1})})}),(0,x.jsx)(i.A,{span:12,children:(0,x.jsx)(o.A.Item,{label:c("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:c("required")}],children:(0,x.jsx)(u.A,{className:"w-100"})})}),(0,x.jsx)(i.A,{span:12,children:(0,x.jsx)(o.A.Item,{name:"expired_at",label:c("expired.at"),rules:[{required:!0,message:c("required")}],children:(0,x.jsx)(d.A,{className:"w-100",placeholder:"",disabledDate:l=>v()().add(-1,"days")>=l})})}),(0,x.jsx)(i.A,{span:8,children:(0,x.jsx)(o.A.Item,{label:c("active"),name:"status",valuePropName:"checked",children:(0,x.jsx)(s.A,{})})})]}),(0,x.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,x.jsx)("div",{className:"pb-5",children:(0,x.jsx)(r.A,{type:"primary",htmlType:"submit",loading:f,children:c("submit")})})})]})}}}]);