"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4225],{47992:(e,t,s)=>{s.d(t,{G:()=>u});var a=s(9950),r=s(95491),n=s.n(r),l=s(99674),i=s(90650),d=s(44414);const u=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:r,...u}=e;const[c,o]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),p=(0,a.useMemo)((()=>n()((e=>{h([]),o(!0),t(e).then((e=>{h(e),o(!1)}))}),s)),[t,s]);return(0,d.jsx)(l.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),r&&r()},notFoundContent:c?(0,d.jsx)(i.A,{size:"small"}):"no results",...u,options:m,onFocus:()=>{p("")}})}},14225:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(9950),r=s(28429),n=s(49348),l=s(59233),i=s(23263),d=s(59051),u=s.n(d),c=s(91854),o=s(74623),m=s(35765),h=s(73439),p=s(70030),x=s(86954),f=s(44414);function A(){const{t:e}=(0,p.B)(),{activeMenu:t}=(0,c.d4)((e=>e.menu),c.bN),s=(0,c.wA)(),[d]=l.A.useForm(),A=(0,r.Zp)();(0,a.useEffect)((()=>()=>{const e=d.getFieldsValue(!0),a=JSON.stringify(e.start),r=JSON.stringify(e.end),n={...e,start:a,end:r};s((0,o.Ok)({activeMenu:t,data:n}))}),[]);return(0,f.jsx)(i.A,{title:e("add.discount"),className:"h-100",children:(0,f.jsx)(x.A,{form:d,handleSubmit:(a,r)=>{var l;if(u()(a.start).format("YYYY-MM-DD")>u()(a.end).format("YYYY-MM-DD"))return n.oR.error(e("start.date.must.be.before.end.date"));const i={price:a.price,type:a.type,products:a.products.map((e=>e.value)),start:a.start?u()(a.start).format("YYYY-MM-DD"):void 0,end:a.end?u()(a.end).format("YYYY-MM-DD"):void 0,images:[null===(l=r[0])||void 0===l?void 0:l.name]},d="seller/discounts";return m.A.create(i).then((()=>{n.oR.success(e("successfully.created")),s((()=>{s((0,o.EK)({...t,nextUrl:d})),s((0,h.X)({}))})),A("/".concat(d))}))}})})}},86954:(e,t,s)=>{s.d(t,{A:()=>b});var a=s(9950),r=s(59233),n=s(87094),l=s(41988),i=s(99674),d=s(56952),u=s(5713),c=s(48538),o=s(59051),m=s.n(o),h=s(47992),p=s(48970),x=s(70030),f=s(91854),A=s(67231),j=s(44414);function b(e){var t,s;let{form:o,handleSubmit:b}=e;const{t:v}=(0,x.B)(),{activeMenu:g}=(0,f.d4)((e=>e.menu),f.bN),{myShop:Y}=(0,f.d4)((e=>e.myShop),f.bN),[y,M]=(0,a.useState)(!1),[D,q]=(0,a.useState)(null!==(t=g.data)&&void 0!==t&&t.image?null===(s=g.data)||void 0===s?void 0:s.image:[]);return(0,j.jsxs)(r.A,{name:"discount-form",layout:"vertical",onFinish:e=>{M(!0),b(e,D).finally((()=>M(!1)))},form:o,initialValues:{...(()=>{var e;const t=g.data;if(null===(e=g.data)||void 0===e||!e.start)return t;const s=g.data.start,a=g.data.end;return{...t,start:m()(s,"YYYY-MM-DD"),end:m()(a,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,j.jsxs)(n.A,{gutter:12,children:[(0,j.jsx)(l.A,{span:12,children:(0,j.jsx)(r.A.Item,{label:v("type"),name:"type",rules:[{required:!0,message:v("required")}],children:(0,j.jsxs)(i.A,{children:[(0,j.jsx)(i.A.Option,{value:"fix",children:v("fix")}),(0,j.jsx)(i.A.Option,{value:"percent",children:v("percent")})]})})}),(0,j.jsx)(l.A,{span:12,children:(0,j.jsx)(r.A.Item,{label:v("price"),name:"price",rules:[{required:!0,message:v("required")}],children:(0,j.jsx)(d.A,{min:0,className:"w-100"})})}),(0,j.jsx)(l.A,{span:12,children:(0,j.jsx)(r.A.Item,{label:v("start.date"),name:"start",rules:[{required:!0,message:v("required")}],children:(0,j.jsx)(u.A,{className:"w-100",placeholder:"",disabledDate:e=>m()().add(-1,"days")>=e})})}),(0,j.jsx)(l.A,{span:12,children:(0,j.jsx)(r.A.Item,{label:v("end.date"),name:"end",rules:[{required:!0,message:v("required")}],children:(0,j.jsx)(u.A,{className:"w-100",placeholder:"",disabledDate:e=>m()().add(-1,"days")>=e})})}),(0,j.jsx)(l.A,{span:24,children:(0,j.jsx)(r.A.Item,{label:v("products"),name:"products",rules:[{required:!0,message:v("required")}],children:(0,j.jsx)(h.G,{fetchOptions:async function(e){const t={search:e,shop_id:Y.id,status:"published",active:1,rest:1};return A.A.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},mode:"multiple"})})}),(0,j.jsx)(l.A,{span:24,children:(0,j.jsx)(r.A.Item,{label:v("image"),name:"images",rules:[{required:!D.length,message:v("required")}],children:(0,j.jsx)(p.A,{type:"discounts",imageList:D,setImageList:q,form:o,multiple:!1,name:"image"})})})]}),(0,j.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,j.jsx)("div",{className:"pb-5",children:(0,j.jsx)(c.A,{type:"primary",htmlType:"submit",loading:y,children:v("submit")})})})]})}}}]);